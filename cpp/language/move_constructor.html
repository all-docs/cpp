<!DOCTYPE html><html lang="en" dir="ltr" class="client-nojs"><!-- Mirrored from en.cppreference.com/w/cpp/language/move_constructor by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:35:35 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->

<title>Move constructors</title>
<meta charset="UTF-8">
<meta name="generator" content="MediaWiki 1.21.2">







<meta name="ResourceLoaderDynamicStyles" content="">

<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}#toc{display:none}.editsection{display:none}
/* cache key: mwiki1-mwiki_en_:resourceloader:filter:minify-css:7:472787eddcf4605d11de8c7ef047234f */</style>




<style type="text/css">/*<![CDATA[*/
.source-cpp {line-height: normal;}
.source-cpp li, .source-cpp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp
 * CSS class: source-cpp, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp.source-cpp .de1, .cpp.source-cpp .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.cpp.source-cpp  {font-family:monospace;}
.cpp.source-cpp .imp {font-weight: bold; color: red;}
.cpp.source-cpp li, .cpp.source-cpp .li1 {font-weight: normal; vertical-align:top;}
.cpp.source-cpp .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp.source-cpp .li2 {font-weight: bold; vertical-align:top;}
.cpp.source-cpp .kw1 {color: #0000dd;}
.cpp.source-cpp .kw2 {color: #0000ff;}
.cpp.source-cpp .kw3 {color: #0000dd;}
.cpp.source-cpp .kw4 {color: #0000ff;}
.cpp.source-cpp .co1 {color: #909090;}
.cpp.source-cpp .co2 {color: #339900;}
.cpp.source-cpp .coMULTI {color: #ff0000; font-style: italic;}
.cpp.source-cpp .es0 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es1 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es2 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es3 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es4 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es5 {color: #008000; font-weight: bold;}
.cpp.source-cpp .br0 {color: #008000;}
.cpp.source-cpp .sy0 {color: #008000;}
.cpp.source-cpp .sy1 {color: #000080;}
.cpp.source-cpp .sy2 {color: #000040;}
.cpp.source-cpp .sy3 {color: #000040;}
.cpp.source-cpp .sy4 {color: #008080;}
.cpp.source-cpp .st0 {color: #008000;}
.cpp.source-cpp .nu0 {color: #000080;}
.cpp.source-cpp .nu6 {color: #000080;}
.cpp.source-cpp .nu8 {color: #000080;}
.cpp.source-cpp .nu12 {color: #000080;}
.cpp.source-cpp .nu16 {color:#000080;}
.cpp.source-cpp .nu17 {color:#000080;}
.cpp.source-cpp .nu18 {color:#000080;}
.cpp.source-cpp .nu19 {color:#000080;}
.cpp.source-cpp .ln-xtra, .cpp.source-cpp li.ln-xtra, .cpp.source-cpp div.ln-xtra {background-color: #ffc;}
.cpp.source-cpp span.xtra { display:block; }

/*]]>*/
</style><style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/mwiki/skins/cppreference2/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_language_move_constructor skin-cppreference2 action-view cpp-navbar">
        <!-- header -->
        
        <!-- /header -->
        <!-- content -->
<style type="text/css">
#carbonads {
  display: block;
  overflow: hidden;
  position: absolute;
  text-align: center;
  left: -170px;
  max-width: 150px;
  border-radius: 4px;
  border: solid 1px hsla(0, 0%, 0%, .1);
  background-color: hsl(0, 0%, 98%);
  font-size: 12px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu,
  Cantarell, "Helvetica Neue", Helvetica, Arial, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: inherit;
  text-decoration: none;
}

#carbonads a:hover {
  color: inherit;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  display: block;
  margin-bottom: 8px;
  max-width: 150px;
  line-height: 1;
}

.carbon-img img {
  display: block;
  margin: 0 auto;
  max-width: 150px !important;
  width: 150px;
  height: auto;
}

.carbon-text {
  display: block;
  padding: 0 1em 8px;
}

.carbon-poweredby {
  display: block;
  padding: 8px 12px;
  background: repeating-linear-gradient(-45deg, transparent, transparent 5px, hsla(0, 0%, 0%, .025) 5px, hsla(0, 0%, 0%, .025) 10px) hsla(203, 11%, 95%, .4);
  text-transform: uppercase;
  letter-spacing: .5px;
  font-weight: 600;
  font-size: 9px;
  line-height: 1;
}
html { font-variant-ligatures: no-common-ligatures; }
</style>
        <div id="cpp-content-base">
            <div id="content">
                <a id="top"></a>
                <div id="mw-js-message" style="display:none;"></div>
                                <!-- firstHeading -->
<script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYITK7M&amp;placement=cppreferencecom" id="_carbonads_js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HW0LXMYCY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8HW0LXMYCY');
</script>
                <h1 id="firstHeading" class="firstHeading">Move constructors</h1>
                <!-- /firstHeading -->
                <!-- bodyContent -->
                <div id="bodyContent">
                                        <!-- tagline -->
                    
                    <!-- /tagline -->
                                        <!-- subtitle -->
                    
                    <!-- /subtitle -->
                                                            <!-- bodycontent -->
                    <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p>A move constructor is a <a href="constructor.html" title="cpp/language/constructor">constructor</a> which can be called with an argument of the same class type and copies the content of the argument, possibly mutating the argument.
</p>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Syntax"><span class="tocnumber">1</span> <span class="toctext">Syntax</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Explanation"><span class="tocnumber">2</span> <span class="toctext">Explanation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Implicitly-declared_move_constructor"><span class="tocnumber">3</span> <span class="toctext">Implicitly-declared move constructor</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Implicitly-defined_move_constructor"><span class="tocnumber">4</span> <span class="toctext">Implicitly-defined move constructor</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Deleted_move_constructor"><span class="tocnumber">5</span> <span class="toctext">Deleted move constructor</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Trivial_move_constructor"><span class="tocnumber">6</span> <span class="toctext">Trivial move constructor</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Eligible_move_constructor"><span class="tocnumber">7</span> <span class="toctext">Eligible move constructor</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Notes"><span class="tocnumber">8</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Example"><span class="tocnumber">9</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Defect_reports"><span class="tocnumber">10</span> <span class="toctext">Defect reports</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#See_also"><span class="tocnumber">11</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=1" title="Edit section: Syntax">edit</a>]</span> <span class="mw-headline" id="Syntax">Syntax</span></h3>
<table class="t-sdsc-begin">

<tbody><tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <span class="t-spar">class-name</span> ﻿<code><b>(</b></code><span class="t-spar">parameter-list</span> ﻿<code><b>);</b></code>
</td>
<td> (1)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <span class="t-spar">class-name</span> ﻿<code><b>(</b></code><span class="t-spar">parameter-list</span> ﻿<code><b>)</b></code> <span class="t-spar">function-body</span>
</td>
<td> (2)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <span class="t-spar">class-name</span> ﻿<code><b>(</b></code><span class="t-spar">single-parameter-list</span> ﻿<code><b>) = default;</b></code>
</td>
<td> (3)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <span class="t-spar">class-name</span> ﻿<code><b>(</b></code><span class="t-spar">parameter-list</span> ﻿<code><b>) = delete;</b></code>
</td>
<td> (4)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <span class="t-spar">class-name</span> ﻿<code><b>::</b></code><span class="t-spar">class-name</span> ﻿<code><b>(</b></code><span class="t-spar">parameter-list</span> ﻿<code><b>)</b></code> <span class="t-spar">function-body</span>
</td>
<td> (5)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <span class="t-spar">class-name</span> ﻿<code><b>::</b></code><span class="t-spar">class-name</span> ﻿<code><b>(</b></code><span class="t-spar">single-parameter-list</span> ﻿<code><b>) = default;</b></code>
</td>
<td> (6)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr></tbody></table>
<table class="t-par-begin">


<tbody><tr class="t-par">
<td> <span class="t-spar">class-name</span>
</td>
<td> -
</td>
<td> the class whose move constructor is being declared
</td></tr>
<tr class="t-par">
<td> <span class="t-spar">parameter-list</span>
</td>
<td> -
</td>
<td> a non-empty <a href="function.html#Parameter_list" title="cpp/language/function">parameter list</a> satisfying all following conditions:
<ul><li> given the class type as <code>T</code>, the first parameter is of type <span class="mw-geshi cpp source-cpp">T<span class="sy3">&amp;&amp;</span></span>, <span class="mw-geshi cpp source-cpp"><span class="kw4">const</span> T<span class="sy3">&amp;&amp;</span></span>, <span class="mw-geshi cpp source-cpp"><span class="kw4">volatile</span> T<span class="sy3">&amp;&amp;</span></span> or <span class="mw-geshi cpp source-cpp"><span class="kw4">const</span> <span class="kw4">volatile</span> T<span class="sy3">&amp;&amp;</span></span>, and
</li><li> either there are no other parameters, or all other parameters have <a href="default_arguments.html" title="cpp/language/default arguments">default arguments</a>
</li></ul>
</td></tr>
<tr class="t-par">
<td> <span class="t-spar">single-parameter-list</span>
</td>
<td> -
</td>
<td> a <a href="function.html#Parameter_list" title="cpp/language/function">parameter list</a> of only one parameter, which is of type <span class="mw-geshi cpp source-cpp">T<span class="sy3">&amp;&amp;</span></span>, <span class="mw-geshi cpp source-cpp"><span class="kw4">const</span> T<span class="sy3">&amp;&amp;</span></span>, <span class="mw-geshi cpp source-cpp"><span class="kw4">volatile</span> T<span class="sy3">&amp;&amp;</span></span> or <span class="mw-geshi cpp source-cpp"><span class="kw4">const</span> <span class="kw4">volatile</span> T<span class="sy3">&amp;&amp;</span></span> and does not have a default argument
</td></tr>
<tr class="t-par">
<td> <span class="t-spar">function-body</span>
</td>
<td> -
</td>
<td> the <a href="constructor.html" title="cpp/language/constructor">function body</a> of the move constructor
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=2" title="Edit section: Explanation">edit</a>]</span> <span class="mw-headline" id="Explanation">Explanation</span></h3>
<div class="t-li1"><span class="t-li">1)</span> Declaration of a move constructor inside of class definition.</div>
<div class="t-li1"><span class="t-li">2-4)</span> Definition of a move constructor inside of class definition.</div>
<div class="t-li2"><span class="t-li">3)</span> The move constructor is explicitly-defaulted.</div>
<div class="t-li2"><span class="t-li">4)</span> The move constructor is deleted.</div>
<div class="t-li1"><span class="t-li">5,6)</span> Definition of a move constructor outside of class definition (the class must contain a declaration <span class="t-v">(1)</span>).</div>
<div class="t-li2"><span class="t-li">6)</span> The move constructor is explicitly-defaulted.</div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">struct</span> X
<span class="br0">{</span>
    X<span class="br0">(</span>X<span class="sy3">&amp;&amp;</span> other<span class="br0">)</span><span class="sy4">;</span> <span class="co1">// move constructor</span>
<span class="co1">//  X(X other);   // Error: incorrect parameter type</span>
<span class="br0">}</span><span class="sy4">;</span>
&nbsp;
<span class="kw1">union</span> Y
<span class="br0">{</span>
    Y<span class="br0">(</span>Y<span class="sy3">&amp;&amp;</span> other, <span class="kw4">int</span> num <span class="sy1">=</span> <span class="nu0">1</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// move constructor with multiple parameters</span>
<span class="co1">//  Y(Y&amp;&amp; other, int num);     // Error: `num` has no default argument</span>
<span class="br0">}</span><span class="sy4">;</span></pre></div></div>
<p>The move constructor is typically called when an object is <a href="initialization.html" title="cpp/language/initialization">initialized</a> (by <a href="direct_initialization.html" title="cpp/language/direct initialization">direct-initialization</a> or <a href="copy_initialization.html" title="cpp/language/copy initialization">copy-initialization</a>) from <span class="t-rev-inl t-until-cxx17"><span><a href="value_category.html#rvalue" title="cpp/language/value category">rvalue</a> (xvalue or prvalue)</span><span><span class="t-mark-rev t-until-cxx17">(until C++17)</span></span></span><span class="t-rev-inl t-since-cxx17"><span>xvalue</span><span><span class="t-mark-rev t-since-cxx17">(since C++17)</span></span></span> of the same type, including 
</p>
<ul><li> initialization: <span class="t-c"><span class="mw-geshi cpp source-cpp">T a <span class="sy1">=</span> std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>b<span class="br0">)</span><span class="sy4">;</span></span></span> or <span class="t-c"><span class="mw-geshi cpp source-cpp">T a<span class="br0">(</span>std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>b<span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span></span></span>, where <span class="t-c"><span class="mw-geshi cpp source-cpp">b</span></span> is of type <code>T</code>;
</li><li> function argument passing: <span class="t-c"><span class="mw-geshi cpp source-cpp">f<span class="br0">(</span>std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span></span></span>, where <span class="t-c"><span class="mw-geshi cpp source-cpp">a</span></span> is of type <code>T</code> and <span class="t-c"><span class="mw-geshi cpp source-cpp">f</span></span> is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw4">void</span> f<span class="br0">(</span>T t<span class="br0">)</span></span></span>;
</li><li> function return: <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw1">return</span> a<span class="sy4">;</span></span></span> inside a function such as <span class="t-c"><span class="mw-geshi cpp source-cpp">T f<span class="br0">(</span><span class="br0">)</span></span></span>, where <span class="t-c"><span class="mw-geshi cpp source-cpp">a</span></span> is of type <code>T</code> which has a move constructor.
</li></ul>
<p>When the initializer is a prvalue, the move constructor call is <span class="t-rev-inl t-until-cxx17"><span>often optimized out</span><span><span class="t-mark-rev t-until-cxx17">(until C++17)</span></span></span><span class="t-rev-inl t-since-cxx17"><span>never made</span><span><span class="t-mark-rev t-since-cxx17">(since C++17)</span></span></span>, see <a href="copy_elision.html" title="cpp/language/copy elision">copy elision</a>.
</p><p>Move constructors typically transfer the resources held by the argument (e.g. pointers to dynamically-allocated objects, file descriptors, TCP sockets, thread handles, etc.) rather than make copies of them, and leave the argument in some valid but otherwise indeterminate state. Since move constructor doesn’t change the lifetime of the argument, the destructor will typically be called on the argument at a later point. For example, moving from a <span class="t-lc"><a href="../string/basic_string.html" title="cpp/string/basic string">std::string</a></span> or from a <span class="t-lc"><a href="../container/vector.html" title="cpp/container/vector">std::vector</a></span> may result in the argument being left empty. For some types, such as <span class="t-lc"><a href="../memory/unique_ptr.html" title="cpp/memory/unique ptr">std::unique_ptr</a></span>, the moved-from state is fully specified.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=3" title="Edit section: Implicitly-declared move constructor">edit</a>]</span> <span class="mw-headline" id="Implicitly-declared_move_constructor">Implicitly-declared move constructor</span></h3>
<p>If no user-defined move constructors are provided for a class type, and all of the following is true:
</p>
<ul><li> there are no user-declared <a href="copy_constructor.html" title="cpp/language/copy constructor">copy constructors</a>;
</li><li> there are no user-declared <a href="copy_assignment.html" title="cpp/language/copy assignment">copy assignment operators</a>;
</li><li> there are no user-declared <a href="move_assignment.html" title="cpp/language/move assignment">move assignment operators</a>;
</li><li> there is no user-declared <a href="destructor.html" title="cpp/language/destructor">destructor</a>.
</li></ul>
<p>Then the compiler will declare a move constructor as a non-<a href="explicit.html" title="cpp/language/explicit">explicit</a> <span class="mw-geshi cpp source-cpp"><span class="kw1">inline</span> <span class="kw1">public</span></span> member of its class with the signature <span class="t-c"><span class="mw-geshi cpp source-cpp">T<span class="sy4">::</span><span class="me2">T</span><span class="br0">(</span>T<span class="sy3">&amp;&amp;</span><span class="br0">)</span></span></span>. 
</p><p>A class can have multiple move constructors, e.g. both <span class="t-c"><span class="mw-geshi cpp source-cpp">T<span class="sy4">::</span><span class="me2">T</span><span class="br0">(</span><span class="kw4">const</span> T<span class="sy3">&amp;&amp;</span><span class="br0">)</span></span></span> and <span class="t-c"><span class="mw-geshi cpp source-cpp">T<span class="sy4">::</span><span class="me2">T</span><span class="br0">(</span>T<span class="sy3">&amp;&amp;</span><span class="br0">)</span></span></span>. If some user-defined move constructors are present, the user may still force the generation of the implicitly declared move constructor with the keyword <span class="mw-geshi cpp source-cpp"><span class="kw1">default</span></span>.
</p><p>The implicitly-declared (or defaulted on its first declaration) move constructor has an exception specification as described in <span class="t-rev-inl t-until-cxx17"><span><a href="except_spec.html" title="cpp/language/except spec">dynamic exception specification</a></span><span><span class="t-mark-rev t-until-cxx17">(until C++17)</span></span></span><span class="t-rev-inl t-since-cxx17"><span><a href="noexcept_spec.html" title="cpp/language/noexcept spec">noexcept specification</a></span><span><span class="t-mark-rev t-since-cxx17">(since C++17)</span></span></span>.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=4" title="Edit section: Implicitly-defined move constructor">edit</a>]</span> <span class="mw-headline" id="Implicitly-defined_move_constructor">Implicitly-defined move constructor</span></h3>
<p>If the implicitly-declared move constructor is neither deleted nor trivial, it is defined (that is, a function body is generated and compiled) by the compiler if <a href="definition.html#ODR-use" title="cpp/language/definition">ODR-use</a> or <a href="constant_expression.html#Functions_and_variables_needed_for_constant_evaluation" title="cpp/language/constant expression">needed for constant evaluation</a>. For union types, the implicitly-defined move constructor copies the object representation (as by <span class="t-lc"><a href="../string/byte/memmove.html" title="cpp/string/byte/memmove">std::memmove</a></span>). For non-union class types, the move constructor performs full member-wise move of the object's direct base subobjects and member subobjects, in their initialization order, using direct initialization with an <a href="value_category.html#xvalue" title="cpp/language/value category">xvalue</a> argument. For each non-static data member of a reference type, the move constructor binds the reference to the same object or function to which the source reference is bound.
</p><p>If this satisfies the requirements of a <span class="t-rev-inl t-until-cxx23"><span><a href="constexpr.html#constexpr_constructor" title="cpp/language/constexpr"><code>constexpr</code> constructor</a></span><span><span class="t-mark-rev t-until-cxx23">(until C++23)</span></span></span><span class="t-rev-inl t-since-cxx23"><span><a href="constexpr.html#constexpr_function" title="cpp/language/constexpr"><code>constexpr</code> function</a></span><span><span class="t-mark-rev t-since-cxx23">(since C++23)</span></span></span>, the generated move constructor is <span class="mw-geshi cpp source-cpp"><span class="kw4">constexpr</span></span>.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=5" title="Edit section: Deleted move constructor">edit</a>]</span> <span class="mw-headline" id="Deleted_move_constructor">Deleted move constructor</span></h3>
<p>The implicitly-declared or explicitly-defaulted move constructor for class <code>T</code> is defined as deleted if <code>T</code> has a <a href="object.html#Potentially_constructed_subobject" title="cpp/language/object">potentially constructed subobject</a> of class type <code>M</code> (or possibly multi-dimensional array thereof) such that
</p>
<ul><li> <code>M</code> has a destructor that is deleted or inaccessible from the copy constructor, or
</li><li> the overload resolution as applied to find <code>M</code>'s move constructor
</li></ul>
<dl><dd><ul><li> does not result in a usable candidate, or
</li><li> in the case of the subobject being a <a href="union.html#Union-like_classes" title="cpp/language/union">variant member</a>, selects a non-trivial function.
</li></ul>
</dd></dl>
<p>Such a constructor is ignored by <a href="overload_resolution.html" title="cpp/language/overload resolution">overload resolution</a> (otherwise it would prevent copy-initialization from rvalue).
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=6" title="Edit section: Trivial move constructor">edit</a>]</span> <span class="mw-headline" id="Trivial_move_constructor">Trivial move constructor</span></h3>
<p>The move constructor for class <code>T</code> is trivial if all of the following is true:
</p>
<ul><li> it is not user-provided (meaning, it is implicitly-defined or defaulted);
</li><li> <code>T</code> has no virtual member functions;
</li><li> <code>T</code> has no virtual base classes;
</li><li> the move constructor selected for every direct base of <code>T</code> is trivial;
</li><li> the move constructor selected for every non-static class type (or array of class type) member of <code>T</code> is trivial.
</li></ul>
<p>A trivial move constructor is a constructor that performs the same action as the trivial copy constructor, that is, makes a copy of the object representation as if by <span class="t-lc"><a href="../string/byte/memmove.html" title="cpp/string/byte/memmove">std::memmove</a></span>. All data types compatible with the C language are trivially movable.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=7" title="Edit section: Eligible move constructor">edit</a>]</span> <span class="mw-headline" id="Eligible_move_constructor">Eligible move constructor</span></h3>
<table class="t-rev-begin">

<tbody><tr class="t-rev t-until-cxx20"><td>
<p>A move constructor is eligible if it is not deleted.
</p>
</td>
<td><span class="t-mark-rev t-until-cxx20">(until C++20)</span></td></tr>
<tr class="t-rev t-since-cxx20"><td>
<p>A move constructor is eligible if all following conditions are satisfied:
</p>
<ul><li> It is not deleted.
</li><li> Its <a href="constraints.html" title="cpp/language/constraints">associated constraints</a> (if any) are satisfied.
</li><li> No move constructor whose associated constraints are satisfied is <a href="constraints.html#Partial_ordering_of_constraints" title="cpp/language/constraints">more constrained</a>.
</li></ul>
</td>
<td><span class="t-mark-rev t-since-cxx20">(since C++20)</span></td></tr>
</tbody></table>
<p>Triviality of eligible move constructors determines whether the class is an <a href="lifetime.html#Implicit-lifetime_types" title="cpp/language/lifetime">implicit-lifetime type</a>, and whether the class is a <a href="../named_req/TriviallyCopyable.html" title="cpp/named req/TriviallyCopyable">trivially copyable type</a>.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=8" title="Edit section: Notes">edit</a>]</span> <span class="mw-headline" id="Notes">Notes</span></h3>
<p>To make the <a href="exceptions.html#Exception_safety" title="cpp/language/exceptions">strong exception guarantee</a> possible, user-defined move constructors should not throw exceptions. For example, <span class="t-lc"><a href="../container/vector.html" title="cpp/container/vector">std::vector</a></span> relies on <span class="t-lc"><a href="../utility/move_if_noexcept.html" title="cpp/utility/move if noexcept">std::move_if_noexcept</a></span> to choose between move and copy when the elements need to be relocated.
</p><p>If both copy and move constructors are provided and no other constructors are viable, overload resolution selects the move constructor if the argument is an <a href="value_category.html#rvalue" title="cpp/language/value category">rvalue</a> of the same type (an <a href="value_category.html#xvalue" title="cpp/language/value category">xvalue</a> such as the result of <span class="t-lc">std::move</span><span class="t-rev-inl t-until-cxx17"><span> or a <a href="value_category.html#prvalue" title="cpp/language/value category">prvalue</a> such as a nameless temporary</span><span><span class="t-mark-rev t-until-cxx17">(until C++17)</span></span></span>), and selects the copy constructor if the argument is an <a href="value_category.html#lvalue" title="cpp/language/value category">lvalue</a> (named object or a function/operator returning lvalue reference). If only the copy constructor is provided, all argument categories select it (as long as it takes a reference to const, since rvalues can bind to const references), which makes copying the fallback for moving, when moving is unavailable.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=9" title="Edit section: Example">edit</a>]</span> <span class="mw-headline" id="Example">Example</span></h3>
<div class="t-example"><div class="t-example-live-link"><div class="coliru-btn coliru-btn-run-init">Run this code</div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="co2">#include &lt;iomanip&gt;</span>
<span class="co2">#include &lt;iostream&gt;</span>
<span class="co2">#include &lt;string&gt;</span>
<span class="co2">#include &lt;utility&gt;</span>
&nbsp;
<span class="kw1">struct</span> A
<span class="br0">{</span>
    <a href="../string/basic_string.html"><span class="kw1238">std::<span class="me2">string</span></span></a> s<span class="sy4">;</span>
    <span class="kw4">int</span> k<span class="sy4">;</span>
&nbsp;
    A<span class="br0">(</span><span class="br0">)</span> <span class="sy4">:</span> s<span class="br0">(</span><span class="st0">"test"</span><span class="br0">)</span>, k<span class="br0">(</span><span class="sy2">-</span><span class="nu0">1</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span>
    A<span class="br0">(</span><span class="kw4">const</span> A<span class="sy3">&amp;</span> o<span class="br0">)</span> <span class="sy4">:</span> s<span class="br0">(</span>o.<span class="me1">s</span><span class="br0">)</span>, k<span class="br0">(</span>o.<span class="me1">k</span><span class="br0">)</span> <span class="br0">{</span> <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"move failed!<span class="es1">\n</span>"</span><span class="sy4">;</span> <span class="br0">}</span>
    A<span class="br0">(</span>A<span class="sy3">&amp;&amp;</span> o<span class="br0">)</span> <span class="kw1">noexcept</span> <span class="sy4">:</span>
        s<span class="br0">(</span>std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>o.<span class="me1">s</span><span class="br0">)</span><span class="br0">)</span>,       <span class="co1">// explicit move of a member of class type</span>
        k<span class="br0">(</span><a href="../utility/exchange.html"><span class="kw1126">std::<span class="me2">exchange</span></span></a><span class="br0">(</span>o.<span class="me1">k</span>, <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span> <span class="co1">// explicit move of a member of non-class type</span>
    <span class="br0">{</span><span class="br0">}</span>
<span class="br0">}</span><span class="sy4">;</span>
&nbsp;
A f<span class="br0">(</span>A a<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">return</span> a<span class="sy4">;</span>
<span class="br0">}</span>
&nbsp;
<span class="kw1">struct</span> B <span class="sy4">:</span> A
<span class="br0">{</span>
    <a href="../string/basic_string.html"><span class="kw1238">std::<span class="me2">string</span></span></a> s2<span class="sy4">;</span>
    <span class="kw4">int</span> n<span class="sy4">;</span>
    <span class="co1">// implicit move constructor B::(B&amp;&amp;)</span>
    <span class="co1">// calls A's move constructor</span>
    <span class="co1">// calls s2's move constructor</span>
    <span class="co1">// and makes a bitwise copy of n</span>
<span class="br0">}</span><span class="sy4">;</span>
&nbsp;
<span class="kw1">struct</span> C <span class="sy4">:</span> B
<span class="br0">{</span>
    ~C<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span> <span class="co1">// destructor prevents implicit move constructor C::(C&amp;&amp;)</span>
<span class="br0">}</span><span class="sy4">;</span>
&nbsp;
<span class="kw1">struct</span> D <span class="sy4">:</span> B
<span class="br0">{</span>
    D<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span>
    ~D<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span>           <span class="co1">// destructor would prevent implicit move constructor D::(D&amp;&amp;)</span>
    D<span class="br0">(</span>D<span class="sy3">&amp;&amp;</span><span class="br0">)</span> <span class="sy1">=</span> <span class="kw1">default</span><span class="sy4">;</span> <span class="co1">// forces a move constructor anyway</span>
<span class="br0">}</span><span class="sy4">;</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"Trying to move A<span class="es1">\n</span>"</span><span class="sy4">;</span>
    A a1 <span class="sy1">=</span> f<span class="br0">(</span>A<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// return by value move-constructs the target</span>
                   <span class="co1">// from the function parameter</span>
&nbsp;
    <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"Before move, a1.s = "</span> <span class="sy1">&lt;&lt;</span> <a href="../io/manip/quoted.html"><span class="kw1819">std::<span class="me2">quoted</span></span></a><span class="br0">(</span>a1.<span class="me1">s</span><span class="br0">)</span>
        <span class="sy1">&lt;&lt;</span> <span class="st0">" a1.k = "</span> <span class="sy1">&lt;&lt;</span> a1.<span class="me1">k</span> <span class="sy1">&lt;&lt;</span> <span class="st0">'<span class="es1">\n</span>'</span><span class="sy4">;</span>
&nbsp;
    A a2 <span class="sy1">=</span> std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>a1<span class="br0">)</span><span class="sy4">;</span> <span class="co1">// move-constructs from xvalue</span>
    <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"After move, a1.s = "</span> <span class="sy1">&lt;&lt;</span> <a href="../io/manip/quoted.html"><span class="kw1819">std::<span class="me2">quoted</span></span></a><span class="br0">(</span>a1.<span class="me1">s</span><span class="br0">)</span>
        <span class="sy1">&lt;&lt;</span> <span class="st0">" a1.k = "</span> <span class="sy1">&lt;&lt;</span> a1.<span class="me1">k</span> <span class="sy1">&lt;&lt;</span> <span class="st0">'<span class="es1">\n</span>'</span><span class="sy4">;</span>
&nbsp;
&nbsp;
    <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"<span class="es1">\n</span>Trying to move B<span class="es1">\n</span>"</span><span class="sy4">;</span>
    B b1<span class="sy4">;</span>
&nbsp;
    <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"Before move, b1.s = "</span> <span class="sy1">&lt;&lt;</span> <a href="../io/manip/quoted.html"><span class="kw1819">std::<span class="me2">quoted</span></span></a><span class="br0">(</span>b1.<span class="me1">s</span><span class="br0">)</span> <span class="sy1">&lt;&lt;</span> <span class="st0">"<span class="es1">\n</span>"</span><span class="sy4">;</span>
&nbsp;
    B b2 <span class="sy1">=</span> std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>b1<span class="br0">)</span><span class="sy4">;</span> <span class="co1">// calls implicit move constructor</span>
    <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"After move, b1.s = "</span> <span class="sy1">&lt;&lt;</span> <a href="../io/manip/quoted.html"><span class="kw1819">std::<span class="me2">quoted</span></span></a><span class="br0">(</span>b1.<span class="me1">s</span><span class="br0">)</span> <span class="sy1">&lt;&lt;</span> <span class="st0">"<span class="es1">\n</span>"</span><span class="sy4">;</span>
&nbsp;
&nbsp;
    <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"<span class="es1">\n</span>Trying to move C<span class="es1">\n</span>"</span><span class="sy4">;</span>
    C c1<span class="sy4">;</span>
    C c2 <span class="sy1">=</span> std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>c1<span class="br0">)</span><span class="sy4">;</span> <span class="co1">// calls copy constructor</span>
&nbsp;
    <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"<span class="es1">\n</span>Trying to move D<span class="es1">\n</span>"</span><span class="sy4">;</span>
    D d1<span class="sy4">;</span>
    D d2 <span class="sy1">=</span> std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>d1<span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p>Output:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="text source-text"><pre class="de1">Trying to move A
Before move, a1.s = "test" a1.k = -1
After move, a1.s = "" a1.k = 0
&nbsp;
Trying to move B
Before move, b1.s = "test"
After move, b1.s = ""
&nbsp;
Trying to move C
move failed!
&nbsp;
Trying to move D</pre></div></div> 
</div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=10" title="Edit section: Defect reports">edit</a>]</span> <span class="mw-headline" id="Defect_reports">Defect reports</span></h3>
<p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.
</p>
<table class="dsctable" style="font-size:0.8em">
<tbody><tr>
<th>DR
</th>
<th>Applied to
</th>
<th>Behavior as published
</th>
<th>Correct behavior
</th></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1353.html">CWG 1353</a>
</td>
<td>C++11
</td>
<td>the conditions where defaulted move constructors are<br>defined as deleted did not consider multi-dimensional array types
</td>
<td>consider these types
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1402.html">CWG 1402</a>
</td>
<td>C++11
</td>
<td>a defaulted move constructor that would call<br>a non-trivial copy constructor was defined as<br>deleted; a defaulted move constructor that is<br>deleted still participated in overload resolution
</td>
<td>allows call to such copy<br>constructor; made ignored<br>in overload resolution
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1491.html">CWG 1491</a>
</td>
<td>C++11
</td>
<td>a defaulted move constructor of a class with a non-static data<br>member of rvalue reference type was defined as deleted
</td>
<td>not deleted in this case
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/2094.html">CWG 2094</a>
</td>
<td>C++11
</td>
<td>a volatile subobject made a defaulted<br>move constructor non-trivial (<a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/496.html">CWG issue 496</a>)
</td>
<td>triviality not affected
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/2595.html">CWG 2595</a>
</td>
<td>C++20
</td>
<td>a move constructor was not eligible if there is<br>another move constructor which is more constrained<br>but does not satisfy its associated constraints
</td>
<td>it can be eligible in this case
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;action=edit&amp;section=11" title="Edit section: See also">edit</a>]</span> <span class="mw-headline" id="See_also">See also</span></h3>
<ul><li> <a href="converting_constructor.html" title="cpp/language/converting constructor">converting constructor</a>
</li><li> <a href="copy_assignment.html" title="cpp/language/copy assignment">copy assignment</a>
</li><li> <a href="copy_constructor.html" title="cpp/language/copy constructor">copy constructor</a>
</li><li> <a href="copy_elision.html" title="cpp/language/copy elision">copy elision</a>
</li><li> <a href="default_constructor.html" title="cpp/language/default constructor">default constructor</a>
</li><li> <a href="destructor.html" title="cpp/language/destructor">destructor</a>
</li><li> <a href="explicit.html" title="cpp/language/explicit"><code>explicit</code></a>
</li><li> <a href="initialization.html" title="cpp/language/initialization">initialization</a>
<ul><li> <a href="aggregate_initialization.html" title="cpp/language/aggregate initialization">aggregate initialization</a>
</li><li> <a href="constant_initialization.html" title="cpp/language/constant initialization">constant initialization</a>
</li><li> <a href="copy_initialization.html" title="cpp/language/copy initialization">copy initialization</a>
</li><li> <a href="default_initialization.html" title="cpp/language/default initialization">default initialization</a>
</li><li> <a href="direct_initialization.html" title="cpp/language/direct initialization">direct initialization</a>
</li><li> <a href="constructor.html" title="cpp/language/initializer list" class="mw-redirect">initializer list</a>
</li><li> <a href="list_initialization.html" title="cpp/language/list initialization">list initialization</a>
</li><li> <a href="reference_initialization.html" title="cpp/language/reference initialization">reference initialization</a>
</li><li> <a href="value_initialization.html" title="cpp/language/value initialization">value initialization</a>
</li><li> <a href="zero_initialization.html" title="cpp/language/zero initialization">zero initialization</a>
</li></ul>
</li><li> <a href="move_assignment.html" title="cpp/language/move assignment">move assignment</a>
</li><li> <a href="new.html" title="cpp/language/new"><code>new</code></a>
</li></ul>

<!-- 
NewPP limit report
Preprocessor visited node count: 5608/1000000
Preprocessor generated node count: 11188/1000000
Post‐expand include size: 165868/4194304 bytes
Template argument size: 30540/4194304 bytes
Highest expansion depth: 16/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mwiki1-mwiki_en_:pcache:idhash:8540-0!*!0!!en!*!* and timestamp 20250103105526 -->
</div>                    <!-- /bodycontent -->
                                        <!-- printfooter -->
                    <div class="printfooter">
                    Retrieved from "<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;oldid=176536">https://en.cppreference.com/mwiki/index.php?title=cpp/language/move_constructor&amp;oldid=176536</a>"                    </div>
                    <!-- /printfooter -->
                                                            <!-- catlinks -->
                    <div id="catlinks" class="catlinks catlinks-allhidden"></div>                    <!-- /catlinks -->
                                                            <div class="visualClear"></div>
                    <!-- debughtml -->
                                        <!-- /debughtml -->
                </div>
                <!-- /bodyContent -->
            </div>
        </div>
        <!-- /content -->
        <!-- footer -->
        
        <!-- /footer -->
        <script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=skins.cppreference2&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi","ext.gadget.ColiruCompiler","ext.gadget.StandardRevisions","ext.gadget.MathJax"], null, true);
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<!-- Served in 3.858 secs. -->
	




</body><!-- Cached 20250103105526 --><!-- Mirrored from en.cppreference.com/w/cpp/language/move_constructor by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:35:35 GMT --></html>