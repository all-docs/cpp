<!DOCTYPE html><html lang="en" dir="ltr" class="client-nojs"><!-- Mirrored from en.cppreference.com/w/cpp/language/initialization by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:08:08 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->

<title>Initialization</title>
<meta charset="UTF-8">
<meta name="generator" content="MediaWiki 1.21.2">







<meta name="ResourceLoaderDynamicStyles" content="">

<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}#toc{display:none}.editsection{display:none}
/* cache key: mwiki1-mwiki_en_:resourceloader:filter:minify-css:7:472787eddcf4605d11de8c7ef047234f */</style>




<style type="text/css">/*<![CDATA[*/
.source-cpp {line-height: normal;}
.source-cpp li, .source-cpp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp
 * CSS class: source-cpp, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp.source-cpp .de1, .cpp.source-cpp .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.cpp.source-cpp  {font-family:monospace;}
.cpp.source-cpp .imp {font-weight: bold; color: red;}
.cpp.source-cpp li, .cpp.source-cpp .li1 {font-weight: normal; vertical-align:top;}
.cpp.source-cpp .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp.source-cpp .li2 {font-weight: bold; vertical-align:top;}
.cpp.source-cpp .kw1 {color: #0000dd;}
.cpp.source-cpp .kw2 {color: #0000ff;}
.cpp.source-cpp .kw3 {color: #0000dd;}
.cpp.source-cpp .kw4 {color: #0000ff;}
.cpp.source-cpp .co1 {color: #909090;}
.cpp.source-cpp .co2 {color: #339900;}
.cpp.source-cpp .coMULTI {color: #ff0000; font-style: italic;}
.cpp.source-cpp .es0 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es1 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es2 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es3 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es4 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es5 {color: #008000; font-weight: bold;}
.cpp.source-cpp .br0 {color: #008000;}
.cpp.source-cpp .sy0 {color: #008000;}
.cpp.source-cpp .sy1 {color: #000080;}
.cpp.source-cpp .sy2 {color: #000040;}
.cpp.source-cpp .sy3 {color: #000040;}
.cpp.source-cpp .sy4 {color: #008080;}
.cpp.source-cpp .st0 {color: #008000;}
.cpp.source-cpp .nu0 {color: #000080;}
.cpp.source-cpp .nu6 {color: #000080;}
.cpp.source-cpp .nu8 {color: #000080;}
.cpp.source-cpp .nu12 {color: #000080;}
.cpp.source-cpp .nu16 {color:#000080;}
.cpp.source-cpp .nu17 {color:#000080;}
.cpp.source-cpp .nu18 {color:#000080;}
.cpp.source-cpp .nu19 {color:#000080;}
.cpp.source-cpp .ln-xtra, .cpp.source-cpp li.ln-xtra, .cpp.source-cpp div.ln-xtra {background-color: #ffc;}
.cpp.source-cpp span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/mwiki/skins/cppreference2/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_language_initialization skin-cppreference2 action-view cpp-navbar">
        <!-- header -->
        
        <!-- /header -->
        <!-- content -->
<style type="text/css">
#carbonads {
  display: block;
  overflow: hidden;
  position: absolute;
  text-align: center;
  left: -170px;
  max-width: 150px;
  border-radius: 4px;
  border: solid 1px hsla(0, 0%, 0%, .1);
  background-color: hsl(0, 0%, 98%);
  font-size: 12px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu,
  Cantarell, "Helvetica Neue", Helvetica, Arial, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: inherit;
  text-decoration: none;
}

#carbonads a:hover {
  color: inherit;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  display: block;
  margin-bottom: 8px;
  max-width: 150px;
  line-height: 1;
}

.carbon-img img {
  display: block;
  margin: 0 auto;
  max-width: 150px !important;
  width: 150px;
  height: auto;
}

.carbon-text {
  display: block;
  padding: 0 1em 8px;
}

.carbon-poweredby {
  display: block;
  padding: 8px 12px;
  background: repeating-linear-gradient(-45deg, transparent, transparent 5px, hsla(0, 0%, 0%, .025) 5px, hsla(0, 0%, 0%, .025) 10px) hsla(203, 11%, 95%, .4);
  text-transform: uppercase;
  letter-spacing: .5px;
  font-weight: 600;
  font-size: 9px;
  line-height: 1;
}
html { font-variant-ligatures: no-common-ligatures; }
</style>
        <div id="cpp-content-base">
            <div id="content">
                <a id="top"></a>
                <div id="mw-js-message" style="display:none;"></div>
                                <!-- firstHeading -->
<script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYITK7M&amp;placement=cppreferencecom" id="_carbonads_js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HW0LXMYCY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8HW0LXMYCY');
</script>
                <h1 id="firstHeading" class="firstHeading">Initialization</h1>
                <!-- /firstHeading -->
                <!-- bodyContent -->
                <div id="bodyContent">
                                        <!-- tagline -->
                    
                    <!-- /tagline -->
                                        <!-- subtitle -->
                    
                    <!-- /subtitle -->
                                                            <!-- bodycontent -->
                    <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p><i>Initialization</i> of a variable provides its initial value at the time of construction. 
</p><p>The initial value may be provided in the initializer section of a <a href="declarations.html" title="cpp/language/declarations">declarator</a> or a <a href="new.html" title="cpp/language/new">new expression</a>. It also takes place during function calls: function parameters and the function return values are also initialized.
</p>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Initializers"><span class="tocnumber">1</span> <span class="toctext">Initializers</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Initializer_semantics"><span class="tocnumber">1.1</span> <span class="toctext">Initializer semantics</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#Non-local_variables"><span class="tocnumber">2</span> <span class="toctext">Non-local variables</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Static_initialization"><span class="tocnumber">2.1</span> <span class="toctext">Static initialization</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Dynamic_initialization"><span class="tocnumber">2.2</span> <span class="toctext">Dynamic initialization</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Early_dynamic_initialization"><span class="tocnumber">2.3</span> <span class="toctext">Early dynamic initialization</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Deferred_dynamic_initialization"><span class="tocnumber">2.4</span> <span class="toctext">Deferred dynamic initialization</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Static_local_variables"><span class="tocnumber">3</span> <span class="toctext">Static local variables</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Class_members"><span class="tocnumber">4</span> <span class="toctext">Class members</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Notes"><span class="tocnumber">5</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Defect_reports"><span class="tocnumber">6</span> <span class="toctext">Defect reports</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#See_also"><span class="tocnumber">7</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=1" title="Edit section: Initializers">edit</a>]</span> <span class="mw-headline" id="Initializers">Initializers</span></h3>
<p>For each declarator, the <i>initializer</i> (if exists) may be one of the following:
</p>
<table class="t-sdsc-begin">

<tbody><tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <code><b>=</b></code> <span class="t-spar">expression</span>
</td>
<td> (1)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <code><b>= {}</b></code><br><code><b>= {</b></code> <span class="t-spar">initializer-list</span> <code><b>}</b></code><br><code><b>= {</b></code> <span class="t-spar">designated-initializer-list</span> <code><b>}</b></code>
</td>
<td> (2)
</td>
<td> <br><br><span class="t-mark-rev t-since-cxx20">(since C++20)</span>
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <code><b>(</b></code> <span class="t-spar">expression-list</span> <code><b>)</b></code><br><code><b>(</b></code> <span class="t-spar">initializer-list</span> <code><b>)</b></code>
</td>
<td> (3)
</td>
<td> <span class="t-mark-rev t-until-cxx11">(until C++11)</span><br><span class="t-mark-rev t-since-cxx11">(since C++11)</span>
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <code><b>{}</b></code><br><code><b>{</b></code> <span class="t-spar">initializer-list</span> <code><b>}</b></code><br><code><b>{</b></code> <span class="t-spar">designated-initializer-list</span> <code><b>}</b></code>
</td>
<td> (4)
</td>
<td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span><br><span class="t-mark-rev t-since-cxx11">(since C++11)</span><br><span class="t-mark-rev t-since-cxx20">(since C++20)</span>
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr></tbody></table>
<div class="t-li1"><span class="t-li">1)</span> Copy-initialization syntax.</div>
<div class="t-li1"><span class="t-li">2)</span> <span class="t-rev-inl t-until-cxx11"><span>Aggregate initialization syntax.</span><span><span class="t-mark-rev t-until-cxx11">(until C++11)</span></span></span><span class="t-rev-inl t-since-cxx11"><span>List-initialization syntax.</span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span></div>
<div class="t-li1"><span class="t-li">3)</span> Direct-initialization syntax.</div>
<div class="t-li1"><span class="t-li">4)</span> List-initialization syntax.</div>
<table class="t-par-begin">


<tbody><tr class="t-par">
<td> <span class="t-spar">expression</span>
</td>
<td> -
</td>
<td> any expression (except unparenthesized <a href="operator_other.html#Built-in_comma_operator" title="cpp/language/operator other">comma expressions</a>)
</td></tr>
<tr class="t-par">
<td> <span class="t-spar">expression-list</span>
</td>
<td> -
</td>
<td> a comma-separated list of expressions (except unparenthesized comma expressions)
</td></tr>
<tr class="t-par">
<td> <span class="t-spar">initializer-list</span>
</td>
<td> -
</td>
<td> a comma-separated list of initializer clauses (see below)
</td></tr>
<tr class="t-par">
<td> <span class="t-spar">designated-initializer-list</span>
</td>
<td> -
</td>
<td> a comma-separated list of <a href="aggregate_initialization.html#Designated_initializers" title="cpp/language/aggregate initialization">designated initializer clauses</a>
</td></tr></tbody></table>
<p><br>
An <i>initializer clause</i> may be one of the following:
</p>
<table class="t-sdsc-begin">

<tbody><tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <span class="t-spar">expression</span>
</td>
<td> (1)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <code><b>{}</b></code>
</td>
<td> (2)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <code><b>{</b></code> <span class="t-spar">initializer-list</span> <code><b>}</b></code>
</td>
<td> (3)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <code><b>{</b></code> <span class="t-spar">designated-initializer-list</span> <code><b>}</b></code>
</td>
<td> (4)
</td>
<td> <span class="t-mark-rev t-since-cxx20">(since C++20)</span>
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr></tbody></table>
<p>Syntaxes <span class="t-v">(2-4)</span> are collectively called <i>brace-enclosed initializer list</i>.
</p>
<h4><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=2" title="Edit section: Initializer semantics">edit</a>]</span> <span class="mw-headline" id="Initializer_semantics">Initializer semantics</span></h4>
<p>If no initializer is specified for an object, the object is <a href="default_initialization.html" title="cpp/language/default initialization">default-initialized</a>. If no initializer is specified for a <a href="reference.html" title="cpp/language/reference">reference</a>, the program is ill-formed.
</p><p>If the initializer specified for an object is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="br0">(</span><span class="br0">)</span></span></span> (cannot appear in declarators due to the syntax restriction), the object is <a href="value_initialization.html" title="cpp/language/value initialization">value-initialized</a>. If the initializer specified for a reference is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="br0">(</span><span class="br0">)</span></span></span>, the program is ill-formed.
</p><p>The semantics of initializers are as follows:
</p>
<ul><li> If the entity being initialized is a reference, see <a href="reference_initialization.html" title="cpp/language/reference initialization">reference initialization</a>.
</li><li> Otherwise, the entity being initialized is an object. Given the type of the object as <code>T</code>:
</li></ul>
<dl><dd><ul><li> If the initializer is of syntax <span class="t-v">(1)</span>, the object is <a href="copy_initialization.html" title="cpp/language/copy initialization">copy-initialized</a>.
</li></ul>
</dd></dl>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-until-cxx11"><td>
<dl><dd><ul><li> If the initializer is of syntax <span class="t-v">(2)</span>:
</li></ul>
<dl><dd><ul><li> If <code>T</code> is an <a href="aggregate_initialization.html#Definitions" title="cpp/language/aggregate initialization">aggregate</a>, <a href="aggregate_initialization.html" title="cpp/language/aggregate initialization">aggregate initialization</a> applies.
</li><li> If <code>T</code> is a <a href="../named_req/ScalarType.html" title="cpp/named req/ScalarType">scalar type</a>, <span class="t-c"><span class="mw-geshi cpp source-cpp">T x <span class="sy1">=</span> <span class="br0">{</span> a <span class="br0">}</span><span class="sy4">;</span></span></span> is equivalent to <span class="t-c"><span class="mw-geshi cpp source-cpp">T x <span class="sy1">=</span> a<span class="sy4">;</span></span></span>.
</li><li> Otherwise, the program is ill-formed.
</li></ul>
</dd></dl>
</dd></dl>
</td>
<td><span class="t-mark-rev t-until-cxx11">(until C++11)</span></td></tr>
<tr class="t-rev t-since-cxx11"><td>
<dl><dd><ul><li> If the initializer is of syntax <span class="t-v">(2)</span> or <span class="t-v">(4)</span>, the object is <a href="list_initialization.html" title="cpp/language/list initialization">list-initialized</a>.
</li></ul>
</dd></dl>
</td>
<td><span class="t-mark-rev t-since-cxx11">(since C++11)</span></td></tr>
</tbody></table>
<dl><dd><ul><li> If the initializer is of syntax <span class="t-v">(3)</span>, the object is <a href="direct_initialization.html" title="cpp/language/direct initialization">direct-initialized</a>.
</li></ul>
</dd></dl>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="co2">#include &lt;string&gt;</span>
&nbsp;
<a href="../string/basic_string.html"><span class="kw1238">std::<span class="me2">string</span></span></a> s1<span class="sy4">;</span>           <span class="co1">// default-initialization</span>
<a href="../string/basic_string.html"><span class="kw1238">std::<span class="me2">string</span></span></a> s2<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>         <span class="co1">// NOT an initialization!</span>
                          <span class="co1">// actually declares a function “s2”</span>
                          <span class="co1">// with no parameter and returns std::string</span>
<a href="../string/basic_string.html"><span class="kw1238">std::<span class="me2">string</span></span></a> s3 <span class="sy1">=</span> <span class="st0">"hello"</span><span class="sy4">;</span> <span class="co1">// copy-initialization</span>
<a href="../string/basic_string.html"><span class="kw1238">std::<span class="me2">string</span></span></a> s4<span class="br0">(</span><span class="st0">"hello"</span><span class="br0">)</span><span class="sy4">;</span>  <span class="co1">// direct-initialization</span>
<a href="../string/basic_string.html"><span class="kw1238">std::<span class="me2">string</span></span></a> s5<span class="br0">{</span><span class="st0">'a'</span><span class="br0">}</span><span class="sy4">;</span>      <span class="co1">// list-initialization (since C++11)</span>
&nbsp;
<span class="kw4">char</span> a<span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span> <span class="sy1">=</span> <span class="br0">{</span><span class="st0">'a'</span>, <span class="st0">'b'</span><span class="br0">}</span><span class="sy4">;</span> <span class="co1">// aggregate initialization</span>
                        <span class="co1">// (part of list initialization since C++11)</span>
<span class="kw4">char</span><span class="sy3">&amp;</span> c <span class="sy1">=</span> a<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy4">;</span>         <span class="co1">// reference initialization</span></pre></div></div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=3" title="Edit section: Non-local variables">edit</a>]</span> <span class="mw-headline" id="Non-local_variables">Non-local variables</span></h3>
<p>All non-local variables with static <a href="storage_duration.html" title="cpp/language/storage duration">storage duration</a> are initialized as part of program startup, before the execution of the <a href="main_function.html" title="cpp/language/main function">main function</a> begins (unless deferred, see below). All non-local variables with thread-local storage duration are initialized as part of thread launch, sequenced-before the execution of the thread function begins. For both of these classes of variables, initialization occurs in two distinct stages:
</p>
<h4><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=4" title="Edit section: Static initialization">edit</a>]</span> <span class="mw-headline" id="Static_initialization">Static initialization</span></h4>
<p>There are two forms of static initialization:
</p>
<div class="t-li1"><span class="t-li">1)</span> If possible, <a href="constant_initialization.html" title="cpp/language/constant initialization">constant initialization</a> is applied.</div>
<div class="t-li1"><span class="t-li">2)</span> Otherwise, non-local static and thread-local variables are <a href="zero_initialization.html" title="cpp/language/zero initialization">zero-initialized</a>.</div>
<p>In practice:
</p>
<ul><li> Constant initialization is usually applied at compile time. Pre-calculated object representations are stored as part of the program image. If the compiler doesn't do that, it must still guarantee that the initialization happens before any dynamic initialization.
</li><li> Variables to be zero-initialized are placed in the <code>.bss</code> segment of the program image, which occupies no space on disk and is zeroed out by the OS when loading the program.
</li></ul>
<h4><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=5" title="Edit section: Dynamic initialization">edit</a>]</span> <span class="mw-headline" id="Dynamic_initialization">Dynamic initialization</span></h4>
<p>After all static initialization is completed, dynamic initialization of non-local variables occurs in the following situations:
</p>
<div class="t-li1"><span class="t-li">1)</span> <i>Unordered dynamic initialization</i>, which applies only to (static/thread-local) class template <a href="static.html" title="cpp/language/static">static data members</a> <span class="t-rev-inl t-since-cxx14"><span>and <a href="variable_template.html" title="cpp/language/variable template">variable templates</a></span><span><span class="t-mark-rev t-since-cxx14">(since C++14)</span></span></span> that aren't <a href="template_specialization.html" title="cpp/language/template specialization">explicitly specialized</a>. Initialization of such static variables is indeterminately sequenced with respect to all other dynamic initialization <span class="t-rev-inl t-since-cxx17"><span>except if the program starts a thread before a variable is initialized, in which case its initialization is unsequenced</span><span><span class="t-mark-rev t-since-cxx17">(since C++17)</span></span></span>. Initialization of such thread-local variables is unsequenced with respect to all other dynamic initialization.</div>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-since-cxx17"><td>
<div class="t-li1"><span class="t-li">2)</span> <i>Partially-ordered dynamic initialization</i>, which applies to all inline variables that are not an implicitly or explicitly instantiated specialization. If a partially-ordered V is defined before ordered or partially-ordered W in every translation unit, the initialization of V is sequenced before the initialization of W (or happens-before, if the program starts a thread).</div>
</td>
<td><span class="t-mark-rev t-since-cxx17">(since C++17)</span></td></tr>
</tbody></table>
<div class="t-li1"><span class="t-li">3)</span> <i>Ordered dynamic initialization</i>, which applies to all other non-local variables: within a single translation unit, initialization of these variables is always <a href="eval_order.html" title="cpp/language/eval order">sequenced</a> in exact order their definitions appear in the source code. Initialization of static variables in different translation units is indeterminately sequenced. Initialization of thread-local variables in different translation units is unsequenced.</div>
<p>If the initialization of a non-local variable with static or thread storage duration exits via an exception, <span class="t-lc"><a href="../error/terminate.html" title="cpp/error/terminate">std::terminate</a></span> is called.
</p>
<h4><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=6" title="Edit section: Early dynamic initialization">edit</a>]</span> <span class="mw-headline" id="Early_dynamic_initialization">Early dynamic initialization</span></h4>
<p>The compilers are allowed to initialize dynamically-initialized variables as part of static initialization (essentially, at compile time), if the following conditions are both true:
</p>
<div class="t-li1"><span class="t-li">1)</span> the dynamic version of the initialization does not change the value of any other object of namespace scope prior to its initialization</div>
<div class="t-li1"><span class="t-li">2)</span> the static version of the initialization produces the same value in the initialized variable as would be produced by the dynamic initialization if all variables not required to be initialized statically were initialized dynamically.</div>
<p>Because of the rule above, if initialization of some object <code>o1</code> refers to a namespace-scope object <code>o2</code>, which potentially requires dynamic initialization, but is defined later in the same translation unit, it is unspecified whether the value of <code>o2</code> used will be the value of the fully initialized <code>o2</code> (because the compiler promoted initialization of <code>o2</code> to compile time) or will be the value of <code>o2</code> merely zero-initialized. 
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">inline</span> <span class="kw4">double</span> fd<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw1">return</span> <span class="nu16">1.0</span><span class="sy4">;</span> <span class="br0">}</span>
&nbsp;
<span class="kw4">extern</span> <span class="kw4">double</span> d1<span class="sy4">;</span>
&nbsp;
<span class="kw4">double</span> d2 <span class="sy1">=</span> d1<span class="sy4">;</span>   <span class="co1">// unspecified:</span>
                  <span class="co1">// dynamically initialized to 0.0 if d1 is dynamically initialized, or</span>
                  <span class="co1">// dynamically initialized to 1.0 if d1 is statically initialized, or</span>
                  <span class="co1">// statically initialized to 0.0 (because that would be its value</span>
                  <span class="co1">// if both variables were dynamically initialized)</span>
&nbsp;
<span class="kw4">double</span> d1 <span class="sy1">=</span> fd<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// may be initialized statically or dynamically to 1.0</span></pre></div></div>
<h4><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=7" title="Edit section: Deferred dynamic initialization">edit</a>]</span> <span class="mw-headline" id="Deferred_dynamic_initialization">Deferred dynamic initialization</span></h4>
<p>It is implementation-defined whether dynamic initialization happens-before the first statement of the main function (for statics) or the initial function of the thread (for thread-locals), or deferred to happen after.
</p><p>If the initialization <span class="t-rev-inl t-since-cxx17"><span>of a non-inline variable</span><span><span class="t-mark-rev t-since-cxx17">(since C++17)</span></span></span> is deferred to happen after the first statement of main/thread function, it happens before the first <a href="definition.html#ODR-use" title="cpp/language/definition">ODR-use</a> of any variable with static/thread storage duration defined in the same translation unit as the variable to be initialized. If no variable or function is ODR-used from a given translation unit, the non-local variables defined in that translation unit may never be initialized (this models the behavior of an on-demand dynamic library). However, as long as anything from a translation unit is ODR-used, all non-local variables whose initialization or destruction has side effects will be initialized even if they are not used in the program.
</p>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-since-cxx17"><td>
<p>If the initialization of an inline variable is deferred, it happens before the first <a href="definition.html#ODR-use" title="cpp/language/definition">ODR-use</a> of that specific variable.
</p>
</td>
<td><span class="t-mark-rev t-since-cxx17">(since C++17)</span></td></tr>
</tbody></table>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="co1">// ============</span>
<span class="co1">// == File 1 ==</span>
&nbsp;
<span class="co2">#include "a.h"</span>
<span class="co2">#include "b.h"</span>
&nbsp;
B b<span class="sy4">;</span>
A<span class="sy4">::</span><span class="me2">A</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> b.<span class="me1">Use</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="br0">}</span>
&nbsp;
<span class="co1">// ============</span>
<span class="co1">// == File 2 ==</span>
&nbsp;
<span class="co2">#include "a.h"</span>
&nbsp;
A a<span class="sy4">;</span>
&nbsp;
<span class="co1">// ============</span>
<span class="co1">// == File 3 ==</span>
&nbsp;
<span class="co2">#include "a.h"</span>
<span class="co2">#include "b.h"</span>
&nbsp;
<span class="kw4">extern</span> A a<span class="sy4">;</span>
<span class="kw4">extern</span> B b<span class="sy4">;</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    a.<span class="me1">Use</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    b.<span class="me1">Use</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
&nbsp;
<span class="co1">// If a is initialized before main is entered, b may still be uninitialized</span>
<span class="co1">// at the point where A::A() uses it (because dynamic initialization is</span>
<span class="co1">// indeterminately sequenced across translation units)</span>
&nbsp;
<span class="co1">// If a is initialized at some point after the first statement of main (which odr-uses</span>
<span class="co1">// a function defined in File 1, forcing its dynamic initialization to run),</span>
<span class="co1">// then b will be initialized prior to its use in A::A</span></pre></div></div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=8" title="Edit section: Static local variables">edit</a>]</span> <span class="mw-headline" id="Static_local_variables">Static local variables</span></h3>
<p>For initialization of local (that is, block scope) static and thread-local variables, see <a href="storage_duration.html#Static_block_variables" title="cpp/language/storage duration">static block variables</a>.
</p><p>Initializer is not allowed in a block-scope declaration of a variable with <a href="storage_duration.html#Linkage" title="cpp/language/storage duration">external or internal linkage</a>. Such a declaration must appear with <span class="mw-geshi cpp source-cpp"><span class="kw4">extern</span></span> and cannot be a definition.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=9" title="Edit section: Class members">edit</a>]</span> <span class="mw-headline" id="Class_members">Class members</span></h3>
<p>Non-static data members can be initialized with <a href="constructor.html" title="cpp/language/initializer list" class="mw-redirect">member initializer list</a> or with a <a href="data_members.html#Member_initialization" title="cpp/language/data members">default member initializer</a>.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=10" title="Edit section: Notes">edit</a>]</span> <span class="mw-headline" id="Notes">Notes</span></h3>
<p>The order of destruction of non-local variables is described in <span class="t-lc"><a href="../utility/program/exit.html" title="cpp/utility/program/exit">std::exit</a></span>.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=11" title="Edit section: Defect reports">edit</a>]</span> <span class="mw-headline" id="Defect_reports">Defect reports</span></h3>
<p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.
</p>
<table class="dsctable" style="font-size:0.8em">
<tbody><tr>
<th>DR
</th>
<th>Applied to
</th>
<th>Behavior as published
</th>
<th>Correct behavior
</th></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/270.html">CWG 270</a>
</td>
<td>C++98
</td>
<td>the order of initializing static data members<br>of class templates was unspecified
</td>
<td>specified as unordered except for<br>explicit specializations and definitions
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/441.html">CWG 441</a>
</td>
<td>C++98
</td>
<td>non-local references with static storage duration were<br>not always initialized before dynamic initializations
</td>
<td>considered as static initialization, always<br>initialized before dynamic initializations
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1415.html">CWG 1415</a>
</td>
<td>C++98
</td>
<td>a block-scope <span class="mw-geshi cpp source-cpp"><span class="kw4">extern</span></span> variable<br>declaration could be a definition
</td>
<td>prohibited (no initializer<br>allowed in such declarations)
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/2599.html">CWG 2599</a>
</td>
<td>C++98
</td>
<td>it was unclear whether evaluating function<br>arguments in the initializer is part of initialization
</td>
<td>it is part of initialization
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;action=edit&amp;section=12" title="Edit section: See also">edit</a>]</span> <span class="mw-headline" id="See_also">See also</span></h3>
<ul><li> <a href="copy_elision.html" title="cpp/language/copy elision">copy elision</a>
</li><li> <a href="converting_constructor.html" title="cpp/language/converting constructor">converting constructor</a>
</li><li> <a href="copy_constructor.html" title="cpp/language/copy constructor">copy constructor</a>
</li><li> <a href="default_constructor.html" title="cpp/language/default constructor">default constructor</a>
</li><li> <a href="explicit.html" title="cpp/language/explicit"><code>explicit</code></a>
</li><li> <a href="move_constructor.html" title="cpp/language/move constructor">move constructor</a>
</li><li> <a href="new.html" title="cpp/language/new"><code>new</code></a>
</li></ul>
<table class="t-dsc-begin">

<tbody><tr class="t-dsc">
<td colspan="2"> <div class="t-dsc-see"><span><a href="https://en.cppreference.com/w/c/language/initialization" title="c/language/initialization">C documentation</a></span> for <span class=""><span>Initialization</span></span></div>
</td></tr>

</tbody></table>

<!-- 
NewPP limit report
Preprocessor visited node count: 4434/1000000
Preprocessor generated node count: 10221/1000000
Post‐expand include size: 150745/4194304 bytes
Template argument size: 24090/4194304 bytes
Highest expansion depth: 16/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mwiki1-mwiki_en_:pcache:idhash:9897-0!*!0!!en!*!* and timestamp 20250103104103 -->
</div>                    <!-- /bodycontent -->
                                        <!-- printfooter -->
                    <div class="printfooter">
                    Retrieved from "<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;oldid=178911">https://en.cppreference.com/mwiki/index.php?title=cpp/language/initialization&amp;oldid=178911</a>"                    </div>
                    <!-- /printfooter -->
                                                            <!-- catlinks -->
                    <div id="catlinks" class="catlinks catlinks-allhidden"></div>                    <!-- /catlinks -->
                                                            <div class="visualClear"></div>
                    <!-- debughtml -->
                                        <!-- /debughtml -->
                </div>
                <!-- /bodyContent -->
            </div>
        </div>
        <!-- /content -->
        <!-- footer -->
        
        <!-- /footer -->
        <script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=skins.cppreference2&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi","ext.gadget.ColiruCompiler","ext.gadget.StandardRevisions","ext.gadget.MathJax"], null, true);
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<!-- Served in 3.796 secs. -->
	




</body><!-- Cached 20250103104103 --><!-- Mirrored from en.cppreference.com/w/cpp/language/initialization by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:08:08 GMT --></html>