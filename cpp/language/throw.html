<!DOCTYPE html><html lang="en" dir="ltr" class="client-nojs"><!-- Mirrored from en.cppreference.com/w/cpp/language/throw by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:35:29 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->

<title>Throwing exceptions</title>
<meta charset="UTF-8">
<meta name="generator" content="MediaWiki 1.21.2">







<meta name="ResourceLoaderDynamicStyles" content="">

<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}#toc{display:none}.editsection{display:none}
/* cache key: mwiki1-mwiki_en_:resourceloader:filter:minify-css:7:472787eddcf4605d11de8c7ef047234f */</style>




<style type="text/css">/*<![CDATA[*/
.source-cpp {line-height: normal;}
.source-cpp li, .source-cpp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp
 * CSS class: source-cpp, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp.source-cpp .de1, .cpp.source-cpp .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.cpp.source-cpp  {font-family:monospace;}
.cpp.source-cpp .imp {font-weight: bold; color: red;}
.cpp.source-cpp li, .cpp.source-cpp .li1 {font-weight: normal; vertical-align:top;}
.cpp.source-cpp .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp.source-cpp .li2 {font-weight: bold; vertical-align:top;}
.cpp.source-cpp .kw1 {color: #0000dd;}
.cpp.source-cpp .kw2 {color: #0000ff;}
.cpp.source-cpp .kw3 {color: #0000dd;}
.cpp.source-cpp .kw4 {color: #0000ff;}
.cpp.source-cpp .co1 {color: #909090;}
.cpp.source-cpp .co2 {color: #339900;}
.cpp.source-cpp .coMULTI {color: #ff0000; font-style: italic;}
.cpp.source-cpp .es0 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es1 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es2 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es3 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es4 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es5 {color: #008000; font-weight: bold;}
.cpp.source-cpp .br0 {color: #008000;}
.cpp.source-cpp .sy0 {color: #008000;}
.cpp.source-cpp .sy1 {color: #000080;}
.cpp.source-cpp .sy2 {color: #000040;}
.cpp.source-cpp .sy3 {color: #000040;}
.cpp.source-cpp .sy4 {color: #008080;}
.cpp.source-cpp .st0 {color: #008000;}
.cpp.source-cpp .nu0 {color: #000080;}
.cpp.source-cpp .nu6 {color: #000080;}
.cpp.source-cpp .nu8 {color: #000080;}
.cpp.source-cpp .nu12 {color: #000080;}
.cpp.source-cpp .nu16 {color:#000080;}
.cpp.source-cpp .nu17 {color:#000080;}
.cpp.source-cpp .nu18 {color:#000080;}
.cpp.source-cpp .nu19 {color:#000080;}
.cpp.source-cpp .ln-xtra, .cpp.source-cpp li.ln-xtra, .cpp.source-cpp div.ln-xtra {background-color: #ffc;}
.cpp.source-cpp span.xtra { display:block; }

/*]]>*/
</style><style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/mwiki/skins/cppreference2/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_language_throw skin-cppreference2 action-view cpp-navbar">
        <!-- header -->
        
        <!-- /header -->
        <!-- content -->
<style type="text/css">
#carbonads {
  display: block;
  overflow: hidden;
  position: absolute;
  text-align: center;
  left: -170px;
  max-width: 150px;
  border-radius: 4px;
  border: solid 1px hsla(0, 0%, 0%, .1);
  background-color: hsl(0, 0%, 98%);
  font-size: 12px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu,
  Cantarell, "Helvetica Neue", Helvetica, Arial, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: inherit;
  text-decoration: none;
}

#carbonads a:hover {
  color: inherit;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  display: block;
  margin-bottom: 8px;
  max-width: 150px;
  line-height: 1;
}

.carbon-img img {
  display: block;
  margin: 0 auto;
  max-width: 150px !important;
  width: 150px;
  height: auto;
}

.carbon-text {
  display: block;
  padding: 0 1em 8px;
}

.carbon-poweredby {
  display: block;
  padding: 8px 12px;
  background: repeating-linear-gradient(-45deg, transparent, transparent 5px, hsla(0, 0%, 0%, .025) 5px, hsla(0, 0%, 0%, .025) 10px) hsla(203, 11%, 95%, .4);
  text-transform: uppercase;
  letter-spacing: .5px;
  font-weight: 600;
  font-size: 9px;
  line-height: 1;
}
html { font-variant-ligatures: no-common-ligatures; }
</style>
        <div id="cpp-content-base">
            <div id="content">
                <a id="top"></a>
                <div id="mw-js-message" style="display:none;"></div>
                                <!-- firstHeading -->
<script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYITK7M&amp;placement=cppreferencecom" id="_carbonads_js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HW0LXMYCY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8HW0LXMYCY');
</script>
                <h1 id="firstHeading" class="firstHeading">Throwing exceptions</h1>
                <!-- /firstHeading -->
                <!-- bodyContent -->
                <div id="bodyContent">
                                        <!-- tagline -->
                    
                    <!-- /tagline -->
                                        <!-- subtitle -->
                    
                    <!-- /subtitle -->
                                                            <!-- bodycontent -->
                    <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p>Throwing an <a href="exceptions.html" title="cpp/language/exceptions">exception</a> transfers control to a <a href="catch.html" title="cpp/language/catch">handler</a>.
</p><p>An exception can be thrown from <a href="#throw_expressions"><span class="mw-geshi cpp source-cpp"><span class="kw1">throw</span></span> expressions</a>, the following contexts may also throw exceptions:
</p>
<ul><li> <a href="../memory/new/operator_new.html" title="cpp/memory/new/operator new">allocation functions</a>
</li><li> <a href="dynamic_cast.html" title="cpp/language/dynamic cast"><code>dynamic_cast</code></a>
</li><li> <a href="typeid.html" title="cpp/language/typeid"><code>typeid</code></a>
</li><li> <a href="new.html" title="cpp/language/new"><span class="mw-geshi cpp source-cpp">new</span> expressions</a>
</li><li> <a href="../standard_library.html" title="cpp/standard library">standard library</a> functions
</li></ul>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Exception_object"><span class="tocnumber">1</span> <span class="toctext">Exception object</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Constructing_and_destructing_exception_objects"><span class="tocnumber">1.1</span> <span class="toctext">Constructing and destructing exception objects</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#throw_expressions"><span class="tocnumber">2</span> <span class="toctext"><span><span>throw</span></span> expressions</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Stack_unwinding"><span class="tocnumber">3</span> <span class="toctext">Stack unwinding</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Notes"><span class="tocnumber">4</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Keywords"><span class="tocnumber">5</span> <span class="toctext">Keywords</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Example"><span class="tocnumber">6</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Defect_reports"><span class="tocnumber">7</span> <span class="toctext">Defect reports</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#References"><span class="tocnumber">8</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#See_also"><span class="tocnumber">9</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;action=edit&amp;section=1" title="Edit section: Exception object">edit</a>]</span> <span class="mw-headline" id="Exception_object">Exception object</span></h3>
<p>Throwing an exception initializes an object with dynamic <a href="storage_duration.html" title="cpp/language/storage duration">storage duration</a>, called the <i>exception object</i>.
</p><p>If the type of the exception object would be one of the following types, the program is ill-formed:
</p>
<ul><li> an <a href="type.html#Incomplete_type" title="cpp/language/type">incomplete type</a>
</li><li> an <a href="abstract_class.html" title="cpp/language/abstract class">abstract class type</a>
</li><li> a pointer to an incomplete type other than (possibly cv-qualified) <span class="mw-geshi cpp source-cpp"><span class="kw4">void</span></span>
</li></ul>
<h4><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;action=edit&amp;section=2" title="Edit section: Constructing and destructing exception objects">edit</a>]</span> <span class="mw-headline" id="Constructing_and_destructing_exception_objects">Constructing and destructing exception objects</span></h4>
<p>Given the type of the exception object as <code>T</code>:
</p>
<ul><li> Let <span class="t-c"><span class="mw-geshi cpp source-cpp">obj</span></span> be an lvalue of type <span class="mw-geshi cpp source-cpp"><span class="kw4">const</span> T</span>, the <a href="copy_initialization.html" title="cpp/language/copy initialization">copy-initialization</a> of an object of type <code>T</code> from <span class="t-c"><span class="mw-geshi cpp source-cpp">obj</span></span> must be well-formed.
</li><li> If <code>T</code> is a class type:
</li></ul>
<dl><dd><ul><li> The selected <a href="constructor.html" title="cpp/language/constructor">constructor</a> is <a href="definition.html#ODR-use" title="cpp/language/definition">odr-used</a>.
</li><li> The <a href="destructor.html" title="cpp/language/destructor">destructor</a> of <code>T</code> is <a href="destructor.html#Potentially-invoked_constructor" title="cpp/language/destructor">potentially invoked</a>.
</li></ul>
</dd></dl>
<p>The memory for the exception object is allocated in an unspecified way. The only guarantee is that the storage will never be allocated by global <a href="../memory/new/operator_new.html" title="cpp/memory/new/operator new">allocation functions</a>.
</p><p>If a <a href="catch.html" title="cpp/language/catch">handler</a> exits by <a href="#throw_expressions">rethrowing</a>, control is passed to another handler for the same exception object. The exception object is not destructed in this case.
</p>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-until-cxx11"><td>
<p>When the last remaining active handler for the exception exits by any means other than rethrowing, the exception object is destroyed and the implementation may deallocate the memory for the temporary object in an unspecified way.
</p><p>The destruction occurs immediately after the destruction of the object declared in the “parameter list” in the handler.
</p>
</td>
<td><span class="t-mark-rev t-until-cxx11">(until C++11)</span></td></tr>
<tr class="t-rev t-since-cxx11"><td>
<p>The points of potential destruction for the exception object are:
</p>
<ul><li> When an active handler for the exception exits by any means other than rethrowing, immediately after the destruction of the object (if any) declared in the “parameter list” in the handler.
</li><li> When an object of type <span class="t-lc"><a href="../error/exception_ptr.html" title="cpp/error/exception ptr">std::exception_ptr</a></span> that refers to the exception object is destroyed, before the destructor of <span class="t-lc"><a href="../error/exception_ptr.html" title="cpp/error/exception ptr">std::exception_ptr</a></span> returns.
</li></ul>
<p>Among all points of potential destruction for the exception object, there is an unspecified last one where the exception object is destroyed. All other points <a href="multithread.html" title="cpp/language/multithread">happen before</a> that last one. The implementation may then deallocate the memory for the exception object in an unspecified way.
</p>
</td>
<td><span class="t-mark-rev t-since-cxx11">(since C++11)</span></td></tr>
</tbody></table>
<p><span id="throw_expressions"></span>
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;action=edit&amp;section=3" title="Edit section: throw expressions">edit</a>]</span> <span class="mw-headline" id="throw_expressions"><span class="mw-geshi cpp source-cpp"><span class="kw1">throw</span></span> expressions</span></h3>
<table class="t-sdsc-begin">

<tbody><tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <code><b>throw</b></code> <span class="t-spar">expression</span>
</td>
<td> (1)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <code><b>throw</b></code>
</td>
<td> (2)
</td>
<td class="t-sdsc-nopad">
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr></tbody></table>
<div class="t-li1"><span class="t-li">1)</span> Throws a new exception.</div>
<div class="t-li1"><span class="t-li">2)</span> Rethrows the exception currently being handled.</div>
<table class="t-par-begin">


<tbody><tr class="t-par">
<td> <span class="t-spar">expression</span>
</td>
<td> -
</td>
<td> the expression used to construct the exception object
</td></tr></tbody></table>
<p><br>
When a new exception is thrown, its exception object is determined as follows:
</p>
<ol><li> The <a href="implicit_conversion.html#Array-to-pointer_conversion" title="cpp/language/implicit conversion">array-to-pointer</a> and <a href="implicit_conversion.html#Function-to-pointer_conversion" title="cpp/language/implicit conversion">function-to-pointer</a> standard conversions are performed on <span class="t-spar">expression</span> ﻿.
</li><li> Let <span class="t-c"><span class="mw-geshi cpp source-cpp">ex</span></span> be the conversion result:
</li></ol>
<dl><dd><dl><dd><ul><li> The type of the exception object is determined by removing any top-level cv-qualifiers from the type of <span class="t-c"><span class="mw-geshi cpp source-cpp">ex</span></span>.
</li><li> The exception object is <a href="copy_initialization.html" title="cpp/language/copy initialization">copy-initialized</a> from <span class="t-c"><span class="mw-geshi cpp source-cpp">ex</span></span>.
</li></ul>
</dd></dl>
</dd></dl>
<p>If a program attempts to rethrow an exception when no exception is presently being handled, <span class="t-lc"><a href="../error/terminate.html" title="cpp/error/terminate">std::terminate</a></span> will be invoked. Otherwise, the exception is reactivated with the existing exception object (no new exception object is created), and the exception is no longer
considered to be caught.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">try</span>
<span class="br0">{</span>
    <span class="co1">// throwing a new exception 123</span>
    <span class="kw1">throw</span> <span class="nu0">123</span><span class="sy4">;</span>
<span class="br0">}</span>
<span class="kw1">catch</span> <span class="br0">(</span>...<span class="br0">)</span> <span class="co1">// catch all exceptions</span>
<span class="br0">{</span>
    <span class="co1">// respond (partially) to exception 123</span>
    <span class="kw1">throw</span><span class="sy4">;</span> <span class="co1">// pass the exception to some other handler</span>
<span class="br0">}</span></pre></div></div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;action=edit&amp;section=4" title="Edit section: Stack unwinding">edit</a>]</span> <span class="mw-headline" id="Stack_unwinding">Stack unwinding</span></h3>
<p>Once the exception object is constructed, the control flow works backwards (up the call stack) until it reaches the start of a <a href="try.html" title="cpp/language/try"><span class="mw-geshi cpp source-cpp"><span class="kw1">try</span></span> block</a>, at which point the parameters of all associated handlers are compared, in order of appearance, with the type of the exception object to find a <a href="catch.html#Matching_exceptions" title="cpp/language/catch">match</a>. If no match is found, the control flow continues to unwind the stack until the next <span class="mw-geshi cpp source-cpp"><span class="kw1">try</span></span> block, and so on. If a match is found, the control flow jumps to the matching handler.
</p><p>As the control flow moves up the call stack, destructors are invoked for all objects with <a href="storage_duration.html" title="cpp/language/storage duration">automatic storage duration</a> that are constructed, but not yet destroyed, since the corresponding <span class="mw-geshi cpp source-cpp"><span class="kw1">try</span></span> block was entered, in reverse order of completion of their constructors. If an exception is thrown from a destructor of a local variable or of a temporary used in a <a href="return.html" title="cpp/language/return">return</a> statement, the destructor for the object returned from the function is also invoked.
</p><p>If an exception is thrown from a constructor or (rare) from a destructor of an object (regardless of the object's storage duration), destructors are called for all fully-constructed non-static non-variant members and base classes, in reverse order of completion of their constructors. Variant members of <a href="union.html#Union-like_classes" title="cpp/language/union">union-like classes</a> are only destroyed in the case of unwinding from constructor, and if the active member changed between initialization and destruction, the behavior is undefined.
</p>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-since-cxx11"><td>
<p>If a delegating constructor exits with an exception after the non-delegating constructor successfully completed, the destructor for this object is called.
</p>
</td>
<td><span class="t-mark-rev t-since-cxx11">(since C++11)</span></td></tr>
</tbody></table>
<p>If the exception is thrown from a constructor that is invoked by a <a href="new.html" title="cpp/language/new">new-expression</a>, the matching <a href="../memory/new/operator_delete.html" title="cpp/memory/new/operator delete">deallocation function</a> is called, if available.
</p><p>This process is called <i>stack unwinding</i>.
</p><p>If any function that is called directly by the stack unwinding mechanism, after initialization of the exception object and before the start of the exception handler, exits with an exception, <span class="t-lc"><a href="../error/terminate.html" title="cpp/error/terminate">std::terminate</a></span> is called. Such functions include <a href="destructor.html" title="cpp/language/destructor">destructors</a> of objects with automatic storage duration whose scopes are exited, and the copy constructor of the exception object that is called (if not <a href="copy_elision.html" title="cpp/language/copy elision">elided</a>) to initialize catch-by-value arguments.
</p><p>If an exception is thrown and not caught, including exceptions that escape the initial function of <span class="t-lc"><a href="../thread/thread.html" title="cpp/thread/thread">std::thread</a></span>, the main function, and the constructor or destructor of any static or thread-local objects, then <span class="t-lc"><a href="../error/terminate.html" title="cpp/error/terminate">std::terminate</a></span> is called. It is implementation-defined whether any stack unwinding takes place for uncaught exceptions.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;action=edit&amp;section=5" title="Edit section: Notes">edit</a>]</span> <span class="mw-headline" id="Notes">Notes</span></h3>
<p>When rethrowing exceptions, the second form must be used to avoid object slicing in the (typical) case where exception objects use inheritance:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">try</span>
<span class="br0">{</span>
    <a href="../string/basic_string.html"><span class="kw1238">std::<span class="me2">string</span></span></a><span class="br0">(</span><span class="st0">"abc"</span><span class="br0">)</span>.<span class="me1">substr</span><span class="br0">(</span><span class="nu0">10</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// throws std::out_of_range</span>
<span class="br0">}</span>
<span class="kw1">catch</span> <span class="br0">(</span><span class="kw4">const</span> <a href="../error/exception.html"><span class="kw768">std::<span class="me2">exception</span></span></a><span class="sy3">&amp;</span> e<span class="br0">)</span>
<span class="br0">{</span>
    <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> e.<span class="me1">what</span><span class="br0">(</span><span class="br0">)</span> <span class="sy1">&lt;&lt;</span> <span class="st0">'<span class="es1">\n</span>'</span><span class="sy4">;</span>
<span class="co1">//  throw e; // copy-initializes a new exception object of type std::exception</span>
    <span class="kw1">throw</span><span class="sy4">;</span>   <span class="co1">// rethrows the exception object of type std::out_of_range</span>
<span class="br0">}</span></pre></div></div>
<p>The <span class="mw-geshi cpp source-cpp"><span class="kw1">throw</span></span>-expression is classified as <a href="value_category.html" title="cpp/language/value category">prvalue expression</a> of type <span class="mw-geshi cpp source-cpp"><span class="kw4">void</span></span>. Like any other expression, it may be a sub-expression in another expression, most commonly in the <a href="operator_other.html#Conditional_operator" title="cpp/language/operator other">conditional operator</a>:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">double</span> f<span class="br0">(</span><span class="kw4">double</span> d<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">return</span> d <span class="sy1">&gt;</span> <span class="nu19">1e7</span> <span class="sy4">?</span> <span class="kw1">throw</span> <a href="../error/overflow_error.html"><span class="kw776">std::<span class="me2">overflow_error</span></span></a><span class="br0">(</span><span class="st0">"too big"</span><span class="br0">)</span> <span class="sy4">:</span> d<span class="sy4">;</span>
<span class="br0">}</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">try</span>
    <span class="br0">{</span>
        <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> f<span class="br0">(</span><span class="nu19">1e10</span><span class="br0">)</span> <span class="sy1">&lt;&lt;</span> <span class="st0">'<span class="es1">\n</span>'</span><span class="sy4">;</span>
    <span class="br0">}</span>
    <span class="kw1">catch</span> <span class="br0">(</span><span class="kw4">const</span> <a href="../error/overflow_error.html"><span class="kw776">std::<span class="me2">overflow_error</span></span></a><span class="sy3">&amp;</span> e<span class="br0">)</span>
    <span class="br0">{</span>
        <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> e.<span class="me1">what</span><span class="br0">(</span><span class="br0">)</span> <span class="sy1">&lt;&lt;</span> <span class="st0">'<span class="es1">\n</span>'</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;action=edit&amp;section=6" title="Edit section: Keywords">edit</a>]</span> <span class="mw-headline" id="Keywords">Keywords</span></h3>
<p><a href="../keyword/throw.html" title="cpp/keyword/throw"><tt>throw</tt></a>
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;action=edit&amp;section=7" title="Edit section: Example">edit</a>]</span> <span class="mw-headline" id="Example">Example</span></h3>
<div class="t-example"><div class="t-example-live-link"><div class="coliru-btn coliru-btn-run-init">Run this code</div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="co2">#include &lt;iostream&gt;</span>
<span class="co2">#include &lt;stdexcept&gt;</span>
&nbsp;
<span class="kw1">struct</span> A
<span class="br0">{</span>
    <span class="kw4">int</span> n<span class="sy4">;</span>
&nbsp;
    A<span class="br0">(</span><span class="kw4">int</span> n <span class="sy1">=</span> <span class="nu0">0</span><span class="br0">)</span><span class="sy4">:</span> n<span class="br0">(</span>n<span class="br0">)</span> <span class="br0">{</span> <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"A("</span> <span class="sy1">&lt;&lt;</span> n <span class="sy1">&lt;&lt;</span> <span class="st0">") constructed successfully<span class="es1">\n</span>"</span><span class="sy4">;</span> <span class="br0">}</span>
    ~A<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"A("</span> <span class="sy1">&lt;&lt;</span> n <span class="sy1">&lt;&lt;</span> <span class="st0">") destroyed<span class="es1">\n</span>"</span><span class="sy4">;</span> <span class="br0">}</span>
<span class="br0">}</span><span class="sy4">;</span>
&nbsp;
<span class="kw4">int</span> foo<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">throw</span> <a href="../error/runtime_error.html"><span class="kw774">std::<span class="me2">runtime_error</span></span></a><span class="br0">(</span><span class="st0">"error"</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
&nbsp;
<span class="kw1">struct</span> B
<span class="br0">{</span>
    A a1, a2, a3<span class="sy4">;</span>
&nbsp;
    B<span class="br0">(</span><span class="br0">)</span> <span class="kw1">try</span> <span class="sy4">:</span> a1<span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>, a2<span class="br0">(</span>foo<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>, a3<span class="br0">(</span><span class="nu0">3</span><span class="br0">)</span>
    <span class="br0">{</span>
        <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"B constructed successfully<span class="es1">\n</span>"</span><span class="sy4">;</span>
    <span class="br0">}</span>
    <span class="kw1">catch</span><span class="br0">(</span>...<span class="br0">)</span>
    <span class="br0">{</span>
        <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"B::B() exiting with exception<span class="es1">\n</span>"</span><span class="sy4">;</span>
    <span class="br0">}</span>
&nbsp;
    ~B<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"B destroyed<span class="es1">\n</span>"</span><span class="sy4">;</span> <span class="br0">}</span>
<span class="br0">}</span><span class="sy4">;</span>
&nbsp;
<span class="kw1">struct</span> C <span class="sy4">:</span> A, B
<span class="br0">{</span>
    C<span class="br0">(</span><span class="br0">)</span> <span class="kw1">try</span>
    <span class="br0">{</span>
        <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"C::C() completed successfully<span class="es1">\n</span>"</span><span class="sy4">;</span>
    <span class="br0">}</span>
    <span class="kw1">catch</span><span class="br0">(</span>...<span class="br0">)</span>
    <span class="br0">{</span>
        <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"C::C() exiting with exception<span class="es1">\n</span>"</span><span class="sy4">;</span>
    <span class="br0">}</span>
&nbsp;
    ~C<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"C destroyed<span class="es1">\n</span>"</span><span class="sy4">;</span> <span class="br0">}</span>
<span class="br0">}</span><span class="sy4">;</span>
&nbsp;
<span class="kw4">int</span> main <span class="br0">(</span><span class="br0">)</span> <span class="kw1">try</span>
<span class="br0">{</span>
    <span class="co1">// creates the A base subobject</span>
    <span class="co1">// creates the a1 member of B</span>
    <span class="co1">// fails to create the a2 member of B</span>
    <span class="co1">// unwinding destroys the a1 member of B</span>
    <span class="co1">// unwinding destroys the A base subobject</span>
    C c<span class="sy4">;</span>
<span class="br0">}</span>
<span class="kw1">catch</span> <span class="br0">(</span><span class="kw4">const</span> <a href="../error/exception.html"><span class="kw768">std::<span class="me2">exception</span></span></a><span class="sy3">&amp;</span> e<span class="br0">)</span>
<span class="br0">{</span>
    <a href="../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"main() failed to create C with: "</span> <span class="sy1">&lt;&lt;</span> e.<span class="me1">what</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p>Output:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="text source-text"><pre class="de1">A(0) constructed successfully
A(1) constructed successfully
A(1) destroyed
B::B() exiting with exception
A(0) destroyed
C::C() exiting with exception
main() failed to create C with: error</pre></div></div> 
</div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;action=edit&amp;section=8" title="Edit section: Defect reports">edit</a>]</span> <span class="mw-headline" id="Defect_reports">Defect reports</span></h3>
<p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.
</p>
<table class="dsctable" style="font-size:0.8em">
<tbody><tr>
<th>DR
</th>
<th>Applied to
</th>
<th>Behavior as published
</th>
<th>Correct behavior
</th></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/499.html">CWG 499</a>
</td>
<td>C++98
</td>
<td>an array with unknown bound could not be thrown because<br>its type is incomplete, but an exception object can be<br>created from the decayed pointer without any problem
</td>
<td>apply the type completion<br>requirement to the<br>exception object instead
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/668.html">CWG 668</a>
</td>
<td>C++98
</td>
<td><span class="t-lc"><a href="../error/terminate.html" title="cpp/error/terminate">std::terminate</a></span> was not called if an exception is thrown<br>from the destructor of a local non-automatic object
</td>
<td>call <span class="t-lc"><a href="../error/terminate.html" title="cpp/error/terminate">std::terminate</a></span><br>in this case
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1863.html">CWG 1863</a>
</td>
<td>C++11
</td>
<td>copy constructor was not required for move-only<br>exception objects when thrown, but copying allowed later
</td>
<td>copy constructor required
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1866.html">CWG 1866</a>
</td>
<td>C++98
</td>
<td>variant members were leaked on stack unwinding from constructor
</td>
<td>variant members destroyed
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/2176.html">CWG 2176</a>
</td>
<td>C++98
</td>
<td>throw from a local variable destructor<br>could skip return value destructor
</td>
<td>function return value<br>added to unwinding
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/2699.html">CWG 2699</a>
</td>
<td>C++98
</td>
<td><span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw1">throw</span> <span class="st0">"EX"</span></span></span> would actually throw <span class="mw-geshi cpp source-cpp"><span class="kw4">char</span><span class="sy2">*</span></span> rather than <span class="mw-geshi cpp source-cpp"><span class="kw4">const</span> <span class="kw4">char</span><span class="sy2">*</span></span>
</td>
<td>corrected
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/2711.html">CWG 2711</a>
</td>
<td>C++98
</td>
<td>the source of the copy-initialization of<br>the exception object was not specified
</td>
<td>copy-initialized<br>from <span class="t-spar">expression</span>
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/2775.html">CWG 2775</a>
</td>
<td>C++98
</td>
<td>the exception object copy-initialization requirement was unclear
</td>
<td>made clear
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/2854.html">CWG 2854</a>
</td>
<td>C++98
</td>
<td>the storage duration of exception objects was unclear
</td>
<td>made clear
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://wg21.link/P1825R0">P1825R0</a>
</td>
<td>C++11
</td>
<td>implicit move from parameters was forbidden in <code>throw</code>
</td>
<td>allowed
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;action=edit&amp;section=9" title="Edit section: References">edit</a>]</span> <span class="mw-headline" id="References">References</span></h3>
<div class="t-ref-std-c++23">
<ul><li> C++23 standard (ISO/IEC 14882:2024): 
</li></ul>
<dl><dd><ul><li> 7.6.18 Throwing an exception [expr.throw] 
</li></ul>
</dd></dl>
<dl><dd><ul><li> 14.2 Throwing an exception [except.throw] 
</li></ul>
</dd></dl>
</div>
<div class="t-ref-std-c++20">
<ul><li> C++20 standard (ISO/IEC 14882:2020): 
</li></ul>
<dl><dd><ul><li> 7.6.18 Throwing an exception [expr.throw] 
</li></ul>
</dd></dl>
<dl><dd><ul><li> 14.2 Throwing an exception [except.throw] 
</li></ul>
</dd></dl>
</div>
<div class="t-ref-std-c++17">
<ul><li> C++17 standard (ISO/IEC 14882:2017): 
</li></ul>
<dl><dd><ul><li> 8.17 Throwing an exception [expr.throw] 
</li></ul>
</dd></dl>
<dl><dd><ul><li> 18.1 Throwing an exception [except.throw] 
</li></ul>
</dd></dl>
</div>
<div class="t-ref-std-c++14">
<ul><li> C++14 standard (ISO/IEC 14882:2014): 
</li></ul>
<dl><dd><ul><li> 15.1 Throwing an exception [except.throw] 
</li></ul>
</dd></dl>
</div>
<div class="t-ref-std-c++11">
<ul><li> C++11 standard (ISO/IEC 14882:2011): 
</li></ul>
<dl><dd><ul><li> 15.1 Throwing an exception [except.throw] 
</li></ul>
</dd></dl>
</div>
<div class="t-ref-std-c++03">
<ul><li> C++03 standard (ISO/IEC 14882:2003): 
</li></ul>
<dl><dd><ul><li> 15.1 Throwing an exception [except.throw] 
</li></ul>
</dd></dl>
</div>
<div class="t-ref-std-c++98">
<ul><li> C++98 standard (ISO/IEC 14882:1998): 
</li></ul>
<dl><dd><ul><li> 15.1 Throwing an exception [except.throw] 
</li></ul>
</dd></dl>
</div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;action=edit&amp;section=10" title="Edit section: See also">edit</a>]</span> <span class="mw-headline" id="See_also">See also</span></h3>
<ul><li> <a href="copy_elision.html" title="cpp/language/copy elision">copy elision</a>
</li><li> <a href="try.html" title="cpp/language/try"><span class="mw-geshi cpp source-cpp"><span class="kw1">try</span></span> block</a>
</li><li> <a href="catch.html" title="cpp/language/catch">handler</a>
</li><li> <a href="noexcept_spec.html" title="cpp/language/noexcept spec"><span class="mw-geshi cpp source-cpp"><span class="kw1">noexcept</span></span> specifier</a>
</li><li> <a href="../error.html#Exception_handling" title="cpp/error">Exception handling</a>
</li></ul>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-until-cxx17"><td>
<ul><li> <a href="except_spec.html" title="cpp/language/except spec">dynamic exception specifications</a>
</li></ul>
</td>
<td><span class="t-mark-rev t-until-cxx17">(until C++17)</span></td></tr>
</tbody></table>

<!-- 
NewPP limit report
Preprocessor visited node count: 4989/1000000
Preprocessor generated node count: 11416/1000000
Post‐expand include size: 179836/4194304 bytes
Template argument size: 26999/4194304 bytes
Highest expansion depth: 16/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mwiki1-mwiki_en_:pcache:idhash:714-0!*!0!!en!*!* and timestamp 20250108212512 -->
</div>                    <!-- /bodycontent -->
                                        <!-- printfooter -->
                    <div class="printfooter">
                    Retrieved from "<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;oldid=176676">https://en.cppreference.com/mwiki/index.php?title=cpp/language/throw&amp;oldid=176676</a>"                    </div>
                    <!-- /printfooter -->
                                                            <!-- catlinks -->
                    <div id="catlinks" class="catlinks catlinks-allhidden"></div>                    <!-- /catlinks -->
                                                            <div class="visualClear"></div>
                    <!-- debughtml -->
                                        <!-- /debughtml -->
                </div>
                <!-- /bodyContent -->
            </div>
        </div>
        <!-- /content -->
        <!-- footer -->
        
        <!-- /footer -->
        <script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=skins.cppreference2&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi","ext.gadget.ColiruCompiler","ext.gadget.StandardRevisions","ext.gadget.MathJax"], null, true);
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<!-- Served in 3.565 secs. -->
	




</body><!-- Cached 20250108212512 --><!-- Mirrored from en.cppreference.com/w/cpp/language/throw by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:35:29 GMT --></html>