<!DOCTYPE html><html lang="en" dir="ltr" class="client-nojs"><!-- Mirrored from en.cppreference.com/w/cpp/language/except_spec by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:35:29 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->

<title>Dynamic exception specification (until C++17)</title>
<meta charset="UTF-8">
<meta name="generator" content="MediaWiki 1.21.2">







<meta name="ResourceLoaderDynamicStyles" content="">

<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}#toc{display:none}.editsection{display:none}
/* cache key: mwiki1-mwiki_en_:resourceloader:filter:minify-css:7:472787eddcf4605d11de8c7ef047234f */</style>




<style type="text/css">/*<![CDATA[*/
.source-cpp {line-height: normal;}
.source-cpp li, .source-cpp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp
 * CSS class: source-cpp, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp.source-cpp .de1, .cpp.source-cpp .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.cpp.source-cpp  {font-family:monospace;}
.cpp.source-cpp .imp {font-weight: bold; color: red;}
.cpp.source-cpp li, .cpp.source-cpp .li1 {font-weight: normal; vertical-align:top;}
.cpp.source-cpp .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp.source-cpp .li2 {font-weight: bold; vertical-align:top;}
.cpp.source-cpp .kw1 {color: #0000dd;}
.cpp.source-cpp .kw2 {color: #0000ff;}
.cpp.source-cpp .kw3 {color: #0000dd;}
.cpp.source-cpp .kw4 {color: #0000ff;}
.cpp.source-cpp .co1 {color: #909090;}
.cpp.source-cpp .co2 {color: #339900;}
.cpp.source-cpp .coMULTI {color: #ff0000; font-style: italic;}
.cpp.source-cpp .es0 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es1 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es2 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es3 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es4 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es5 {color: #008000; font-weight: bold;}
.cpp.source-cpp .br0 {color: #008000;}
.cpp.source-cpp .sy0 {color: #008000;}
.cpp.source-cpp .sy1 {color: #000080;}
.cpp.source-cpp .sy2 {color: #000040;}
.cpp.source-cpp .sy3 {color: #000040;}
.cpp.source-cpp .sy4 {color: #008080;}
.cpp.source-cpp .st0 {color: #008000;}
.cpp.source-cpp .nu0 {color: #000080;}
.cpp.source-cpp .nu6 {color: #000080;}
.cpp.source-cpp .nu8 {color: #000080;}
.cpp.source-cpp .nu12 {color: #000080;}
.cpp.source-cpp .nu16 {color:#000080;}
.cpp.source-cpp .nu17 {color:#000080;}
.cpp.source-cpp .nu18 {color:#000080;}
.cpp.source-cpp .nu19 {color:#000080;}
.cpp.source-cpp .ln-xtra, .cpp.source-cpp li.ln-xtra, .cpp.source-cpp div.ln-xtra {background-color: #ffc;}
.cpp.source-cpp span.xtra { display:block; }

/*]]>*/
</style><style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/mwiki/skins/cppreference2/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_language_except_spec skin-cppreference2 action-view cpp-navbar">
        <!-- header -->
        
        <!-- /header -->
        <!-- content -->
<style type="text/css">
#carbonads {
  display: block;
  overflow: hidden;
  position: absolute;
  text-align: center;
  left: -170px;
  max-width: 150px;
  border-radius: 4px;
  border: solid 1px hsla(0, 0%, 0%, .1);
  background-color: hsl(0, 0%, 98%);
  font-size: 12px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu,
  Cantarell, "Helvetica Neue", Helvetica, Arial, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: inherit;
  text-decoration: none;
}

#carbonads a:hover {
  color: inherit;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  display: block;
  margin-bottom: 8px;
  max-width: 150px;
  line-height: 1;
}

.carbon-img img {
  display: block;
  margin: 0 auto;
  max-width: 150px !important;
  width: 150px;
  height: auto;
}

.carbon-text {
  display: block;
  padding: 0 1em 8px;
}

.carbon-poweredby {
  display: block;
  padding: 8px 12px;
  background: repeating-linear-gradient(-45deg, transparent, transparent 5px, hsla(0, 0%, 0%, .025) 5px, hsla(0, 0%, 0%, .025) 10px) hsla(203, 11%, 95%, .4);
  text-transform: uppercase;
  letter-spacing: .5px;
  font-weight: 600;
  font-size: 9px;
  line-height: 1;
}
html { font-variant-ligatures: no-common-ligatures; }
</style>
        <div id="cpp-content-base">
            <div id="content">
                <a id="top"></a>
                <div id="mw-js-message" style="display:none;"></div>
                                <!-- firstHeading -->
<script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYITK7M&amp;placement=cppreferencecom" id="_carbonads_js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HW0LXMYCY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8HW0LXMYCY');
</script>
                <h1 id="firstHeading" class="firstHeading">Dynamic exception specification <span class="t-mark-rev t-until-cxx17">(until C++17)</span></h1>
                <!-- /firstHeading -->
                <!-- bodyContent -->
                <div id="bodyContent">
                                        <!-- tagline -->
                    
                    <!-- /tagline -->
                                        <!-- subtitle -->
                    
                    <!-- /subtitle -->
                                                            <!-- bodycontent -->
                    <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<p>Lists the exceptions that a function might directly or indirectly throw.
</p>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Syntax"><span class="tocnumber">1</span> <span class="toctext">Syntax</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Explanation"><span class="tocnumber">2</span> <span class="toctext">Explanation</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Instantiation"><span class="tocnumber">2.1</span> <span class="toctext">Instantiation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Potential_exceptions"><span class="tocnumber">3</span> <span class="toctext">Potential exceptions</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Notes"><span class="tocnumber">4</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Keywords"><span class="tocnumber">5</span> <span class="toctext">Keywords</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Example"><span class="tocnumber">6</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Defect_reports"><span class="tocnumber">7</span> <span class="toctext">Defect reports</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#See_also"><span class="tocnumber">8</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;action=edit&amp;section=1" title="Edit section: Syntax">edit</a>]</span> <span class="mw-headline" id="Syntax">Syntax</span></h3>
<table class="t-sdsc-begin">

<tbody><tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr>
<tr class="t-sdsc">
<td> <code><b>throw(</b></code><span class="t-spar">type-id-list</span> ﻿<span class="t-mark">(optional)</span><code><b>)</b></code>
</td>
<td> (1)
</td>
<td> <span class="t-mark-rev t-deprecated-cxx11">(deprecated in C++11)</span><br><span class="t-mark-rev t-until-cxx17">(removed in C++17)</span>
</td></tr>



<tr>
<td colspan="10" class="t-sdsc-sep">
</td></tr></tbody></table>
<div class="t-li1"><span class="t-li">1)</span> Explicit dynamic exception specification.</div>
<table class="t-par-begin">


<tbody><tr class="t-par">
<td> <span class="t-spar">type-id-list</span>
</td>
<td> -
</td>
<td> comma-separated list of <a href="type.html#Type_naming" title="cpp/language/type">type-ids</a><span class="t-rev-inl t-since-cxx11"><span>, a type-id representing a <a href="pack.html#Pack_expansion" title="cpp/language/parameter pack" class="mw-redirect">pack expansion</a> is followed by an ellipsis (...)</span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>
</td></tr></tbody></table>
<p>An explicit dynamic exception specification shall appear only on a function declarator for a function type, pointer to function type, reference to function type, or pointer to member function type that is the top-level type of a declaration or definition, or on such a type appearing as a parameter or return type in a function declarator.
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">void</span> f<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span><span class="sy4">;</span>            <span class="co1">// OK: function declaration</span>
<span class="kw4">void</span> <span class="br0">(</span><span class="sy2">*</span>pf<span class="br0">)</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span> <span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span><span class="sy4">;</span>       <span class="co1">// OK: pointer to function declaration</span>
<span class="kw4">void</span> g<span class="br0">(</span><span class="kw4">void</span> pfa<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>  <span class="co1">// OK: pointer to function parameter declaration</span>
<span class="kw1">typedef</span> <span class="kw4">int</span> <span class="br0">(</span><span class="sy2">*</span>pf<span class="br0">)</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// Error: typedef declaration</span></pre></div></div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;action=edit&amp;section=2" title="Edit section: Explanation">edit</a>]</span> <span class="mw-headline" id="Explanation">Explanation</span></h3>
<p>If a function is declared with type <code>T</code> listed in its dynamic exception specification, the function may throw exceptions of that type or a type derived from it.
</p><p><a href="type%23Incomplete_type.html" title="cpp/language/incomplete type" class="mw-redirect">Incomplete types</a>, pointers or references to incomplete types other than cv <code>void*</code><span class="t-rev-inl t-since-cxx11"><span>, and rvalue reference types</span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span> are not allowed in the exception specification. Array and function types, if used, are adjusted to corresponding pointer types, top level cv-qualifications are also dropped. <span class="t-rev-inl t-since-cxx11"><span><a href="pack.html" title="cpp/language/parameter pack" class="mw-redirect">parameter packs</a> are allowed</span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>.
</p><p>A dynamic exception specification whose set of adjusted types is empty <span class="t-rev-inl t-since-cxx11"><span>(after any packs are expanded)</span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span> is non-throwing. A function with a non-throwing dynamic exception specification does not allow any exceptions.
</p><p>A dynamic exception specification is not considered part of a function’s type.
</p><p>If the function throws an exception of the type not listed in its exception specification, the function <span class="t-lc"><a href="../error/unexpected.html" title="cpp/error/unexpected">std::unexpected</a></span> is called. The default function calls <span class="t-lc"><a href="../error/terminate.html" title="cpp/error/terminate">std::terminate</a></span>, but it may be replaced by a user-provided function (via <span class="t-lc"><a href="../error/set_unexpected.html" title="cpp/error/set unexpected">std::set_unexpected</a></span>) which may call <span class="t-lc"><a href="../error/terminate.html" title="cpp/error/terminate">std::terminate</a></span> or throw an exception. If the exception thrown from <span class="t-lc"><a href="../error/unexpected.html" title="cpp/error/unexpected">std::unexpected</a></span> is accepted by the exception specification, stack unwinding continues as usual. If it isn't, but <span class="t-lc"><a href="../error/bad_exception.html" title="cpp/error/bad exception">std::bad_exception</a></span> is allowed by the exception specification, <span class="t-lc"><a href="../error/bad_exception.html" title="cpp/error/bad exception">std::bad_exception</a></span> is thrown. Otherwise, <span class="t-lc"><a href="../error/terminate.html" title="cpp/error/terminate">std::terminate</a></span> is called.
</p>
<h4><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;action=edit&amp;section=3" title="Edit section: Instantiation">edit</a>]</span> <span class="mw-headline" id="Instantiation">Instantiation</span></h4>
<p>The dynamic exception specification of a function template specialization is not instantiated along with the function declaration; it is instantiated only when <i>needed</i> (as defined below).
</p><p>The dynamic exception specification of an implicitly-declared special member function is also evaluated only when needed (in particular, implicit declaration of a member function of a derived class does not require the exception-specification of a base member function to be instantiated).
</p><p>When the dynamic exception specification of a function template specialization is <i>needed</i>, but has not yet been instantiated, the dependent names are looked up and any templates used in the <span class="t-spar">expression</span> are instantiated as if for the declaration of the specialization.
</p><p>A dynamic exception specification of a function is considered to be <i>needed</i> in the following contexts:
</p>
<ul><li> in an expression, where the function is selected by overload resolution
</li><li> the function is <a href="definition.html#ODR-use" title="cpp/language/definition">odr-used</a>
</li><li> the function would be odr-used but appears in an unevaluated operand
</li></ul>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">class</span> T<span class="sy1">&gt;</span>
T f<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span><a href="../container/array.html"><span class="kw1276">std::<span class="me2">array</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span>, sizeof<span class="br0">(</span>T<span class="br0">)</span><span class="sy1">&gt;</span><span class="br0">)</span><span class="sy4">;</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    decltype<span class="br0">(</span>f<span class="sy1">&lt;</span><span class="kw4">void</span><span class="sy1">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="sy2">*</span>p<span class="sy4">;</span> <span class="co1">// f unevaluated, but exception specification is needed</span>
                            <span class="co1">// error because instantiation of the exception specification</span>
                            <span class="co1">// calculates sizeof(void)</span>
<span class="br0">}</span></pre></div></div>
<ul><li> the specification is needed to compare to another function declaration (e.g. on a virtual function overrider or on an explicit specialization of a function template)
</li><li> in a function definition
</li><li> the specification is needed because a defaulted special member function needs to check it in order to decide its own exception specification (this takes place only when the specification of the defaulted special member function is, itself, needed).
</li></ul>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;action=edit&amp;section=4" title="Edit section: Potential exceptions">edit</a>]</span> <span class="mw-headline" id="Potential_exceptions">Potential exceptions</span></h3>
<p>Each function <code>f</code>, pointer to function <code>pf</code>, and pointer to member function <code>pmf</code> has a <i>set of potential exceptions</i>, which consists of types that might be thrown. Set of all types indicates that any exception may be thrown. This set is defined as follows:
</p>
<div class="t-li1"><span class="t-li">1)</span> If the declaration of <code>f</code>, <code>pf</code>, or <code>pmf</code> uses a dynamic exception specification<span class="t-rev-inl t-until-cxx11"><span> that does not allow all exceptions</span><span><span class="t-mark-rev t-until-cxx11">(until C++11)</span></span></span>, the set consists of the types listed in that specification.</div>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-since-cxx11"><td>
<div class="t-li1"><span class="t-li">2)</span> Otherwise, if the declaration of <code>f</code>, <code>pf</code>, or <code>pmf</code> uses <a href="noexcept.html" title="cpp/language/noexcept"><code>noexcept(true)</code></a>, the set is empty.
</div></td>
<td><span class="t-mark-rev t-since-cxx11">(since C++11)</span></td></tr>
</tbody></table>
<div class="t-li1"><span class="t-li">3)</span> Otherwise, the set is the set of all types.</div>
<p>Note: for implicitly-declared special member functions (constructors, assignment operators, and destructors)<span class="t-rev-inl t-since-cxx11"><span> and for the inheriting constructors</span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>, the set of potential exceptions is a combination of the sets of the potential exceptions of everything they would call: constructors/assignment operators/destructors of non-variant non-static data members, direct bases, and, where appropriate, virtual bases (including default argument expressions, as always).
</p><p>Each expression <code>e</code> has a <i>set of potential exceptions</i>. The set is empty if <code>e</code> is a <a href="constant_expression.html" title="cpp/language/constant expression">core constant expression</a>, otherwise, it is the union of the sets of potential exceptions of all immediate subexpressions of <code>e</code> (including <a href="default_arguments.html" title="cpp/language/default arguments">default argument expressions</a>), combined with another set that depends on the form of <code>e</code>, as follows:
</p>
<div class="t-li1"><span class="t-li">1)</span> If <code>e</code> is a function call expression, let <code>g</code> denote the function, function pointer, or pointer to member function that is that is called, then
<dl><dd><ul><li> if the declaration of <code>g</code> uses a dynamic exception specification, the set of potential exceptions of <code>g</code> is added to the set;
</li></ul>
</dd></dl>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-since-cxx11"><td>
<dl><dd><ul><li> if the declaration of <code>g</code> uses <a href="noexcept.html" title="cpp/language/noexcept"><code>noexcept(true)</code></a>, the set is empty;
</li></ul>
</dd></dl>
</td>
<td><span class="t-mark-rev t-since-cxx11">(since C++11)</span></td></tr>
</tbody></table>
<dl><dd><ul><li> otherwise, the set is the set of all types.</li></ul></dd></dl></div>


<div class="t-li1"><span class="t-li">2)</span> If <code>e</code> calls a function implicitly (it's an operator expression and the operator is overloaded, it is a <a href="new.html" title="cpp/language/new">new-expression</a> and the allocation function is overloaded, or it is a full expression and the destructor of a temporary is called), then the set is the set of that function.</div>
<div class="t-li1"><span class="t-li">3)</span> If <code>e</code> is a <a href="throw.html" title="cpp/language/throw">throw-expression</a>, the set is the exception that would be initialized by its operand, or the set of all types for the re-throwing throw-expression (with no operand).</div>
<div class="t-li1"><span class="t-li">4)</span> If <code>e</code> is a <a href="dynamic_cast.html" title="cpp/language/dynamic cast"><code>dynamic_cast</code></a> to a reference to a polymorphic type, the set consists of <span class="t-lc"><a href="../types/bad_cast.html" title="cpp/types/bad cast">std::bad_cast</a></span>.</div>
<div class="t-li1"><span class="t-li">5)</span> If <code>e</code> is a <a href="typeid.html" title="cpp/language/typeid"><code>typeid</code></a> applied to a dereferenced pointer to a polymorphic type, the set consists of <span class="t-lc"><a href="../types/bad_typeid.html" title="cpp/types/bad typeid">std::bad_typeid</a></span>.</div>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-since-cxx11"><td>
<div class="t-li1"><span class="t-li">6)</span> If <code>e</code> is a <a href="new.html" title="cpp/language/new">new-expression</a> with a non-constant array size, and the selected allocation function has a non-empty set of potential exceptions, the set consists of <span class="t-lc"><a href="../memory/new/bad_array_new_length.html" title="cpp/memory/new/bad array new length">std::bad_array_new_length</a></span>.
</div></td>
<td><span class="t-mark-rev t-since-cxx11">(since C++11)</span></td></tr>
</tbody></table>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">void</span> f<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// f()'s set is "int"</span>
<span class="kw4">void</span> g<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>            <span class="co1">// g()'s set is the set of all types</span>
&nbsp;
<span class="kw1">struct</span> A <span class="br0">{</span> A<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="br0">}</span><span class="sy4">;</span>                  <span class="co1">// "new A"'s set is the set of all types</span>
<span class="kw1">struct</span> B <span class="br0">{</span> B<span class="br0">(</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span> <span class="br0">}</span><span class="sy4">;</span>         <span class="co1">// "B()"'s set is empty</span>
<span class="kw1">struct</span> D<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> D<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span> <span class="br0">(</span><span class="kw4">double</span><span class="br0">)</span><span class="sy4">;</span> <span class="br0">}</span><span class="sy4">;</span> <span class="co1">// new D's set is the set of all types</span></pre></div></div>
<p>All implicitly-declared member functions <span class="t-rev-inl t-since-cxx11"><span>and inheriting constructors </span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>have exception specifications, selected as follows:
</p>
<ul><li> If the set of potential exceptions is the set of all types, the implicit exception specification <span class="t-rev-inl t-until-cxx11"><span>allows all exceptions (the exception specification is considered present, even though it is inexpressible in code and behaves as if there is no exception specification)</span><span><span class="t-mark-rev t-until-cxx11">(until C++11)</span></span></span><span class="t-rev-inl t-since-cxx11"><span>is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw1">noexcept</span><span class="br0">(</span><span class="kw2">false</span><span class="br0">)</span></span></span></span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>.
</li><li> Otherwise, If the set of potential exceptions is not empty, the implicit exception specification lists every type from the set.
</li><li> Otherwise, the implicit exception specification is <span class="t-rev-inl t-until-cxx11"><span><span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw1">throw</span><span class="br0">(</span><span class="br0">)</span></span></span></span><span><span class="t-mark-rev t-until-cxx11">(until C++11)</span></span></span><span class="t-rev-inl t-since-cxx11"><span><span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw1">noexcept</span><span class="br0">(</span><span class="kw2">true</span><span class="br0">)</span></span></span></span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>.
</li></ul>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">struct</span> A
<span class="br0">{</span>
    A<span class="br0">(</span><span class="kw4">int</span> <span class="sy1">=</span> <span class="br0">(</span>A<span class="br0">(</span><span class="nu0">5</span><span class="br0">)</span>, <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    A<span class="br0">(</span><span class="kw4">const</span> A<span class="sy3">&amp;</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    A<span class="br0">(</span>A<span class="sy3">&amp;&amp;</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    ~A<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span>X<span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span><span class="sy4">;</span>
&nbsp;
<span class="kw1">struct</span> B
<span class="br0">{</span>
    B<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    B<span class="br0">(</span><span class="kw4">const</span> B<span class="sy3">&amp;</span><span class="br0">)</span> <span class="sy1">=</span> <span class="kw1">default</span><span class="sy4">;</span> <span class="co1">// exception specification is "noexcept(true)"</span>
    B<span class="br0">(</span>B<span class="sy3">&amp;&amp;</span>, <span class="kw4">int</span> <span class="sy1">=</span> <span class="br0">(</span><span class="kw1">throw</span> Y<span class="br0">(</span><span class="br0">)</span>, <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span> <span class="kw1">noexcept</span><span class="sy4">;</span>
    ~B<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span>Y<span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span><span class="sy4">;</span>
&nbsp;
<span class="kw4">int</span> n <span class="sy1">=</span> <span class="nu0">7</span><span class="sy4">;</span>
<span class="kw1">struct</span> D <span class="sy4">:</span> <span class="kw1">public</span> A, <span class="kw1">public</span> B
<span class="br0">{</span>
    <span class="co1">// May throw an exception of a type that would match a handler of type</span>
    <span class="co1">// std​::​bad_array_new_length, but does not throw a bad allocation exception</span>
    <span class="br0">(</span><span class="kw4">void</span><span class="sy2">*</span><span class="br0">)</span> new <span class="br0">(</span><a href="../memory/new/nothrow.html"><span class="kw703">std::<span class="me2">nothrow</span></span></a><span class="br0">)</span> <span class="kw4">int</span><span class="br0">[</span>n<span class="br0">]</span><span class="sy4">;</span>
&nbsp;
    <span class="co1">// D may have the following implicitly-declared members:</span>
    <span class="co1">// D::D() throw(X, std::bad_array_new_length);</span>
    <span class="co1">// D::D(const D&amp;) noexcept(true);</span>
    <span class="co1">// D::D(D&amp;&amp;) throw(Y);</span>
    <span class="co1">// D::~D() throw(X, Y);</span>
<span class="br0">}</span><span class="sy4">;</span></pre></div></div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;action=edit&amp;section=5" title="Edit section: Notes">edit</a>]</span> <span class="mw-headline" id="Notes">Notes</span></h3>
<p>Clang considers the rule of instantiation of dynamic exception specification is changed in C++11 by <a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1330.html">CWG1330</a>, see <a rel="nofollow" class="external text" href="https://github.com/llvm/llvm-project/issues/56439">LLVM #56349</a>.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;action=edit&amp;section=6" title="Edit section: Keywords">edit</a>]</span> <span class="mw-headline" id="Keywords">Keywords</span></h3>
<p><a href="../keyword/throw.html" title="cpp/keyword/throw"><tt>throw</tt></a>
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;action=edit&amp;section=7" title="Edit section: Example">edit</a>]</span> <span class="mw-headline" id="Example">Example</span></h3>
<div class="t-example"><p>Note: best be compiled in C++98 mode to avoid warnings. Incompatible with C++17 and newer revisions.</p><div class="t-example-live-link"><div class="coliru-btn coliru-btn-run-init">Run this code</div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="co2">#include &lt;cstdlib&gt;</span>
<span class="co2">#include &lt;exception&gt;</span>
<span class="co2">#include &lt;iostream&gt;</span>
&nbsp;
<span class="kw1">class</span> X <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span>
<span class="kw1">class</span> Y <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span>
<span class="kw1">class</span> Z <span class="sy4">:</span> <span class="kw1">public</span> X <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span>
<span class="kw1">class</span> W <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span>
&nbsp;
<span class="kw4">void</span> f<span class="br0">(</span><span class="br0">)</span> <span class="kw1">throw</span><span class="br0">(</span>X, Y<span class="br0">)</span> 
<span class="br0">{</span>
    <span class="kw4">bool</span> n <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
&nbsp;
    <span class="kw1">if</span> <span class="br0">(</span>n<span class="br0">)</span>
        <span class="kw1">throw</span> X<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// OK, would call std::terminate()</span>
    <span class="kw1">if</span> <span class="br0">(</span>n<span class="br0">)</span>
        <span class="kw1">throw</span> Z<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// also OK</span>
&nbsp;
    <span class="kw1">throw</span> W<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// will call std::unexpected()</span>
<span class="br0">}</span>
&nbsp;
<span class="kw4">void</span> handler<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <a href="../io/cerr.html"><span class="kw1777">std::<span class="me2">cerr</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"That was unexpected!<span class="es1">\n</span>"</span><span class="sy4">;</span> <span class="co1">// flush needed</span>
    <a href="../utility/program/abort.html"><span class="kw970">std::<span class="me2">abort</span></span></a><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <a href="../error/set_unexpected.html"><span class="kw795">std::<span class="me2">set_unexpected</span></span></a><span class="br0">(</span>handler<span class="br0">)</span><span class="sy4">;</span>
    f<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p>Output:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="text source-text"><pre class="de1">That was unexpected!</pre></div></div> 
</div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;action=edit&amp;section=8" title="Edit section: Defect reports">edit</a>]</span> <span class="mw-headline" id="Defect_reports">Defect reports</span></h3>
<p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.
</p>
<table class="dsctable" style="font-size:0.8em">
<tbody><tr>
<th>DR
</th>
<th>Applied to
</th>
<th>Behavior as published
</th>
<th>Correct behavior
</th></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/25.html">CWG 25</a>
</td>
<td>C++98
</td>
<td>the behavior of assignment and initialization<br>between pointers to members with different<br>exception specifications was unspecified
</td>
<td>apply the restriction<br>for function pointers<br>and references
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/973.html">CWG 973</a>
</td>
<td>C++98
</td>
<td>exception specification may contain functions types, but the<br>corresponding function pointer conversion was not specified
</td>
<td>specified
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1330.html">CWG 1330</a>
</td>
<td>C++98
</td>
<td>an exception specification might be eagerly instantiated
</td>
<td>it is only instantiated only if needed
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1267.html">CWG 1267</a>
</td>
<td>C++11
</td>
<td>rvalue reference types were allowed in exception specifications
</td>
<td>not allowed
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1351.html">CWG 1351</a>
</td>
<td>C++98<br>C++11
</td>
<td>default argument (C++98) and default member initializer<br>(C++11) were ignored in implicit exception specification
</td>
<td>made considered
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/1777.html">CWG 1777</a>
</td>
<td>C++11
</td>
<td><span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw1">throw</span><span class="br0">(</span>T...<span class="br0">)</span></span></span> was not a non-throwing<br>specification even if <span class="t-c"><span class="mw-geshi cpp source-cpp">T</span></span> is an empty pack
</td>
<td>it is non-throwing<br>if the pack is empty
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/CWG/issues/2191.html">CWG 2191</a>
</td>
<td>C++98
</td>
<td>the set of potential exceptions of a <code>typeid</code> expression<br>might contain <code>bad_typeid</code> even if it cannot be thrown
</td>
<td>contains <code>bad_typeid</code><br>only if it can be thrown
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;action=edit&amp;section=9" title="Edit section: See also">edit</a>]</span> <span class="mw-headline" id="See_also">See also</span></h3>
<table class="t-dsc-begin">

<tbody><tr class="t-dsc">
<td>  <a href="noexcept_spec.html" title="cpp/language/noexcept spec"> <code>noexcept</code> specifier</a><span class="t-mark-rev t-since-cxx11">(C++11)</span>
</td>
<td>  specifies whether a function could throw exceptions<span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/language/dsc_noexcept_spec&amp;action=edit">[edit]</a></span>
</td></tr>
</tbody></table>

<!-- 
NewPP limit report
Preprocessor visited node count: 4079/1000000
Preprocessor generated node count: 10154/1000000
Post‐expand include size: 142186/4194304 bytes
Template argument size: 21047/4194304 bytes
Highest expansion depth: 16/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mwiki1-mwiki_en_:pcache:idhash:3413-0!*!0!!en!*!* and timestamp 20250103113707 -->
</div>                    <!-- /bodycontent -->
                                        <!-- printfooter -->
                    <div class="printfooter">
                    Retrieved from "<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;oldid=174586">https://en.cppreference.com/mwiki/index.php?title=cpp/language/except_spec&amp;oldid=174586</a>"                    </div>
                    <!-- /printfooter -->
                                                            <!-- catlinks -->
                    <div id="catlinks" class="catlinks catlinks-allhidden"></div>                    <!-- /catlinks -->
                                                            <div class="visualClear"></div>
                    <!-- debughtml -->
                                        <!-- /debughtml -->
                </div>
                <!-- /bodyContent -->
            </div>
        </div>
        <!-- /content -->
        <!-- footer -->
        
        <!-- /footer -->
        <script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=skins.cppreference2&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi","ext.gadget.ColiruCompiler","ext.gadget.StandardRevisions","ext.gadget.MathJax"], null, true);
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<!-- Served in 2.439 secs. -->
	




</body><!-- Cached 20250103113708 --><!-- Mirrored from en.cppreference.com/w/cpp/language/except_spec by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:35:29 GMT --></html>