<!DOCTYPE html><html lang="en" dir="ltr" class="client-nojs"><!-- Mirrored from en.cppreference.com/w/cpp/locale/money_get/get by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 13:23:52 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->

<title>std::money_get&lt;CharT,InputIt&gt;::get, do_get</title>
<meta charset="UTF-8">
<meta name="generator" content="MediaWiki 1.21.2">







<meta name="ResourceLoaderDynamicStyles" content="">

<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}#toc{display:none}.editsection{display:none}
/* cache key: mwiki1-mwiki_en_:resourceloader:filter:minify-css:7:472787eddcf4605d11de8c7ef047234f */</style>




<style type="text/css">/*<![CDATA[*/
.source-cpp {line-height: normal;}
.source-cpp li, .source-cpp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp
 * CSS class: source-cpp, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp.source-cpp .de1, .cpp.source-cpp .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.cpp.source-cpp  {font-family:monospace;}
.cpp.source-cpp .imp {font-weight: bold; color: red;}
.cpp.source-cpp li, .cpp.source-cpp .li1 {font-weight: normal; vertical-align:top;}
.cpp.source-cpp .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp.source-cpp .li2 {font-weight: bold; vertical-align:top;}
.cpp.source-cpp .kw1 {color: #0000dd;}
.cpp.source-cpp .kw2 {color: #0000ff;}
.cpp.source-cpp .kw3 {color: #0000dd;}
.cpp.source-cpp .kw4 {color: #0000ff;}
.cpp.source-cpp .co1 {color: #909090;}
.cpp.source-cpp .co2 {color: #339900;}
.cpp.source-cpp .coMULTI {color: #ff0000; font-style: italic;}
.cpp.source-cpp .es0 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es1 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es2 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es3 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es4 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es5 {color: #008000; font-weight: bold;}
.cpp.source-cpp .br0 {color: #008000;}
.cpp.source-cpp .sy0 {color: #008000;}
.cpp.source-cpp .sy1 {color: #000080;}
.cpp.source-cpp .sy2 {color: #000040;}
.cpp.source-cpp .sy3 {color: #000040;}
.cpp.source-cpp .sy4 {color: #008080;}
.cpp.source-cpp .st0 {color: #008000;}
.cpp.source-cpp .nu0 {color: #000080;}
.cpp.source-cpp .nu6 {color: #000080;}
.cpp.source-cpp .nu8 {color: #000080;}
.cpp.source-cpp .nu12 {color: #000080;}
.cpp.source-cpp .nu16 {color:#000080;}
.cpp.source-cpp .nu17 {color:#000080;}
.cpp.source-cpp .nu18 {color:#000080;}
.cpp.source-cpp .nu19 {color:#000080;}
.cpp.source-cpp .ln-xtra, .cpp.source-cpp li.ln-xtra, .cpp.source-cpp div.ln-xtra {background-color: #ffc;}
.cpp.source-cpp span.xtra { display:block; }

/*]]>*/
</style><style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/mwiki/skins/cppreference2/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_locale_money_get_get skin-cppreference2 action-view cpp-navbar">
        <!-- header -->
        
        <!-- /header -->
        <!-- content -->
<style type="text/css">
#carbonads {
  display: block;
  overflow: hidden;
  position: absolute;
  text-align: center;
  left: -170px;
  max-width: 150px;
  border-radius: 4px;
  border: solid 1px hsla(0, 0%, 0%, .1);
  background-color: hsl(0, 0%, 98%);
  font-size: 12px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu,
  Cantarell, "Helvetica Neue", Helvetica, Arial, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: inherit;
  text-decoration: none;
}

#carbonads a:hover {
  color: inherit;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  display: block;
  margin-bottom: 8px;
  max-width: 150px;
  line-height: 1;
}

.carbon-img img {
  display: block;
  margin: 0 auto;
  max-width: 150px !important;
  width: 150px;
  height: auto;
}

.carbon-text {
  display: block;
  padding: 0 1em 8px;
}

.carbon-poweredby {
  display: block;
  padding: 8px 12px;
  background: repeating-linear-gradient(-45deg, transparent, transparent 5px, hsla(0, 0%, 0%, .025) 5px, hsla(0, 0%, 0%, .025) 10px) hsla(203, 11%, 95%, .4);
  text-transform: uppercase;
  letter-spacing: .5px;
  font-weight: 600;
  font-size: 9px;
  line-height: 1;
}
html { font-variant-ligatures: no-common-ligatures; }
</style>
        <div id="cpp-content-base">
            <div id="content">
                <a id="top"></a>
                <div id="mw-js-message" style="display:none;"></div>
                                <!-- firstHeading -->
<script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYITK7M&amp;placement=cppreferencecom" id="_carbonads_js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HW0LXMYCY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8HW0LXMYCY');
</script>
                <h1 id="firstHeading" class="firstHeading"><span style="font-size:0.7em; line-height:130%">std::money_get&lt;CharT,InputIt&gt;::</span>get, do_get</h1>
                <!-- /firstHeading -->
                <!-- bodyContent -->
                <div id="bodyContent">
                                        <!-- tagline -->
                    
                    <!-- /tagline -->
                                        <!-- subtitle -->
                    
                    <!-- /subtitle -->
                                                            <!-- bodycontent -->
                    <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<table class="t-dcl-begin"><tbody>
<tr class="t-dsc-header">
<td> <div>Defined in header <code><a href="../../header/locale.html" title="cpp/header/locale">&lt;locale&gt;</a></code>
 </div></td>
<td></td>
<td></td>
</tr>
<tr class="t-dcl">
<td> <div><span class="mw-geshi cpp source-cpp"><span class="kw1">public</span><span class="sy4">:</span><br>
<p>iter_type get<span class="br0">(</span> iter_type beg, iter_type end, <span class="kw4">bool</span> intl, <a href="../../io/ios_base.html"><span class="kw1686">std::<span class="me2">ios_base</span></span></a><span class="sy3">&amp;</span> str,<br>
</p>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="../../io/ios_base/iostate.html"><span class="kw1714">std::<span class="me2">ios_base</span><span class="sy4">::</span><span class="me2">iostate</span></span></a><span class="sy3">&amp;</span> err, <span class="kw4">long</span> <span class="kw4">double</span><span class="sy3">&amp;</span> units <span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span></span></div></td>
<td> (1) </td>
<td class="t-dcl-nopad">  </td>
</tr>
<tr class="t-dcl">
<td> <div><span class="mw-geshi cpp source-cpp">iter_type get<span class="br0">(</span> iter_type beg, iter_type end, <span class="kw4">bool</span> intl, <a href="../../io/ios_base.html"><span class="kw1686">std::<span class="me2">ios_base</span></span></a><span class="sy3">&amp;</span> str,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="../../io/ios_base/iostate.html"><span class="kw1714">std::<span class="me2">ios_base</span><span class="sy4">::</span><span class="me2">iostate</span></span></a><span class="sy3">&amp;</span> err, string_type<span class="sy3">&amp;</span> digits <span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span></span></div></td>
<td> (2) </td>
<td class="t-dcl-nopad">  </td>
</tr>
<tr class="t-dcl">
<td> <div><span class="mw-geshi cpp source-cpp"><span class="kw1">protected</span><span class="sy4">:</span><br>
<p><span class="kw1">virtual</span> iter_type do_get<span class="br0">(</span> iter_type beg, iter_type end, <span class="kw4">bool</span> intl, <a href="../../io/ios_base.html"><span class="kw1686">std::<span class="me2">ios_base</span></span></a><span class="sy3">&amp;</span> str,<br>
</p>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../../io/ios_base/iostate.html"><span class="kw1714">std::<span class="me2">ios_base</span><span class="sy4">::</span><span class="me2">iostate</span></span></a><span class="sy3">&amp;</span> err, <span class="kw4">long</span> <span class="kw4">double</span><span class="sy3">&amp;</span> units <span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span></span></div></td>
<td> (3) </td>
<td class="t-dcl-nopad">  </td>
</tr>
<tr class="t-dcl">
<td> <div><span class="mw-geshi cpp source-cpp"><span class="kw1">virtual</span> iter_type do_get<span class="br0">(</span> iter_type beg, iter_type end, <span class="kw4">bool</span> intl, <a href="../../io/ios_base.html"><span class="kw1686">std::<span class="me2">ios_base</span></span></a><span class="sy3">&amp;</span> str,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../../io/ios_base/iostate.html"><span class="kw1714">std::<span class="me2">ios_base</span><span class="sy4">::</span><span class="me2">iostate</span></span></a><span class="sy3">&amp;</span> err, string_type<span class="sy3">&amp;</span> digits <span class="br0">)</span> <span class="kw4">const</span><span class="sy4">;</span></span></div></td>
<td> (4) </td>
<td class="t-dcl-nopad">  </td>
</tr>
<tr class="t-dcl-sep"><td></td><td></td><td></td></tr>
</tbody></table>
<p>Parses monetary value from an input iterator and writes the result to a <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw4">long</span> <span class="kw4">double</span></span></span> or string.
</p>
<div class="t-li1"><span class="t-li">1,2)</span> Public member functions, call the member function <code>do_get</code> of the most derived class.</div>
<div class="t-li1"><span class="t-li">3,4)</span> Reads characters from the input iterator <span class="t-c"><span class="mw-geshi cpp source-cpp">beg</span></span>, expecting to find a monetary value formatted according to the rules specified by the <span class="t-c"><span class="mw-geshi cpp source-cpp"><a href="../ctype.html"><span class="kw1955">std::<span class="me2">ctype</span></span></a></span></span> facet imbued in <span class="t-c"><span class="mw-geshi cpp source-cpp">str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span></span></span> (<code>ct</code> for the rest of this page), the <span class="t-c"><span class="mw-geshi cpp source-cpp"><a href="../moneypunct.html"><span class="kw1989">std::<span class="me2">moneypunct</span></span></a><span class="sy1">&lt;</span>CharT, intl<span class="sy1">&gt;</span></span></span> facet imbued in <span class="t-c"><span class="mw-geshi cpp source-cpp">str.<span class="me1">getloc</span><span class="br0">(</span><span class="br0">)</span></span></span> (<code>mp</code> for the rest of this page), and the stream formatting flags obtained from <span class="t-c"><span class="mw-geshi cpp source-cpp">str.<span class="me1">flags</span><span class="br0">(</span><span class="br0">)</span></span></span>.</div>
<p>If the input iterator <span class="t-c"><span class="mw-geshi cpp source-cpp">beg</span></span> becomes equal to <span class="t-c"><span class="mw-geshi cpp source-cpp">end</span></span> before the parsing was completed, sets both <span class="t-lc">failbit</span> and <span class="t-lc">eofbit</span> in <span class="t-c"><span class="mw-geshi cpp source-cpp">err</span></span>. If parsing fails for another reason, sets the <code>failbit</code> in <span class="t-c"><span class="mw-geshi cpp source-cpp">err</span></span>. Either way, does not modify the output parameter (<span class="t-c"><span class="mw-geshi cpp source-cpp">units</span></span> or <span class="t-c"><span class="mw-geshi cpp source-cpp">digits</span></span>) on error.
</p><p>If the parsing succeeds, does not change <span class="t-c"><span class="mw-geshi cpp source-cpp">err</span></span>, and stores the result in <span class="t-c"><span class="mw-geshi cpp source-cpp">units</span></span> or <span class="t-c"><span class="mw-geshi cpp source-cpp">digits</span></span>.
</p><p>The formatting <span class="t-lc"><a href="../money_base.html" title="cpp/locale/money base">pattern</a></span> used by this function is always <span class="t-c"><span class="mw-geshi cpp source-cpp">mp.<span class="me1">neg_format</span><span class="br0">(</span><span class="br0">)</span></span></span>.
</p><p>If <span class="t-c"><span class="mw-geshi cpp source-cpp">mp.<span class="me1">grouping</span><span class="br0">(</span><span class="br0">)</span></span></span> does not permit thousands separators, the first separator encountered is treated as a parsing error, otherwise they are treated as optional.
</p><p>If <span class="t-lc">money_base::space</span> or <span class="t-lc">money_base::none</span> is the last element in the <span class="t-lc"><a href="../money_base.html" title="cpp/locale/money base">pattern</a></span>, the parser does not attempt to consume any whitespace after the other components of the monetary value were parsed. Otherwise, one or more whitespace characters are consumed where <span class="t-lc">money_base::space</span> appears.
</p><p>If <code>showbase</code> flag is set in <span class="t-c"><span class="mw-geshi cpp source-cpp">str.<span class="me1">flags</span><span class="br0">(</span><span class="br0">)</span></span></span>, the currency symbol or currency string is required, if it is not set, the currency symbol is optional.
</p><p>If the first character of the string returned by <span class="t-c"><span class="mw-geshi cpp source-cpp">mp.<span class="me1">positive_sign</span><span class="br0">(</span><span class="br0">)</span></span></span> or <span class="t-c"><span class="mw-geshi cpp source-cpp">mp.<span class="me1">negative_sign</span><span class="br0">(</span><span class="br0">)</span></span></span> is found in the <span class="t-lc">money_base::sign</span> position of the formatting pattern, it is consumed, and the rest of the characters in that string are expected and consumed after all other components of the monetary value. If both <span class="t-c"><span class="mw-geshi cpp source-cpp">mp.<span class="me1">positive_sign</span><span class="br0">(</span><span class="br0">)</span></span></span> and <span class="t-c"><span class="mw-geshi cpp source-cpp">mp.<span class="me1">negative_sign</span><span class="br0">(</span><span class="br0">)</span></span></span> are non-empty, the sign is required and must match the first character of one of these strings. If one of theses strings is empty, the sign is optional (and if it is absent, the sign of the result corresponds to the string that was empty). If both strings are empty, or have the same first character, the result is given the positive sign. If the output parameter is a string (<span class="t-c"><span class="mw-geshi cpp source-cpp">digits</span></span>) and the result is negative, the value <span class="t-c"><span class="mw-geshi cpp source-cpp">ct.<span class="me1">widen</span><span class="br0">(</span><span class="st0">'-'</span><span class="br0">)</span></span></span> is stored as the first character of the result.
</p><p>Digits from the input are extracted in order in which they appear and are placed in <span class="t-c"><span class="mw-geshi cpp source-cpp">digits</span></span> (after widening by <span class="t-c"><span class="mw-geshi cpp source-cpp">ct.<span class="me1">widen</span><span class="br0">(</span><span class="br0">)</span></span></span> as necessary), or into a temporary buffer <code>buf1</code>, from which the value of <span class="t-c"><span class="mw-geshi cpp source-cpp">units</span></span> is constructed as if by 
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">static</span> <span class="kw4">const</span> <span class="kw4">char</span> src<span class="br0">[</span><span class="br0">]</span> <span class="sy1">=</span> <span class="st0">"0123456789-"</span><span class="sy4">;</span>
CharT atoms<span class="br0">[</span>sizeof<span class="br0">(</span>src<span class="br0">)</span><span class="br0">]</span><span class="sy4">;</span>
ct.<span class="me1">widen</span><span class="br0">(</span>src, src <span class="sy2">+</span> sizeof<span class="br0">(</span>src<span class="br0">)</span> <span class="sy2">-</span> <span class="nu0">1</span>, atoms<span class="br0">)</span><span class="sy4">;</span>
<span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span> i <span class="sy1">&lt;</span> n<span class="sy4">;</span> <span class="sy2">++</span>i<span class="br0">)</span>
buf2<span class="br0">[</span>i<span class="br0">]</span> <span class="sy1">=</span> src<span class="br0">[</span>find<span class="br0">(</span>atoms, atoms<span class="sy2">+</span>sizeof<span class="br0">(</span>src<span class="br0">)</span>, buf1<span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span> <span class="sy2">-</span> atoms<span class="br0">]</span><span class="sy4">;</span>
buf2<span class="br0">[</span>n<span class="br0">]</span> <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
sscanf<span class="br0">(</span>buf2, <span class="st0">"%Lf"</span>, <span class="sy3">&amp;</span>units<span class="br0">)</span><span class="sy4">;</span></pre></div></div>
<p>(where <code>n</code> is the number of characters extracted from the input and stored in <code>buf1</code> and <code>buf2</code> is another sufficiently large character buffer).
</p>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Return_value"><span class="tocnumber">1</span> <span class="toctext">Return value</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Notes"><span class="tocnumber">2</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Example"><span class="tocnumber">3</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#See_also"><span class="tocnumber">4</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/locale/money_get/get&amp;action=edit&amp;section=1" title="Edit section: Return value">edit</a>]</span> <span class="mw-headline" id="Return_value">Return value</span></h3>
<p>An iterator pointing immediately after the last character recognized as a valid part of the monetary string input.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/locale/money_get/get&amp;action=edit&amp;section=2" title="Edit section: Notes">edit</a>]</span> <span class="mw-headline" id="Notes">Notes</span></h3>
<p>The currency units are assumed to be the smallest non-fractional units of the currency: cents in the U.S, yen in Japan. Thus, the input sequence <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="st0">"$1,056.23"</span></span></span> in a U.S. locale produces the number <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="nu16">105623.0</span></span></span> in <span class="t-c"><span class="mw-geshi cpp source-cpp">units</span></span> or a string <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="st0">"105623"</span></span></span> in <span class="t-c"><span class="mw-geshi cpp source-cpp">digits</span></span>.
</p><p>Because currency symbol is optional if <code>showbase</code> is off but the entire multicharacter <code>negative_sign()</code> is required, given the formatting pattern <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="br0">{</span>sign, value, space, symbol<span class="br0">}</span></span></span> with <code>showbase</code> off and negative_sign of <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="st0">"-"</span></span></span>, the string <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="st0">"-1.23 €"</span></span></span> parses as <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="sy2">-</span><span class="nu0">123</span></span></span> and leaves "€" unconsumed on the input stream, but if negative_sign is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="st0">"()"</span></span></span>, the string <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="st0">"(1.23 €)"</span></span></span> is consumed completely.
</p><p>The I/O manipulator <span class="t-lc"><a href="../../io/manip/get_money.html" title="cpp/io/manip/get money">std::get_money</a></span> offers a simpler interface to this function.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/locale/money_get/get&amp;action=edit&amp;section=3" title="Edit section: Example">edit</a>]</span> <span class="mw-headline" id="Example">Example</span></h3>
<div class="t-example"><div class="t-example-live-link"><div class="coliru-btn coliru-btn-run-init">Run this code</div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="co2">#include &lt;iostream&gt;</span>
<span class="co2">#include &lt;locale&gt;</span>
<span class="co2">#include &lt;sstream&gt;</span>
&nbsp;
<span class="kw4">void</span> demo_money_get<span class="br0">(</span><a href="../locale.html"><span class="kw1911">std::<span class="me2">locale</span></span></a> loc, <span class="kw4">const</span> <a href="../../string/basic_string.html"><span class="kw1238">std::<span class="me2">string</span></span></a><span class="sy3">&amp;</span> input<span class="br0">)</span>
<span class="br0">{</span>
    <a href="../../io/basic_istringstream.html"><span class="kw1752">std::<span class="me2">istringstream</span></span></a> str<span class="br0">(</span>input<span class="br0">)</span><span class="sy4">;</span>
    str.<span class="me1">imbue</span><span class="br0">(</span>loc<span class="br0">)</span><span class="sy4">;</span>
    <span class="kw4">long</span> <span class="kw4">double</span> units<span class="sy4">;</span>
&nbsp;
    <span class="co1">// The following can be written simpler with std::get_money(units)</span>
    <a href="../../io/ios_base/iostate.html"><span class="kw1714">std::<span class="me2">ios_base</span><span class="sy4">::</span><span class="me2">iostate</span></span></a> err <span class="sy1">=</span> <a href="../../io/ios_base/iostate.html"><span class="kw1715">std::<span class="me2">ios_base</span><span class="sy4">::</span><span class="me2">goodbit</span></span></a><span class="sy4">;</span>
    <a href="../../iterator/istreambuf_iterator.html"><span class="kw674">std::<span class="me2">istreambuf_iterator</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span> ret <span class="sy1">=</span>
        <a href="../use_facet.html"><span class="kw1914">std::<span class="me2">use_facet</span></span></a><span class="sy1">&lt;</span><a href="../money_get.html"><span class="kw1981">std::<span class="me2">money_get</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;&gt;</span><span class="br0">(</span>loc<span class="br0">)</span>.<span class="me1">get</span><span class="br0">(</span>
            <a href="../../iterator/istreambuf_iterator.html"><span class="kw674">std::<span class="me2">istreambuf_iterator</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><span class="br0">(</span>str<span class="br0">)</span>,
            <a href="../../iterator/istreambuf_iterator.html"><span class="kw674">std::<span class="me2">istreambuf_iterator</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><span class="br0">(</span><span class="br0">)</span>,
            <span class="kw2">false</span>, str, err, units<span class="br0">)</span><span class="sy4">;</span>
    str.<span class="me1">setstate</span><span class="br0">(</span>err<span class="br0">)</span><span class="sy4">;</span>
    <a href="../../iterator/istreambuf_iterator.html"><span class="kw674">std::<span class="me2">istreambuf_iterator</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span> last<span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span>
    <span class="kw1">if</span> <span class="br0">(</span>str<span class="br0">)</span>
    <span class="br0">{</span>
        <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"Successfully parsed '"</span> <span class="sy1">&lt;&lt;</span> str.<span class="me1">str</span><span class="br0">(</span><span class="br0">)</span> <span class="sy1">&lt;&lt;</span> <span class="st0">"' as "</span>
                  <span class="sy1">&lt;&lt;</span> units <span class="sy2">/</span> <span class="nu0">100</span> <span class="sy1">&lt;&lt;</span> <span class="st0">" units<span class="es1">\n</span>"</span><span class="sy4">;</span>
        <span class="kw1">if</span> <span class="br0">(</span>ret <span class="sy3">!</span><span class="sy1">=</span> last<span class="br0">)</span>
        <span class="br0">{</span>
            <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"Remaining content: '"</span><span class="sy4">;</span>
            <a href="../../algorithm/copy.html"><span class="kw1594">std::<span class="me2">copy</span></span></a><span class="br0">(</span>ret, last, <a href="../../iterator/ostreambuf_iterator.html"><span class="kw676">std::<span class="me2">ostreambuf_iterator</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><span class="br0">(</span><a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
            <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"'<span class="es1">\n</span>"</span><span class="sy4">;</span>
        <span class="br0">}</span>
        <span class="kw1">else</span>
            <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"The input was fully consumed<span class="es1">\n</span>"</span><span class="sy4">;</span>
    <span class="br0">}</span>
    <span class="kw1">else</span>
    <span class="br0">{</span>
        <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"Parse failed. Unparsed string: '"</span><span class="sy4">;</span>
        <a href="../../algorithm/copy.html"><span class="kw1594">std::<span class="me2">copy</span></span></a><span class="br0">(</span>ret, last, <a href="../../iterator/ostreambuf_iterator.html"><span class="kw676">std::<span class="me2">ostreambuf_iterator</span></span></a><span class="sy1">&lt;</span><span class="kw4">char</span><span class="sy1">&gt;</span><span class="br0">(</span><a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
        <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"'<span class="es1">\n</span>"</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    demo_money_get<span class="br0">(</span><a href="../locale.html"><span class="kw1911">std::<span class="me2">locale</span></span></a><span class="br0">(</span><span class="st0">"en_US.utf8"</span><span class="br0">)</span>, <span class="st0">"-$5.12 abc"</span><span class="br0">)</span><span class="sy4">;</span>
    demo_money_get<span class="br0">(</span><a href="../locale.html"><span class="kw1911">std::<span class="me2">locale</span></span></a><span class="br0">(</span><span class="st0">"ms_MY.utf8"</span><span class="br0">)</span>, <span class="st0">"(RM5.12) def"</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p>Output:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="text source-text"><pre class="de1">Successfully parsed '-$5.12 abc' as -5.12 units
Remaining content: ' abc'
Successfully parsed '(RM5.12) def' as -5.12 units
Remaining content: ' def'</pre></div></div> 
</div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/locale/money_get/get&amp;action=edit&amp;section=4" title="Edit section: See also">edit</a>]</span> <span class="mw-headline" id="See_also">See also</span></h3>
<table class="t-dsc-begin">

<tbody><tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="../moneypunct.html" title="cpp/locale/moneypunct"> <span class="t-lines"><span>moneypunct</span></span></a></div></div>
</td>
<td>  defines monetary formatting parameters used by <span class="t-lc"><a href="../money_get.html" title="cpp/locale/money get">std::money_get</a></span> and <span class="t-lc"><a href="../money_put.html" title="cpp/locale/money put">std::money_put</a></span> <br> <span class="t-mark">(class template)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/locale/dsc_moneypunct&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="../money_get.html" title="cpp/locale/money get"> <span class="t-lines"><span>money_get</span></span></a></div></div>
</td>
<td>  parses and constructs a monetary value from an input character sequence <br> <span class="t-mark">(class template)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/locale/dsc_money_get&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="../../io/manip/get_money.html" title="cpp/io/manip/get money"> <span class="t-lines"><span>get_money</span></span></a></div><div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span></span></span></div></div>
</td>
<td>  parses a monetary value <br> <span class="t-mark">(function template)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/io/manip/dsc_get_money&amp;action=edit">[edit]</a></span>
</td></tr>
</tbody></table>

<!-- 
NewPP limit report
Preprocessor visited node count: 7751/1000000
Preprocessor generated node count: 11368/1000000
Post‐expand include size: 182487/4194304 bytes
Template argument size: 35662/4194304 bytes
Highest expansion depth: 20/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mwiki1-mwiki_en_:pcache:idhash:12906-0!*!0!!en!*!* and timestamp 20250103194528 -->
</div>                    <!-- /bodycontent -->
                                        <!-- printfooter -->
                    <div class="printfooter">
                    Retrieved from "<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/locale/money_get/get&amp;oldid=160159">https://en.cppreference.com/mwiki/index.php?title=cpp/locale/money_get/get&amp;oldid=160159</a>"                    </div>
                    <!-- /printfooter -->
                                                            <!-- catlinks -->
                    <div id="catlinks" class="catlinks catlinks-allhidden"></div>                    <!-- /catlinks -->
                                                            <div class="visualClear"></div>
                    <!-- debughtml -->
                                        <!-- /debughtml -->
                </div>
                <!-- /bodyContent -->
            </div>
        </div>
        <!-- /content -->
        <!-- footer -->
        
        <!-- /footer -->
        <script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=skins.cppreference2&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi","ext.gadget.ColiruCompiler","ext.gadget.StandardRevisions","ext.gadget.MathJax"], null, true);
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<!-- Served in 5.275 secs. -->
	




</body><!-- Cached 20250103194528 --><!-- Mirrored from en.cppreference.com/w/cpp/locale/money_get/get by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 13:23:52 GMT --></html>