<!DOCTYPE html><html lang="en" dir="ltr" class="client-nojs"><!-- Mirrored from en.cppreference.com/w/cpp/memory/allocator by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:35:16 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->

<title>std::allocator</title>
<meta charset="UTF-8">
<meta name="generator" content="MediaWiki 1.21.2">







<meta name="ResourceLoaderDynamicStyles" content="">

<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}#toc{display:none}.editsection{display:none}
/* cache key: mwiki1-mwiki_en_:resourceloader:filter:minify-css:7:472787eddcf4605d11de8c7ef047234f */</style>




<style type="text/css">/*<![CDATA[*/
.source-cpp {line-height: normal;}
.source-cpp li, .source-cpp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp
 * CSS class: source-cpp, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp.source-cpp .de1, .cpp.source-cpp .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.cpp.source-cpp  {font-family:monospace;}
.cpp.source-cpp .imp {font-weight: bold; color: red;}
.cpp.source-cpp li, .cpp.source-cpp .li1 {font-weight: normal; vertical-align:top;}
.cpp.source-cpp .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp.source-cpp .li2 {font-weight: bold; vertical-align:top;}
.cpp.source-cpp .kw1 {color: #0000dd;}
.cpp.source-cpp .kw2 {color: #0000ff;}
.cpp.source-cpp .kw3 {color: #0000dd;}
.cpp.source-cpp .kw4 {color: #0000ff;}
.cpp.source-cpp .co1 {color: #909090;}
.cpp.source-cpp .co2 {color: #339900;}
.cpp.source-cpp .coMULTI {color: #ff0000; font-style: italic;}
.cpp.source-cpp .es0 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es1 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es2 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es3 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es4 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es5 {color: #008000; font-weight: bold;}
.cpp.source-cpp .br0 {color: #008000;}
.cpp.source-cpp .sy0 {color: #008000;}
.cpp.source-cpp .sy1 {color: #000080;}
.cpp.source-cpp .sy2 {color: #000040;}
.cpp.source-cpp .sy3 {color: #000040;}
.cpp.source-cpp .sy4 {color: #008080;}
.cpp.source-cpp .st0 {color: #008000;}
.cpp.source-cpp .nu0 {color: #000080;}
.cpp.source-cpp .nu6 {color: #000080;}
.cpp.source-cpp .nu8 {color: #000080;}
.cpp.source-cpp .nu12 {color: #000080;}
.cpp.source-cpp .nu16 {color:#000080;}
.cpp.source-cpp .nu17 {color:#000080;}
.cpp.source-cpp .nu18 {color:#000080;}
.cpp.source-cpp .nu19 {color:#000080;}
.cpp.source-cpp .ln-xtra, .cpp.source-cpp li.ln-xtra, .cpp.source-cpp div.ln-xtra {background-color: #ffc;}
.cpp.source-cpp span.xtra { display:block; }

/*]]>*/
</style><style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/mwiki/skins/cppreference2/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_memory_allocator skin-cppreference2 action-view cpp-navbar">
        <!-- header -->
        
        <!-- /header -->
        <!-- content -->
<style type="text/css">
#carbonads {
  display: block;
  overflow: hidden;
  position: absolute;
  text-align: center;
  left: -170px;
  max-width: 150px;
  border-radius: 4px;
  border: solid 1px hsla(0, 0%, 0%, .1);
  background-color: hsl(0, 0%, 98%);
  font-size: 12px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu,
  Cantarell, "Helvetica Neue", Helvetica, Arial, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: inherit;
  text-decoration: none;
}

#carbonads a:hover {
  color: inherit;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  display: block;
  margin-bottom: 8px;
  max-width: 150px;
  line-height: 1;
}

.carbon-img img {
  display: block;
  margin: 0 auto;
  max-width: 150px !important;
  width: 150px;
  height: auto;
}

.carbon-text {
  display: block;
  padding: 0 1em 8px;
}

.carbon-poweredby {
  display: block;
  padding: 8px 12px;
  background: repeating-linear-gradient(-45deg, transparent, transparent 5px, hsla(0, 0%, 0%, .025) 5px, hsla(0, 0%, 0%, .025) 10px) hsla(203, 11%, 95%, .4);
  text-transform: uppercase;
  letter-spacing: .5px;
  font-weight: 600;
  font-size: 9px;
  line-height: 1;
}
html { font-variant-ligatures: no-common-ligatures; }
</style>
        <div id="cpp-content-base">
            <div id="content">
                <a id="top"></a>
                <div id="mw-js-message" style="display:none;"></div>
                                <!-- firstHeading -->
<script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYITK7M&amp;placement=cppreferencecom" id="_carbonads_js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HW0LXMYCY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8HW0LXMYCY');
</script>
                <h1 id="firstHeading" class="firstHeading"><span style="font-size:0.7em; line-height:130%">std::</span>allocator</h1>
                <!-- /firstHeading -->
                <!-- bodyContent -->
                <div id="bodyContent">
                                        <!-- tagline -->
                    
                    <!-- /tagline -->
                                        <!-- subtitle -->
                    
                    <!-- /subtitle -->
                                                            <!-- bodycontent -->
                    <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<table class="t-dcl-begin"><tbody>
<tr class="t-dsc-header">
<td> <div>Defined in header <code><a href="../header/memory.html" title="cpp/header/memory">&lt;memory&gt;</a></code>
 </div></td>
<td></td>
<td></td>
</tr>
<tr class="t-dcl">
<td> <div><span class="mw-geshi cpp source-cpp"><span class="kw1">template</span><span class="sy1">&lt;</span> <span class="kw1">class</span> T <span class="sy1">&gt;</span><br>
<span class="kw1">struct</span> allocator<span class="sy4">;</span></span></div></td>
<td> (1) </td>
<td class="t-dcl-nopad">  </td>
</tr>
<tr class="t-dcl t-until-cxx20">
<td> <div><span class="mw-geshi cpp source-cpp"><span class="kw1">template</span><span class="sy1">&lt;&gt;</span><br>
<span class="kw1">struct</span> allocator<span class="sy1">&lt;</span><span class="kw4">void</span><span class="sy1">&gt;</span><span class="sy4">;</span></span></div></td>
<td> (2) </td>
<td> <span class="t-mark">(deprecated in C++17)</span> <br><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span> </td>
</tr>
<tr class="t-dcl-sep"><td></td><td></td><td></td></tr>
</tbody></table>
<p>The <code>std::allocator</code> class template is the default <a href="../named_req/Allocator.html" title="cpp/named req/Allocator"><span style="font-family: Georgia, 'DejaVu Serif', serif; font-style:italic">Allocator</span></a> used by all standard library containers if no user-specified allocator is provided. The default allocator is stateless, that is, all instances of the given allocator are interchangeable, compare equal and can deallocate memory allocated by any other instance of the same allocator type.
</p>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-until-cxx20"><td>
<p>The explicit specialization for <span class="mw-geshi cpp source-cpp"><span class="kw4">void</span></span> lacks the member typedefs <code>reference</code>, <code>const_reference</code>, <code>size_type</code> and <code>difference_type</code>. This specialization declares no member functions.
</p>
</td>
<td><span class="t-mark-rev t-until-cxx20">(until C++20)</span></td></tr>
</tbody></table>
<table class="t-rev-begin">
<tbody><tr class="t-rev t-since-cxx17"><td>
<p>The default allocator satisfies <a href="../named_req/Allocator.html#Allocator_completeness_requirements" title="cpp/named req/Allocator">allocator completeness requirements</a>.
</p>
</td>
<td><span class="t-mark-rev t-since-cxx17">(since C++17)</span></td></tr>
</tbody></table>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Member_types"><span class="tocnumber">1</span> <span class="toctext">Member types</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Member_functions"><span class="tocnumber">2</span> <span class="toctext">Member functions</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Non-member_functions"><span class="tocnumber">3</span> <span class="toctext">Non-member functions</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Notes"><span class="tocnumber">4</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Example"><span class="tocnumber">5</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Defect_reports"><span class="tocnumber">6</span> <span class="toctext">Defect reports</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#See_also"><span class="tocnumber">7</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/memory/allocator&amp;action=edit&amp;section=1" title="Edit section: Member types">edit</a>]</span> <span class="mw-headline" id="Member_types">Member types</span></h3>
<table class="t-dsc-begin">

<tbody><tr class="t-dsc-hitem">
<td> Type
</td>
<td> Definition
</td></tr>


<tr class="t-dsc">
<td> <code>value_type</code>
</td>
<td> <code>T</code>
</td></tr>


<tr class="t-dsc">
<td> <code>pointer</code> <span class="t-mark-rev t-deprecated-cxx17">(deprecated in C++17)</span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span>
</td>
<td> <code>T*</code>
</td></tr>


<tr class="t-dsc">
<td> <code>const_pointer</code> <span class="t-mark-rev t-deprecated-cxx17">(deprecated in C++17)</span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span>
</td>
<td> <span class="mw-geshi cpp source-cpp"><span class="kw4">const</span> T<span class="sy2">*</span></span>
</td></tr>


<tr class="t-dsc">
<td> <code>reference</code> <span class="t-mark-rev t-deprecated-cxx17">(deprecated in C++17)</span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span>
</td>
<td> <code>T&amp;</code>
</td></tr>


<tr class="t-dsc">
<td> <code>const_reference</code> <span class="t-mark-rev t-deprecated-cxx17">(deprecated in C++17)</span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span>
</td>
<td> <span class="mw-geshi cpp source-cpp"><span class="kw4">const</span> T<span class="sy3">&amp;</span></span>
</td></tr>


<tr class="t-dsc">
<td> <code>size_type</code>
</td>
<td> <span class="t-lc"><a href="../types/size_t.html" title="cpp/types/size t">std::size_t</a></span>
</td></tr>


<tr class="t-dsc">
<td> <code>difference_type</code>
</td>
<td> <span class="t-lc"><a href="../types/ptrdiff_t.html" title="cpp/types/ptrdiff t">std::ptrdiff_t</a></span>
</td></tr>


<tr class="t-dsc">
<td> <code>propagate_on_container_move_assignment</code> <span class="t-mark-rev t-since-cxx11">(C++11)</span>
</td>
<td> <span class="t-lc"><a href="../types/integral_constant.html" title="cpp/types/integral constant">std::true_type</a></span>
</td></tr>


<tr class="t-dsc">
<td> <code>rebind</code> <span class="t-mark-rev t-deprecated-cxx17">(deprecated in C++17)</span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span>
</td>
<td> <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw1">template</span><span class="sy1">&lt;</span> <span class="kw1">class</span> U <span class="sy1">&gt;</span><br>
<p><span class="kw1">struct</span> rebind<br>
<span class="br0">{</span><br>
&nbsp; &nbsp; <span class="kw1">typedef</span> allocator<span class="sy1">&lt;</span>U<span class="sy1">&gt;</span> other<span class="sy4">;</span><br>
<span class="br0">}</span><span class="sy4">;</span>
</p>
</span></span></td></tr>


<tr class="t-dsc">
<td> <code>is_always_equal</code> <span class="t-mark-rev t-since-cxx11">(C++11)</span><span class="t-mark-rev t-deprecated-cxx23">(deprecated in C++23)</span><span class="t-mark-rev t-until-cxx26">(removed in C++26)</span>
</td>
<td> <span class="t-lc"><a href="../types/integral_constant.html" title="cpp/types/integral constant">std::true_type</a></span>
</td></tr>

</tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/memory/allocator&amp;action=edit&amp;section=2" title="Edit section: Member functions">edit</a>]</span> <span class="mw-headline" id="Member_functions">Member functions</span></h3>
<table class="t-dsc-begin">

<tbody><tr class="t-dsc">
<td>  <div class="t-dsc-member-div t-dsc-member-nobold-div"><div><a href="allocator/allocator.html" title="cpp/memory/allocator/allocator"> <span class="t-lines"><span>(constructor)</span></span></a></div></div>
</td>
<td>  creates a new allocator instance <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/allocator/dsc_allocator&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div t-dsc-member-nobold-div"><div><a href="allocator/_allocator.html" title="cpp/memory/allocator/~allocator"> <span class="t-lines"><span>(destructor)</span></span></a></div></div>
</td>
<td>  destructs an allocator instance <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/allocator/dsc_%7Eallocator&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="allocator/address.html" title="cpp/memory/allocator/address"> <span class="t-lines"><span>address</span></span></a></div><div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(until C++20)</span></span></span></div></div>
</td>
<td>  obtains the address of an object, even if <span class="mw-geshi cpp source-cpp">operator<span class="sy3">&amp;</span></span> is overloaded <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/allocator/dsc_address&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="allocator/allocate.html" title="cpp/memory/allocator/allocate"> <span class="t-lines"><span>allocate</span></span></a></div></div>
</td>
<td>  allocates uninitialized storage <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/allocator/dsc_allocate&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="allocator/allocate_at_least.html" title="cpp/memory/allocator/allocate at least"> <span class="t-lines"><span>allocate_at_least</span></span></a></div><div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx23">(C++23)</span></span></span></div></div>
</td>
<td>  allocates uninitialized storage at least as large as requested size <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/allocator/dsc_allocate_at_least&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="allocator/deallocate.html" title="cpp/memory/allocator/deallocate"> <span class="t-lines"><span>deallocate</span></span></a></div></div>
</td>
<td>  deallocates storage <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/allocator/dsc_deallocate&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="allocator/max_size.html" title="cpp/memory/allocator/max size"> <span class="t-lines"><span>max_size</span></span></a></div><div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(until C++20)</span></span></span></div></div>
</td>
<td>  returns the largest supported allocation size <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/allocator/dsc_max_size&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="allocator/construct.html" title="cpp/memory/allocator/construct"> <span class="t-lines"><span>construct</span></span></a></div><div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(until C++20)</span></span></span></div></div>
</td>
<td>  constructs an object in allocated storage <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/allocator/dsc_construct&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="allocator/destroy.html" title="cpp/memory/allocator/destroy"> <span class="t-lines"><span>destroy</span></span></a></div><div><span class="t-lines"><span><span class="t-mark-rev t-until-cxx20">(until C++20)</span></span></span></div></div>
</td>
<td>  destructs an object in allocated storage <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/allocator/dsc_destroy&amp;action=edit">[edit]</a></span>
</td></tr>
</tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/memory/allocator&amp;action=edit&amp;section=3" title="Edit section: Non-member functions">edit</a>]</span> <span class="mw-headline" id="Non-member_functions">Non-member functions</span></h3>
<table class="t-dsc-begin">

<tbody><tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="allocator/operator_cmp.html" title="cpp/memory/allocator/operator cmp"> <span class="t-lines"><span>operator==</span><span>operator!=</span></span></a></div><div><span class="t-lines"><span></span><span><span class="t-mark-rev t-until-cxx20">(removed in C++20)</span></span></span></div></div>
</td>
<td>  compares two allocator instances <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/allocator/dsc_operator_cmp&amp;action=edit">[edit]</a></span>
</td></tr>
</tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/memory/allocator&amp;action=edit&amp;section=4" title="Edit section: Notes">edit</a>]</span> <span class="mw-headline" id="Notes">Notes</span></h3>
<p>The member template class <code>rebind</code> provides a way to obtain an allocator for a different type. For example, <span class="mw-geshi cpp source-cpp"><a href="../container/list.html"><span class="kw1282">std::<span class="me2">list</span></span></a><span class="sy1">&lt;</span>T, A<span class="sy1">&gt;</span></span> allocates nodes of some internal type <code>Node&lt;T&gt;</code>, using the allocator <span class="t-rev-inl t-until-cxx11"><span><code>A::rebind&lt;Node&lt;T&gt;&gt;::other</code></span><span><span class="t-mark-rev t-until-cxx11">(until C++11)</span></span></span><span class="t-rev-inl t-since-cxx11"><span><span class="mw-geshi cpp source-cpp"><a href="allocator_traits.html"><span class="kw704">std::<span class="me2">allocator_traits</span></span></a><span class="sy1">&lt;</span>A<span class="sy1">&gt;</span><span class="sy4">::</span><span class="me2">rebind_alloc</span><span class="sy1">&lt;</span>Node<span class="sy1">&lt;</span>T<span class="sy1">&gt;&gt;</span></span>, which is implemented in terms of <code>A::rebind&lt;Node&lt;T&gt;&gt;::other</code> if A is an <code>std::allocator</code></span><span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>.
</p><p>Member type <code>is_always_equal</code> is deprecated via <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue3170">LWG issue 3170</a>, because it makes custom allocators derived from <code>std::allocator</code> treated as always equal by default. <span class="mw-geshi cpp source-cpp"><a href="allocator_traits.html"><span class="kw704">std::<span class="me2">allocator_traits</span></span></a><span class="sy1">&lt;</span>std<span class="sy4">::</span><span class="me2">allocator</span><span class="sy1">&lt;</span>T<span class="sy1">&gt;&gt;</span><span class="sy4">::</span><span class="me2">is_always_equal</span></span> is not deprecated and its member constant <code>value</code> is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">true</span></span></span> for any <code>T</code>.
</p>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/memory/allocator&amp;action=edit&amp;section=5" title="Edit section: Example">edit</a>]</span> <span class="mw-headline" id="Example">Example</span></h3>
<div class="t-example"><div class="t-example-live-link"><div class="coliru-btn coliru-btn-run-init">Run this code</div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="co2">#include &lt;iostream&gt;</span>
<span class="co2">#include &lt;memory&gt;</span>
<span class="co2">#include &lt;string&gt;</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="co1">// default allocator for ints</span>
    std<span class="sy4">::</span><span class="me2">allocator</span><span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> alloc1<span class="sy4">;</span>
&nbsp;
    <span class="co1">// demonstrating the few directly usable members</span>
    static_assert<span class="br0">(</span><a href="../types/is_same.html"><span class="kw592">std::<span class="me2">is_same_v</span></span></a><span class="sy1">&lt;</span><span class="kw4">int</span>, decltype<span class="br0">(</span>alloc1<span class="br0">)</span><span class="sy4">::</span><span class="me2">value_type</span><span class="sy1">&gt;</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw4">int</span><span class="sy2">*</span> p1 <span class="sy1">=</span> alloc1.<span class="me1">allocate</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// space for one int</span>
    alloc1.<span class="me1">deallocate</span><span class="br0">(</span>p1, <span class="nu0">1</span><span class="br0">)</span><span class="sy4">;</span>     <span class="co1">// and it is gone</span>
&nbsp;
    <span class="co1">// Even those can be used through traits though, so no need</span>
    <span class="kw1">using</span> traits_t1 <span class="sy1">=</span> <a href="allocator_traits.html"><span class="kw704">std::<span class="me2">allocator_traits</span></span></a><span class="sy1">&lt;</span>decltype<span class="br0">(</span>alloc1<span class="br0">)</span><span class="sy1">&gt;</span><span class="sy4">;</span> <span class="co1">// The matching trait</span>
    p1 <span class="sy1">=</span> traits_t1<span class="sy4">::</span><span class="me2">allocate</span><span class="br0">(</span>alloc1, <span class="nu0">1</span><span class="br0">)</span><span class="sy4">;</span>
    traits_t1<span class="sy4">::</span><span class="me2">construct</span><span class="br0">(</span>alloc1, p1, <span class="nu0">7</span><span class="br0">)</span><span class="sy4">;</span>  <span class="co1">// construct the int</span>
    <a href="../io/cout.html"><span class="kw1774">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="sy2">*</span>p1 <span class="sy1">&lt;&lt;</span> <span class="st0">'<span class="es1">\n</span>'</span><span class="sy4">;</span>
    traits_t1<span class="sy4">::</span><span class="me2">deallocate</span><span class="br0">(</span>alloc1, p1, <span class="nu0">1</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// deallocate space for one int</span>
&nbsp;
    <span class="co1">// default allocator for strings</span>
    std<span class="sy4">::</span><span class="me2">allocator</span><span class="sy1">&lt;</span><a href="../string/basic_string.html"><span class="kw1237">std::<span class="me2">string</span></span></a><span class="sy1">&gt;</span> alloc2<span class="sy4">;</span>
    <span class="co1">// matching traits</span>
    <span class="kw1">using</span> traits_t2 <span class="sy1">=</span> <a href="allocator_traits.html"><span class="kw704">std::<span class="me2">allocator_traits</span></span></a><span class="sy1">&lt;</span>decltype<span class="br0">(</span>alloc2<span class="br0">)</span><span class="sy1">&gt;</span><span class="sy4">;</span>
&nbsp;
    <span class="co1">// Rebinding the allocator using the trait for strings gets the same type</span>
    traits_t2<span class="sy4">::</span><span class="me2">rebind_alloc</span><span class="sy1">&lt;</span><a href="../string/basic_string.html"><span class="kw1237">std::<span class="me2">string</span></span></a><span class="sy1">&gt;</span> alloc_ <span class="sy1">=</span> alloc2<span class="sy4">;</span>
&nbsp;
    <a href="../string/basic_string.html"><span class="kw1237">std::<span class="me2">string</span></span></a><span class="sy2">*</span> p2 <span class="sy1">=</span> traits_t2<span class="sy4">::</span><span class="me2">allocate</span><span class="br0">(</span>alloc2, <span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// space for 2 strings</span>
&nbsp;
    traits_t2<span class="sy4">::</span><span class="me2">construct</span><span class="br0">(</span>alloc2, p2, <span class="st0">"foo"</span><span class="br0">)</span><span class="sy4">;</span>
    traits_t2<span class="sy4">::</span><span class="me2">construct</span><span class="br0">(</span>alloc2, p2 <span class="sy2">+</span> <span class="nu0">1</span>, <span class="st0">"bar"</span><span class="br0">)</span><span class="sy4">;</span>
&nbsp;
    <a href="../io/cout.html"><span class="kw1774">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> p2<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy1">&lt;&lt;</span> <span class="st0">' '</span> <span class="sy1">&lt;&lt;</span> p2<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy1">&lt;&lt;</span> <span class="st0">'<span class="es1">\n</span>'</span><span class="sy4">;</span>
&nbsp;
    traits_t2<span class="sy4">::</span><span class="me2">destroy</span><span class="br0">(</span>alloc2, p2 <span class="sy2">+</span> <span class="nu0">1</span><span class="br0">)</span><span class="sy4">;</span>
    traits_t2<span class="sy4">::</span><span class="me2">destroy</span><span class="br0">(</span>alloc2, p2<span class="br0">)</span><span class="sy4">;</span>
    traits_t2<span class="sy4">::</span><span class="me2">deallocate</span><span class="br0">(</span>alloc2, p2, <span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p>Output:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="text source-text"><pre class="de1">7
foo bar</pre></div></div> 
</div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/memory/allocator&amp;action=edit&amp;section=6" title="Edit section: Defect reports">edit</a>]</span> <span class="mw-headline" id="Defect_reports">Defect reports</span></h3>
<p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.
</p>
<table class="dsctable" style="font-size:0.8em">
<tbody><tr>
<th>DR
</th>
<th>Applied to
</th>
<th>Behavior as published
</th>
<th>Correct behavior
</th></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2103">LWG 2103</a>
</td>
<td>C++11
</td>
<td>redundant comparison between <code>allocator</code> might be required
</td>
<td><code>propagate_on_container_move_assignment</code> provided
</td></tr>
<tr>
<td><a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2108">LWG 2108</a>
</td>
<td>C++11
</td>
<td>there was no way to show <code>allocator</code> is stateless
</td>
<td><code>is_always_equal</code> provided
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/memory/allocator&amp;action=edit&amp;section=7" title="Edit section: See also">edit</a>]</span> <span class="mw-headline" id="See_also">See also</span></h3>
<table class="t-dsc-begin">

<tbody><tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="allocator_traits.html" title="cpp/memory/allocator traits"> <span class="t-lines"><span>allocator_traits</span></span></a></div><div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span></span></span></div></div>
</td>
<td>  provides information about allocator types <br> <span class="t-mark">(class template)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/dsc_allocator_traits&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="scoped_allocator_adaptor.html" title="cpp/memory/scoped allocator adaptor"> <span class="t-lines"><span>scoped_allocator_adaptor</span></span></a></div><div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span></span></span></div></div>
</td>
<td>  implements multi-level allocator for multi-level containers <br> <span class="t-mark">(class template)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/dsc_scoped_allocator_adaptor&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="uses_allocator.html" title="cpp/memory/uses allocator"> <span class="t-lines"><span>uses_allocator</span></span></a></div><div><span class="t-lines"><span><span class="t-mark-rev t-since-cxx11">(C++11)</span></span></span></div></div>
</td>
<td>  checks if the specified type supports uses-allocator construction <br> <span class="t-mark">(class template)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/memory/dsc_uses_allocator&amp;action=edit">[edit]</a></span>
</td></tr>
</tbody></table>

<!-- 
NewPP limit report
Preprocessor visited node count: 12281/1000000
Preprocessor generated node count: 16137/1000000
Post‐expand include size: 373399/4194304 bytes
Template argument size: 78517/4194304 bytes
Highest expansion depth: 23/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mwiki1-mwiki_en_:pcache:idhash:3383-0!*!0!!en!*!* and timestamp 20250113083810 -->
</div>                    <!-- /bodycontent -->
                                        <!-- printfooter -->
                    <div class="printfooter">
                    Retrieved from "<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/memory/allocator&amp;oldid=163381">https://en.cppreference.com/mwiki/index.php?title=cpp/memory/allocator&amp;oldid=163381</a>"                    </div>
                    <!-- /printfooter -->
                                                            <!-- catlinks -->
                    <div id="catlinks" class="catlinks catlinks-allhidden"></div>                    <!-- /catlinks -->
                                                            <div class="visualClear"></div>
                    <!-- debughtml -->
                                        <!-- /debughtml -->
                </div>
                <!-- /bodyContent -->
            </div>
        </div>
        <!-- /content -->
        <!-- footer -->
        
        <!-- /footer -->
        <script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=skins.cppreference2&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi","ext.gadget.ColiruCompiler","ext.gadget.StandardRevisions","ext.gadget.MathJax"], null, true);
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<!-- Served in 2.342 secs. -->
	




</body><!-- Cached 20250113083810 --><!-- Mirrored from en.cppreference.com/w/cpp/memory/allocator by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:35:17 GMT --></html>