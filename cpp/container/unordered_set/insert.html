<!DOCTYPE html><html lang="en" dir="ltr" class="client-nojs"><!-- Mirrored from en.cppreference.com/w/cpp/container/unordered_set/insert by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:39:17 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->

<title>std::unordered_set&lt;Key,Hash,KeyEqual,Allocator&gt;::insert</title>
<meta charset="UTF-8">
<meta name="generator" content="MediaWiki 1.21.2">







<meta name="ResourceLoaderDynamicStyles" content="">

<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}#toc{display:none}.editsection{display:none}
/* cache key: mwiki1-mwiki_en_:resourceloader:filter:minify-css:7:472787eddcf4605d11de8c7ef047234f */</style>




<style type="text/css">/*<![CDATA[*/
.source-cpp {line-height: normal;}
.source-cpp li, .source-cpp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp
 * CSS class: source-cpp, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp.source-cpp .de1, .cpp.source-cpp .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.cpp.source-cpp  {font-family:monospace;}
.cpp.source-cpp .imp {font-weight: bold; color: red;}
.cpp.source-cpp li, .cpp.source-cpp .li1 {font-weight: normal; vertical-align:top;}
.cpp.source-cpp .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp.source-cpp .li2 {font-weight: bold; vertical-align:top;}
.cpp.source-cpp .kw1 {color: #0000dd;}
.cpp.source-cpp .kw2 {color: #0000ff;}
.cpp.source-cpp .kw3 {color: #0000dd;}
.cpp.source-cpp .kw4 {color: #0000ff;}
.cpp.source-cpp .co1 {color: #909090;}
.cpp.source-cpp .co2 {color: #339900;}
.cpp.source-cpp .coMULTI {color: #ff0000; font-style: italic;}
.cpp.source-cpp .es0 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es1 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es2 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es3 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es4 {color: #008000; font-weight: bold;}
.cpp.source-cpp .es5 {color: #008000; font-weight: bold;}
.cpp.source-cpp .br0 {color: #008000;}
.cpp.source-cpp .sy0 {color: #008000;}
.cpp.source-cpp .sy1 {color: #000080;}
.cpp.source-cpp .sy2 {color: #000040;}
.cpp.source-cpp .sy3 {color: #000040;}
.cpp.source-cpp .sy4 {color: #008080;}
.cpp.source-cpp .st0 {color: #008000;}
.cpp.source-cpp .nu0 {color: #000080;}
.cpp.source-cpp .nu6 {color: #000080;}
.cpp.source-cpp .nu8 {color: #000080;}
.cpp.source-cpp .nu12 {color: #000080;}
.cpp.source-cpp .nu16 {color:#000080;}
.cpp.source-cpp .nu17 {color:#000080;}
.cpp.source-cpp .nu18 {color:#000080;}
.cpp.source-cpp .nu19 {color:#000080;}
.cpp.source-cpp .ln-xtra, .cpp.source-cpp li.ln-xtra, .cpp.source-cpp div.ln-xtra {background-color: #ffc;}
.cpp.source-cpp span.xtra { display:block; }

/*]]>*/
</style><style type="text/css">/*<![CDATA[*/
.source-text {line-height: normal;}
.source-text li, .source-text pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for text
 * CSS class: source-text, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.text.source-text .de1, .text.source-text .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;}
.text.source-text  {font-family:monospace;}
.text.source-text .imp {font-weight: bold; color: red;}
.text.source-text li, .text.source-text .li1 {font-weight: normal; vertical-align:top;}
.text.source-text .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.text.source-text .li2 {font-weight: bold; vertical-align:top;}
.text.source-text .ln-xtra, .text.source-text li.ln-xtra, .text.source-text div.ln-xtra {background-color: #ffc;}
.text.source-text span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/mwiki/skins/cppreference2/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_container_unordered_set_insert skin-cppreference2 action-view cpp-navbar">
        <!-- header -->
        
        <!-- /header -->
        <!-- content -->
<style type="text/css">
#carbonads {
  display: block;
  overflow: hidden;
  position: absolute;
  text-align: center;
  left: -170px;
  max-width: 150px;
  border-radius: 4px;
  border: solid 1px hsla(0, 0%, 0%, .1);
  background-color: hsl(0, 0%, 98%);
  font-size: 12px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu,
  Cantarell, "Helvetica Neue", Helvetica, Arial, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: inherit;
  text-decoration: none;
}

#carbonads a:hover {
  color: inherit;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  display: block;
  margin-bottom: 8px;
  max-width: 150px;
  line-height: 1;
}

.carbon-img img {
  display: block;
  margin: 0 auto;
  max-width: 150px !important;
  width: 150px;
  height: auto;
}

.carbon-text {
  display: block;
  padding: 0 1em 8px;
}

.carbon-poweredby {
  display: block;
  padding: 8px 12px;
  background: repeating-linear-gradient(-45deg, transparent, transparent 5px, hsla(0, 0%, 0%, .025) 5px, hsla(0, 0%, 0%, .025) 10px) hsla(203, 11%, 95%, .4);
  text-transform: uppercase;
  letter-spacing: .5px;
  font-weight: 600;
  font-size: 9px;
  line-height: 1;
}
html { font-variant-ligatures: no-common-ligatures; }
</style>
        <div id="cpp-content-base">
            <div id="content">
                <a id="top"></a>
                <div id="mw-js-message" style="display:none;"></div>
                                <!-- firstHeading -->
<script async type="text/javascript" src="http://cdn.carbonads.com/carbon.js?serve=CKYITK7M&amp;placement=cppreferencecom" id="_carbonads_js"></script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-8HW0LXMYCY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8HW0LXMYCY');
</script>
                <h1 id="firstHeading" class="firstHeading"><span style="font-size:0.7em; line-height:130%">std::unordered_set&lt;Key,Hash,KeyEqual,Allocator&gt;::</span>insert</h1>
                <!-- /firstHeading -->
                <!-- bodyContent -->
                <div id="bodyContent">
                                        <!-- tagline -->
                    
                    <!-- /tagline -->
                                        <!-- subtitle -->
                    
                    <!-- /subtitle -->
                                                            <!-- bodycontent -->
                    <div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">
<table class="t-dcl-begin"><tbody>
<tr class="t-dcl t-since-cxx11">
<td> <div><span class="mw-geshi cpp source-cpp"><a href="../../utility/pair.html"><span class="kw1104">std::<span class="me2">pair</span></span></a><span class="sy1">&lt;</span>iterator,<span class="kw4">bool</span><span class="sy1">&gt;</span> insert<span class="br0">(</span> <span class="kw4">const</span> value_type<span class="sy3">&amp;</span> value <span class="br0">)</span><span class="sy4">;</span></span></div></td>
<td> (1) </td>
<td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td>
</tr>
<tr class="t-dcl t-since-cxx11">
<td> <div><span class="mw-geshi cpp source-cpp"><a href="../../utility/pair.html"><span class="kw1104">std::<span class="me2">pair</span></span></a><span class="sy1">&lt;</span>iterator,<span class="kw4">bool</span><span class="sy1">&gt;</span> insert<span class="br0">(</span> value_type<span class="sy3">&amp;&amp;</span> value <span class="br0">)</span><span class="sy4">;</span></span></div></td>
<td> (2) </td>
<td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td>
</tr>
<tr class="t-dcl t-since-cxx11">
<td> <div><span class="mw-geshi cpp source-cpp">iterator insert<span class="br0">(</span> const_iterator hint, <span class="kw4">const</span> value_type<span class="sy3">&amp;</span> value <span class="br0">)</span><span class="sy4">;</span></span></div></td>
<td> (3) </td>
<td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td>
</tr>
<tr class="t-dcl t-since-cxx11">
<td> <div><span class="mw-geshi cpp source-cpp">iterator insert<span class="br0">(</span> const_iterator hint, value_type<span class="sy3">&amp;&amp;</span> value <span class="br0">)</span><span class="sy4">;</span></span></div></td>
<td> (4) </td>
<td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td>
</tr>
<tr class="t-dcl t-since-cxx11">
<td> <div><span class="mw-geshi cpp source-cpp"><span class="kw1">template</span><span class="sy1">&lt;</span> <span class="kw1">class</span> InputIt <span class="sy1">&gt;</span><br>
<span class="kw4">void</span> insert<span class="br0">(</span> InputIt first, InputIt last <span class="br0">)</span><span class="sy4">;</span></span></div></td>
<td> (5) </td>
<td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td>
</tr>
<tr class="t-dcl t-since-cxx11">
<td> <div><span class="mw-geshi cpp source-cpp"><span class="kw4">void</span> insert<span class="br0">(</span> <a href="../../utility/initializer_list.html"><span class="kw964">std::<span class="me2">initializer_list</span></span></a><span class="sy1">&lt;</span>value_type<span class="sy1">&gt;</span> ilist <span class="br0">)</span><span class="sy4">;</span></span></div></td>
<td> (6) </td>
<td> <span class="t-mark-rev t-since-cxx11">(since C++11)</span> </td>
</tr>
<tr class="t-dcl t-since-cxx17">
<td> <div><span class="mw-geshi cpp source-cpp">insert_return_type insert<span class="br0">(</span> node_type<span class="sy3">&amp;&amp;</span> nh <span class="br0">)</span><span class="sy4">;</span></span></div></td>
<td> (7) </td>
<td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td>
</tr>
<tr class="t-dcl t-since-cxx17">
<td> <div><span class="mw-geshi cpp source-cpp">iterator insert<span class="br0">(</span> const_iterator hint, node_type<span class="sy3">&amp;&amp;</span> nh <span class="br0">)</span><span class="sy4">;</span></span></div></td>
<td> (8) </td>
<td> <span class="t-mark-rev t-since-cxx17">(since C++17)</span> </td>
</tr>
<tr class="t-dcl t-since-cxx23">
<td><div><span id="Version_9"></span><span class="mw-geshi cpp source-cpp"><span class="kw1">template</span><span class="sy1">&lt;</span> <span class="kw1">class</span> K <span class="sy1">&gt;</span><br>
<a href="../../utility/pair.html"><span class="kw1104">std::<span class="me2">pair</span></span></a><span class="sy1">&lt;</span>iterator, <span class="kw4">bool</span><span class="sy1">&gt;</span> insert<span class="br0">(</span> K<span class="sy3">&amp;&amp;</span> obj <span class="br0">)</span><span class="sy4">;</span></span></div></td>
<td> (9)</td>
<td><span class="t-mark-rev t-since-cxx23">(since C++23)</span></td>
</tr>
<tr class="t-dcl t-since-cxx23">
<td> <div><span class="mw-geshi cpp source-cpp"><span class="kw1">template</span><span class="sy1">&lt;</span> <span class="kw1">class</span> K <span class="sy1">&gt;</span><br>
iterator insert<span class="br0">(</span> const_iterator hint, K<span class="sy3">&amp;&amp;</span> obj <span class="br0">)</span><span class="sy4">;</span></span></div></td>
<td> (10) </td>
<td> <span class="t-mark-rev t-since-cxx23">(since C++23)</span> </td>
</tr>
<tr class="t-dcl-sep"><td></td><td></td><td></td></tr>
</tbody></table>
<p>Inserts element(s) into the container, if the container doesn't already contain an element with an equivalent key.
</p>
<div class="t-li1"><span class="t-li">1,2)</span> Inserts <span class="t-c"><span class="mw-geshi cpp source-cpp">value</span></span>.</div>
<div class="t-li1"><span class="t-li">3,4)</span> Inserts <span class="t-c"><span class="mw-geshi cpp source-cpp">value</span></span>, using <span class="t-c"><span class="mw-geshi cpp source-cpp">hint</span></span> as a non-binding suggestion to where the search should start.</div>
<div class="t-li1"><span class="t-li">5)</span> Inserts elements from range <span style="display: inline-block;"><code>[</code><span class="t-c"><span class="mw-geshi cpp source-cpp">first</span></span><code>,&nbsp;</code><span class="t-c"><span class="mw-geshi cpp source-cpp">last</span></span><code>)</code></span>. If multiple elements in the range have keys that compare equivalent, it is unspecified which element is inserted (pending <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2844">LWG2844</a>).</div>
<div class="t-li1"><span class="t-li">6)</span> Inserts elements from initializer list <span class="t-c"><span class="mw-geshi cpp source-cpp">ilist</span></span>. If multiple elements in the range have keys that compare equivalent, it is unspecified which element is inserted (pending <a rel="nofollow" class="external text" href="https://cplusplus.github.io/LWG/issue2844">LWG2844</a>).</div>
<div class="t-li1"><span class="t-li">7)</span> If <span class="t-c"><span class="mw-geshi cpp source-cpp">nh</span></span> is an empty <a href="../node_handle.html" title="cpp/container/node handle">node handle</a>, does nothing. Otherwise, inserts the element owned by <span class="t-c"><span class="mw-geshi cpp source-cpp">nh</span></span> into the container , if the container doesn't already contain an element with a key equivalent to <span class="t-c"><span class="mw-geshi cpp source-cpp">nh.<span class="me1">key</span><span class="br0">(</span><span class="br0">)</span></span></span>. The behavior is undefined if <span class="t-c"><span class="mw-geshi cpp source-cpp">nh</span></span> is not empty and <span class="t-c"><span class="mw-geshi cpp source-cpp">get_allocator<span class="br0">(</span><span class="br0">)</span> <span class="sy3">!</span><span class="sy1">=</span> nh.<span class="me1">get_allocator</span><span class="br0">(</span><span class="br0">)</span></span></span>.</div>
<div class="t-li1"><span class="t-li">8)</span> If <span class="t-c"><span class="mw-geshi cpp source-cpp">nh</span></span> is an empty <a href="../node_handle.html" title="cpp/container/node handle">node handle</a>, does nothing and returns the end iterator. Otherwise, inserts the element owned by <span class="t-c"><span class="mw-geshi cpp source-cpp">nh</span></span> into the container, if the container doesn't already contain an element with a key equivalent to <span class="t-c"><span class="mw-geshi cpp source-cpp">nh.<span class="me1">key</span><span class="br0">(</span><span class="br0">)</span></span></span>, and returns the iterator pointing to the element with key equivalent to <span class="t-c"><span class="mw-geshi cpp source-cpp">nh.<span class="me1">key</span><span class="br0">(</span><span class="br0">)</span></span></span>(regardless of whether the insert succeeded or failed). If the insertion succeeds, <span class="t-c"><span class="mw-geshi cpp source-cpp">nh</span></span> is moved from, otherwise it retains ownership of the element. <span class="t-c"><span class="mw-geshi cpp source-cpp">hint</span></span> is used as a non-binding suggestion to where the search should start. The behavior is undefined if <span class="t-c"><span class="mw-geshi cpp source-cpp">nh</span></span> is not empty and <span class="t-c"><span class="mw-geshi cpp source-cpp">get_allocator<span class="br0">(</span><span class="br0">)</span> <span class="sy3">!</span><span class="sy1">=</span> nh.<span class="me1">get_allocator</span><span class="br0">(</span><span class="br0">)</span></span></span>.</div>
<div class="t-li1"><span class="t-li">9)</span> If <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="sy2">*</span>this</span></span> already contains an element which transparently compares <i>equivalent</i> to <span class="t-c"><span class="mw-geshi cpp source-cpp">obj</span></span>, does nothing. Otherwise, constructs an object <code>u</code> of <a href="../unordered_set.html#Member_types" title="cpp/container/unordered set"><code>value_type</code></a> with <span class="t-c"><span class="mw-geshi cpp source-cpp"><a href="../../utility/forward.html"><span class="kw1125">std::<span class="me2">forward</span></span></a><span class="sy1">&lt;</span>K<span class="sy1">&gt;</span><span class="br0">(</span>obj<span class="br0">)</span></span></span> and then inserts <code>u</code> into <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="sy2">*</span>this</span></span>. If <span class="t-c"><span class="mw-geshi cpp source-cpp">equal_range<span class="br0">(</span>u<span class="br0">)</span> <span class="sy3">!</span><span class="sy1">=</span> hash_function<span class="br0">(</span><span class="br0">)</span><span class="br0">(</span>obj<span class="br0">)</span> <span class="sy3">||</span> contains<span class="br0">(</span>u<span class="br0">)</span></span></span> is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">true</span></span></span>, the behavior is undefined. The <code>value_type</code> must be <a href="../../named_req/EmplaceConstructible.html" title="cpp/named req/EmplaceConstructible"><span style="font-family: Georgia, 'DejaVu Serif', serif; font-style:italic">EmplaceConstructible</span></a> into <code>unordered_set</code> from <span class="t-c"><span class="mw-geshi cpp source-cpp"><a href="../../utility/forward.html"><span class="kw1125">std::<span class="me2">forward</span></span></a><span class="sy1">&lt;</span>K<span class="sy1">&gt;</span><span class="br0">(</span>obj<span class="br0">)</span></span></span>. This overload participates in overload resolution only if <span class="t-c"><span class="mw-geshi cpp source-cpp">Hash<span class="sy4">::</span><span class="me2">is_transparent</span></span></span> and <span class="t-c"><span class="mw-geshi cpp source-cpp">KeyEqual<span class="sy4">::</span><span class="me2">is_transparent</span></span></span> are valid and each denotes a type. This assumes that such <code>Hash</code> is callable with both <code>K</code> and <code>Key</code> type, and that the <code>KeyEqual</code> is transparent, which, together, allows calling this function without constructing an instance of <code>Key</code>.</div>
<div class="t-li1"><span class="t-li">10)</span> If <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="sy2">*</span>this</span></span> already contains an element which transparently compares <i>equivalent</i> to <span class="t-c"><span class="mw-geshi cpp source-cpp">obj</span></span>, does nothing.
<p>Otherwise, constructs an object <code>u</code> of <a href="../unordered_set.html#Member_types" title="cpp/container/unordered set"><code>value_type</code></a> with <span class="t-c"><span class="mw-geshi cpp source-cpp"><a href="../../utility/forward.html"><span class="kw1125">std::<span class="me2">forward</span></span></a><span class="sy1">&lt;</span>K<span class="sy1">&gt;</span><span class="br0">(</span>obj<span class="br0">)</span></span></span> and then inserts <code>u</code> into <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="sy2">*</span>this</span></span>. <a href="https://en.cppreference.com/mwiki/index.php?title=Template:hint&amp;action=edit&amp;redlink=1" class="new" title="Template:hint (page does not exist)">Template:hint</a> is used as a non-binding suggestion to where the search should start. If <span class="t-c"><span class="mw-geshi cpp source-cpp">equal_range<span class="br0">(</span>u<span class="br0">)</span> <span class="sy3">!</span><span class="sy1">=</span> hash_function<span class="br0">(</span><span class="br0">)</span><span class="br0">(</span>obj<span class="br0">)</span> <span class="sy3">||</span> contains<span class="br0">(</span>u<span class="br0">)</span></span></span> is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">true</span></span></span>, the behavior is undefined.
The <code>value_type</code> must be <a href="../../named_req/EmplaceConstructible.html" title="cpp/named req/EmplaceConstructible"><span style="font-family: Georgia, 'DejaVu Serif', serif; font-style:italic">EmplaceConstructible</span></a> into <code>unordered_set</code> from <span class="t-c"><span class="mw-geshi cpp source-cpp"><a href="../../utility/forward.html"><span class="kw1125">std::<span class="me2">forward</span></span></a><span class="sy1">&lt;</span>K<span class="sy1">&gt;</span><span class="br0">(</span>obj<span class="br0">)</span></span></span>. This overload participates in overload resolution only if:
</p>
<ul><li> <span class="t-c"><span class="mw-geshi cpp source-cpp"><a href="../../types/is_convertible.html"><span class="kw598">std::<span class="me2">is_convertible_v</span></span></a><span class="sy1">&lt;</span>K<span class="sy3">&amp;&amp;</span>, const_iterator<span class="sy1">&gt;</span></span></span> and <span class="t-c"><span class="mw-geshi cpp source-cpp"><a href="../../types/is_convertible.html"><span class="kw598">std::<span class="me2">is_convertible_v</span></span></a><span class="sy1">&lt;</span>K<span class="sy3">&amp;&amp;</span>, iterator<span class="sy1">&gt;</span></span></span> are both <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">false</span></span></span>, and
</li><li> <span class="t-c"><span class="mw-geshi cpp source-cpp">Hash<span class="sy4">::</span><span class="me2">is_transparent</span></span></span> and <span class="t-c"><span class="mw-geshi cpp source-cpp">KeyEqual<span class="sy4">::</span><span class="me2">is_transparent</span></span></span> are valid and each denotes a type. This assumes that such <code>Hash</code> is callable with both <code>K</code> and <code>Key</code> type, and that the <code>KeyEqual</code> is transparent,
</li></ul>
which, together, allows calling this function without constructing an instance of <code>Key</code>.</div>
<p>If after the operation the new number of elements is greater than old <span class="t-c"><a href="max_load_factor.html" title="cpp/container/unordered set/max load factor"><code>max_load_factor()</code></a><code> *</code><code>&nbsp;</code><a href="bucket_count.html" title="cpp/container/unordered set/bucket count"><code>bucket_count()</code></a></span> a rehashing takes place.<br>If rehashing occurs (due to the insertion), all iterators are invalidated. Otherwise (no rehashing), iterators are not invalidated. <span class="t-rev-inl t-since-cxx17"><span>If the insertion is successful, pointers and references to the element obtained while it is held in the node handle are invalidated, and pointers and references obtained to that element before it was extracted become valid.</span><span><span class="t-mark-rev t-since-cxx17">(since C++17)</span></span></span>
</p>
<table id="toc" class="toc"><tbody><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Parameters"><span class="tocnumber">1</span> <span class="toctext">Parameters</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Return_value"><span class="tocnumber">2</span> <span class="toctext">Return value</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Exceptions"><span class="tocnumber">3</span> <span class="toctext">Exceptions</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Complexity"><span class="tocnumber">4</span> <span class="toctext">Complexity</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Notes"><span class="tocnumber">5</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Example"><span class="tocnumber">6</span> <span class="toctext">Example</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#See_also"><span class="tocnumber">7</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/container/unordered_set/insert&amp;action=edit&amp;section=1" title="Edit section: Parameters">edit</a>]</span> <span class="mw-headline" id="Parameters">Parameters</span></h3>
<table class="t-par-begin">


<tbody><tr class="t-par">
<td> hint
</td>
<td> -
</td>
<td> iterator, used as a suggestion as to where to insert the content
</td></tr>
<tr class="t-par">
<td> value
</td>
<td> -
</td>
<td> element value to insert
</td></tr>
<tr class="t-par">
<td> first, last
</td>
<td> -
</td>
<td> range of elements to insert
</td></tr>
<tr class="t-par">
<td> ilist
</td>
<td> -
</td>
<td> initializer list to insert the values from
</td></tr>
<tr class="t-par">
<td> nh
</td>
<td> -
</td>
<td> a compatible <a href="../node_handle.html" title="cpp/container/node handle">node handle</a>
</td></tr>
<tr class="t-par">
<td> obj
</td>
<td> -
</td>
<td> a value of any type that can be transparently compared with a key
</td></tr>
<tr class="t-par-hitem">
<td colspan="3"> Type requirements
</td></tr>
<tr class="t-par-req">
<td colspan="3"> -<div class="spacer"></div><code>InputIt</code> must meet the requirements of <a href="../../named_req/InputIterator.html" title="cpp/named req/InputIterator"><span style="font-family: Georgia, 'DejaVu Serif', serif; font-style:italic">LegacyInputIterator</span></a>.
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/container/unordered_set/insert&amp;action=edit&amp;section=2" title="Edit section: Return value">edit</a>]</span> <span class="mw-headline" id="Return_value">Return value</span></h3>
<div class="t-li1"><span class="t-li">1,2)</span> A pair consisting of an iterator to the inserted element (or to the element that prevented the insertion) and a <span class="mw-geshi cpp source-cpp"><span class="kw4">bool</span></span> value set to <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">true</span></span></span> if and only if the insertion took place.</div>
<div class="t-li1"><span class="t-li">3,4)</span> An iterator to the inserted element, or to the element that prevented the insertion.</div>
<div class="t-li1"><span class="t-li">5,6)</span> (none)</div>
<div class="t-li1"><span class="t-li">7)</span> An object of <a href="../unordered_set.html#Member_types" title="cpp/container/unordered set"><code>insert_return_type</code></a> with the members initialized as follows:
<ul><li> If <span class="t-c"><span class="mw-geshi cpp source-cpp">nh</span></span> is empty, <code>inserted</code> is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">false</span></span></span>, <code>position</code> is <span class="t-c"><span class="mw-geshi cpp source-cpp">end<span class="br0">(</span><span class="br0">)</span></span></span>, and <code>node</code> is empty.
</li><li> Otherwise if the insertion took place, <code>inserted</code> is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">true</span></span></span>, <code>position</code> points to the inserted element, and <code>node</code> is empty.
</li><li> If the insertion failed, <code>inserted</code> is <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">false</span></span></span>, <code>node</code> has the previous value of <span class="t-c"><span class="mw-geshi cpp source-cpp">nh</span></span>, and <code>position</code> points to an element with a key equivalent to <span class="t-c"><span class="mw-geshi cpp source-cpp">nh.<span class="me1">key</span><span class="br0">(</span><span class="br0">)</span></span></span>.</li></ul></div>

<div class="t-li1"><span class="t-li">8)</span> End iterator if <span class="t-c"><span class="mw-geshi cpp source-cpp">nh</span></span> was empty, iterator pointing to the inserted element if insertion took place, and iterator pointing to an element with a key equivalent to <span class="t-c"><span class="mw-geshi cpp source-cpp">nh.<span class="me1">key</span><span class="br0">(</span><span class="br0">)</span></span></span> if it failed.</div>
<div class="t-li1"><span class="t-li">9)</span> A pair consisting of an iterator to the inserted element (or to the element that prevented the insertion) and a <span class="mw-geshi cpp source-cpp"><span class="kw4">bool</span></span> value set to <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw2">true</span></span></span> if and only if the insertion took place.</div>
<div class="t-li1"><span class="t-li">10)</span> An iterator to the inserted element, or to the element that prevented the insertion.</div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/container/unordered_set/insert&amp;action=edit&amp;section=3" title="Edit section: Exceptions">edit</a>]</span> <span class="mw-headline" id="Exceptions">Exceptions</span></h3>
<div class="t-li1"><span class="t-li">1-4)</span> If an exception is thrown by any operation, the insertion has no effect.</div>
<table class="metadata plainlinks ambox mbox-small-left ambox-notice" style=""><tbody><tr><td class="mbox-empty-cell"></td><td class="mbox-text" style="">This section is incomplete<br>Reason: cases 5-10 </td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/container/unordered_set/insert&amp;action=edit&amp;section=4" title="Edit section: Complexity">edit</a>]</span> <span class="mw-headline" id="Complexity">Complexity</span></h3>
<div class="t-li1"><span class="t-li">1-4)</span> Average case: <code>O(1)</code>, worst case <code>O(size())</code>.</div>
<div class="t-li1"><span class="t-li">5,6)</span> Average case: <code>O(N)</code>, where N is the number of elements to insert. Worst case: <code>O(N * size() + N)</code>.</div>
<div class="t-li1"><span class="t-li">7-10)</span> Average case: <code>O(1)</code>, worst case <code>O(size())</code>.</div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/container/unordered_set/insert&amp;action=edit&amp;section=5" title="Edit section: Notes">edit</a>]</span> <span class="mw-headline" id="Notes">Notes</span></h3>
<p>The hinted insert <span class="t-v">(3,4)</span> does not return a boolean in order to be signature-compatible with positional insert on sequential containers, such as <span class="t-lc"><a href="../vector/insert.html" title="cpp/container/vector/insert">std::vector::insert</a></span>. This makes it possible to create generic inserters such as <span class="t-lc"><a href="../../iterator/inserter.html" title="cpp/iterator/inserter">std::inserter</a></span>. One way to check success of a hinted insert is to compare <a href="size.html" title="cpp/container/unordered set/size"><code>size()</code></a> before and after.
</p>
<table class="wikitable ftm-begin ftm-has-value">

<tbody><tr>
<th><a href="../../utility/feature_test.html" title="cpp/utility/feature test">Feature-test</a> macro
</th>
<th><abbr title="The year/month in which the feature was adopted. The hyperlink under each value opens a compiler support page with entry for given feature.">Value</abbr>
</th>
<th><abbr title="Standard in which the feature is introduced; DR means defect report against that revision">Std</abbr>
</th>
<th>Feature
</th></tr>
<tr>
<td><a href="../../feature_test.html#cpp_lib_associative_heterogeneous_insertion" title="cpp/feature test"><code>__cpp_lib_associative_heterogeneous_insertion</code></a></td>
<td><a href="../../compiler_support/26.html#cpp_lib_associative_heterogeneous_insertion_202311L" title="cpp/compiler support/26"><code>202311L</code></a></td>
<td><span class="t-mark">(C++26)</span></td>
<td>Heterogeneous overloads for the remaining member functions in <a href="../../container.html#Associative_containers" title="cpp/container">ordered</a> and <a href="../../container.html#Unordered_associative_containers" title="cpp/container">unordered</a> associative <a href="../../container.html" title="cpp/container">containers</a>. <span class="t-v">(<a href="#Version_9">9,10</a>)</span>
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/container/unordered_set/insert&amp;action=edit&amp;section=6" title="Edit section: Example">edit</a>]</span> <span class="mw-headline" id="Example">Example</span></h3>
<div class="t-example"><div class="t-example-live-link"><div class="coliru-btn coliru-btn-run-init">Run this code</div></div>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="co2">#include &lt;array&gt;</span>
<span class="co2">#include &lt;iostream&gt;</span>
<span class="co2">#include &lt;unordered_set&gt;</span>
&nbsp;
<a href="../../io/basic_ostream.html"><span class="kw1746">std::<span class="me2">ostream</span></span></a><span class="sy3">&amp;</span> operator<span class="sy1">&lt;&lt;</span><span class="br0">(</span><a href="../../io/basic_ostream.html"><span class="kw1746">std::<span class="me2">ostream</span></span></a><span class="sy3">&amp;</span> os, <a href="../unordered_set.html"><span class="kw1297">std::<span class="me2">unordered_set</span></span></a><span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> <span class="kw4">const</span><span class="sy3">&amp;</span> s<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">for</span> <span class="br0">(</span>os <span class="sy1">&lt;&lt;</span> <span class="st0">'['</span> <span class="sy1">&lt;&lt;</span> s.<span class="me1">size</span><span class="br0">(</span><span class="br0">)</span> <span class="sy1">&lt;&lt;</span> <span class="st0">"] { "</span><span class="sy4">;</span> <span class="kw4">int</span> i <span class="sy4">:</span> s<span class="br0">)</span>
        os <span class="sy1">&lt;&lt;</span> i <span class="sy1">&lt;&lt;</span> <span class="st0">' '</span><span class="sy4">;</span>
    <span class="kw1">return</span> os <span class="sy1">&lt;&lt;</span> <span class="st0">"}<span class="es1">\n</span>"</span><span class="sy4">;</span>
<span class="br0">}</span>
&nbsp;
<span class="kw4">int</span> main <span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <a href="../unordered_set.html"><span class="kw1297">std::<span class="me2">unordered_set</span></span></a><span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> nums<span class="br0">{</span><span class="nu0">2</span>, <span class="nu0">3</span>, <span class="nu0">4</span><span class="br0">}</span><span class="sy4">;</span>
&nbsp;
    <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"1) Initially: "</span> <span class="sy1">&lt;&lt;</span> nums <span class="sy1">&lt;&lt;</span> <a href="../../io/manip/boolalpha.html"><span class="kw1781">std::<span class="me2">boolalpha</span></span></a><span class="sy4">;</span>
    <span class="kw4">auto</span> p <span class="sy1">=</span> nums.<span class="me1">insert</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// insert element, overload (1)</span>
    <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"2) '1' was inserted: "</span> <span class="sy1">&lt;&lt;</span> p.<span class="me1">second</span> <span class="sy1">&lt;&lt;</span> <span class="st0">'<span class="es1">\n</span>'</span><span class="sy4">;</span>
    <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"3) After insertion: "</span> <span class="sy1">&lt;&lt;</span> nums<span class="sy4">;</span>
&nbsp;
    nums.<span class="me1">insert</span><span class="br0">(</span>p.<span class="me1">first</span>, <span class="nu0">0</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// insert with hint, overload (3)</span>
    <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"4) After insertion: "</span> <span class="sy1">&lt;&lt;</span> nums<span class="sy4">;</span>
&nbsp;
    <a href="../array.html"><span class="kw1276">std::<span class="me2">array</span></span></a><span class="sy1">&lt;</span><span class="kw4">int</span>, <span class="nu0">4</span><span class="sy1">&gt;</span> a <span class="sy1">=</span> <span class="br0">{</span><span class="nu0">10</span>, <span class="nu0">11</span>, <span class="nu0">12</span>, <span class="nu0">13</span><span class="br0">}</span><span class="sy4">;</span>
    nums.<span class="me1">insert</span><span class="br0">(</span>a.<span class="me1">begin</span><span class="br0">(</span><span class="br0">)</span>, a.<span class="me1">end</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// insert range, overload (5)</span>
    <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"5) After insertion: "</span> <span class="sy1">&lt;&lt;</span> nums<span class="sy4">;</span>
&nbsp;
    nums.<span class="me1">insert</span><span class="br0">(</span><span class="br0">{</span><span class="nu0">20</span>, <span class="nu0">21</span>, <span class="nu0">22</span>, <span class="nu0">23</span><span class="br0">}</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// insert initializer_list, (6)</span>
    <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"6) After insertion: "</span> <span class="sy1">&lt;&lt;</span> nums<span class="sy4">;</span>
&nbsp;
    <a href="../unordered_set.html"><span class="kw1297">std::<span class="me2">unordered_set</span></span></a><span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> other_nums <span class="sy1">=</span> <span class="br0">{</span><span class="nu0">42</span>, <span class="nu0">43</span><span class="br0">}</span><span class="sy4">;</span>
    <span class="kw4">auto</span> node <span class="sy1">=</span> other_nums.<span class="me1">extract</span><span class="br0">(</span>other_nums.<span class="me1">find</span><span class="br0">(</span><span class="nu0">42</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
    nums.<span class="me1">insert</span><span class="br0">(</span>std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>node<span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// insert node, overload (7)</span>
    <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"7) After insertion: "</span> <span class="sy1">&lt;&lt;</span> nums<span class="sy4">;</span>
&nbsp;
    node <span class="sy1">=</span> other_nums.<span class="me1">extract</span><span class="br0">(</span>other_nums.<span class="me1">find</span><span class="br0">(</span><span class="nu0">43</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
    nums.<span class="me1">insert</span><span class="br0">(</span>nums.<span class="me1">begin</span><span class="br0">(</span><span class="br0">)</span>, std<span class="sy4">::</span><span class="me2">move</span><span class="br0">(</span>node<span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// insert node with hint, (8)</span>
    <a href="../../io/cout.html"><span class="kw1775">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="st0">"8) After insertion: "</span> <span class="sy1">&lt;&lt;</span> nums<span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p>Possible output:
</p>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="text source-text"><pre class="de1">1) Initially: [3] { 4 3 2 }
2) '1' was inserted: true
3) After insertion: [4] { 1 2 3 4 }
4) After insertion: [5] { 0 1 2 3 4 }
5) After insertion: [9] { 13 12 11 10 4 3 2 1 0 }
6) After insertion: [13] { 23 22 13 12 11 10 21 4 20 3 2 1 0 }
7) After insertion: [14] { 42 23 22 13 12 11 10 21 4 20 3 2 1 0 }
8) After insertion: [15] { 43 42 23 22 13 12 11 10 21 4 20 3 2 1 0 }</pre></div></div> 
</div>
<h3><span class="editsection">[<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/container/unordered_set/insert&amp;action=edit&amp;section=7" title="Edit section: See also">edit</a>]</span> <span class="mw-headline" id="See_also">See also</span></h3>
<table class="t-dsc-begin">

<tbody><tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="emplace.html" title="cpp/container/unordered set/emplace"> <span class="t-lines"><span>emplace</span></span></a></div></div>
</td>
<td>  constructs element in-place  <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_emplace&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="emplace_hint.html" title="cpp/container/unordered set/emplace hint"> <span class="t-lines"><span>emplace_hint</span></span></a></div></div>
</td>
<td>  constructs elements in-place using a hint <br> <span class="t-mark">(public member function)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/container/dsc_emplace_hint&amp;action=edit">[edit]</a></span>
</td></tr>

<tr class="t-dsc">
<td>  <div class="t-dsc-member-div"><div><a href="../../iterator/inserter.html" title="cpp/iterator/inserter"> <span class="t-lines"><span>inserter</span></span></a></div></div>
</td>
<td>  creates a <span class="t-lc"><a href="../../iterator/insert_iterator.html" title="cpp/iterator/insert iterator">std::insert_iterator</a></span> of type inferred from the argument <br> <span class="t-mark">(function template)</span> <span class="editsection noprint plainlinks" title="Edit this template"><a rel="nofollow" class="external text" href="https://en.cppreference.com/mwiki/index.php?title=Template:cpp/iterator/dsc_inserter&amp;action=edit">[edit]</a></span>
</td></tr>
</tbody></table>

<!-- 
NewPP limit report
Preprocessor visited node count: 9930/1000000
Preprocessor generated node count: 20597/1000000
Post‐expand include size: 206519/4194304 bytes
Template argument size: 46061/4194304 bytes
Highest expansion depth: 20/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mwiki1-mwiki_en_:pcache:idhash:430-0!*!0!!en!*!* and timestamp 20250108211131 -->
</div>                    <!-- /bodycontent -->
                                        <!-- printfooter -->
                    <div class="printfooter">
                    Retrieved from "<a href="https://en.cppreference.com/mwiki/index.php?title=cpp/container/unordered_set/insert&amp;oldid=170189">https://en.cppreference.com/mwiki/index.php?title=cpp/container/unordered_set/insert&amp;oldid=170189</a>"                    </div>
                    <!-- /printfooter -->
                                                            <!-- catlinks -->
                    <div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://en.cppreference.com/w/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="https://en.cppreference.com/w/Category:Todo_with_reason" title="Category:Todo with reason">Todo with reason</a></li></ul></div></div>                    <!-- /catlinks -->
                                                            <div class="visualClear"></div>
                    <!-- debughtml -->
                                        <!-- /debughtml -->
                </div>
                <!-- /bodyContent -->
            </div>
        </div>
        <!-- /content -->
        <!-- footer -->
        
        <!-- /footer -->
        <script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=skins.cppreference2&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi","ext.gadget.ColiruCompiler","ext.gadget.StandardRevisions","ext.gadget.MathJax"], null, true);
}</script>
<script src="https://en.cppreference.com/mwiki/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=cppreference2&amp;*"></script>
<!-- Served in 6.204 secs. -->
	




</body><!-- Cached 20250108211131 --><!-- Mirrored from en.cppreference.com/w/cpp/container/unordered_set/insert by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 29 Jan 2025 11:39:17 GMT --></html>